import{_ as k,E as Kn,L as Qn,C as Jn,a as _n,b as to,c as eo,d as ro,T as io,e as b,i as It,f as Et,g as ht,m as ao,h as Ea,j as H,k as et,l as O,n as P,o as V,p as $,q as T,r as no,s as Si,v as te,t as y,u as I,w as bi,x as Ie,y as oo,z as xe,A as Ye,B as Zt,D as $t,F as br,G as Me,H as Ti,I as je,J as so,K as ka,M as Nr,N as j,O as Ee,P as Qt,Q as st,R as Oe,S as Re,U as lo,V as ho,W as co,X as uo,Y as ft,Z as Pa,$ as kt,a0 as yt,a1 as Ia,a2 as re,a3 as he,a4 as cr,a5 as vo,a6 as fo,a7 as ie,a8 as tt,a9 as po,aa as Oa,ab as Ot,ac as Lt,ad as ce,ae as ct,af as go,ag as yo,ah as mo,ai as xo,aj as Li,ak as wo,al as ur,am as Co,an as So,ao as bo,ap as De,aq as To,ar as Ge,as as Lo,at as Or,au as we,av as Pt,aw as Xe,ax as Ra,ay as Wr,az as Mo,aA as Ao,aB as Fo,aC as Bo,aD as vr,aE as Eo,aF as Da,aG as ko,aH as Po,aI as Io}from"./index-79630e7c.js";var Q;(function(r){r.FORE="fore",r.MID="mid",r.BG="bg"})(Q||(Q={}));var E;(function(r){r.TOP="top",r.TOP_LEFT="top-left",r.TOP_RIGHT="top-right",r.RIGHT="right",r.RIGHT_TOP="right-top",r.RIGHT_BOTTOM="right-bottom",r.LEFT="left",r.LEFT_TOP="left-top",r.LEFT_BOTTOM="left-bottom",r.BOTTOM="bottom",r.BOTTOM_LEFT="bottom-left",r.BOTTOM_RIGHT="bottom-right",r.RADIUS="radius",r.CIRCLE="circle",r.NONE="none"})(E||(E={}));var it;(function(r){r.AXIS="axis",r.GRID="grid",r.LEGEND="legend",r.TOOLTIP="tooltip",r.ANNOTATION="annotation",r.SLIDER="slider",r.SCROLLBAR="scrollbar",r.OTHER="other"})(it||(it={}));var fe={FORE:3,MID:2,BG:1},q;(function(r){r.BEFORE_RENDER="beforerender",r.AFTER_RENDER="afterrender",r.BEFORE_PAINT="beforepaint",r.AFTER_PAINT="afterpaint",r.BEFORE_CHANGE_DATA="beforechangedata",r.AFTER_CHANGE_DATA="afterchangedata",r.BEFORE_CLEAR="beforeclear",r.AFTER_CLEAR="afterclear",r.BEFORE_DESTROY="beforedestroy",r.BEFORE_CHANGE_SIZE="beforechangesize",r.AFTER_CHANGE_SIZE="afterchangesize"})(q||(q={}));var Yt;(function(r){r.BEFORE_DRAW_ANIMATE="beforeanimate",r.AFTER_DRAW_ANIMATE="afteranimate",r.BEFORE_RENDER_LABEL="beforerenderlabel",r.AFTER_RENDER_LABEL="afterrenderlabel"})(Yt||(Yt={}));var vt;(function(r){r.MOUSE_ENTER="plot:mouseenter",r.MOUSE_DOWN="plot:mousedown",r.MOUSE_MOVE="plot:mousemove",r.MOUSE_UP="plot:mouseup",r.MOUSE_LEAVE="plot:mouseleave",r.TOUCH_START="plot:touchstart",r.TOUCH_MOVE="plot:touchmove",r.TOUCH_END="plot:touchend",r.TOUCH_CANCEL="plot:touchcancel",r.CLICK="plot:click",r.DBLCLICK="plot:dblclick",r.CONTEXTMENU="plot:contextmenu",r.LEAVE="plot:leave",r.ENTER="plot:enter"})(vt||(vt={}));var nr;(function(r){r.ACTIVE="active",r.INACTIVE="inactive",r.SELECTED="selected",r.DEFAULT="default"})(nr||(nr={}));var ue=["color","shape","size"],W="_origin",Mi=1,Ai=1,Fi=.25,Ga={};function Oo(r){var i=Ga[r];if(!i)throw new Error("G engine '".concat(r,"' is not exist, please register it at first."));return i}function Va(r,i){Ga[r]=i}function Ro(r){var i=getComputedStyle(r);return{width:(r.clientWidth||parseInt(i.width,10))-parseInt(i.paddingLeft,10)-parseInt(i.paddingRight,10),height:(r.clientHeight||parseInt(i.height,10))-parseInt(i.paddingTop,10)-parseInt(i.paddingBottom,10)}}function Bi(r){return typeof r=="number"&&!isNaN(r)}function Ei(r,i,t,e){var a=t,n=e;if(i){var o=Ro(r);a=o.width?o.width:a,n=o.height?o.height:n}return{width:Math.max(Bi(a)?a:Mi,Mi),height:Math.max(Bi(n)?n:Ai,Ai)}}function Do(r){var i=r.parentNode;i&&i.removeChild(r)}var jr=function(r){k(i,r);function i(t){var e=r.call(this)||this;e.destroyed=!1;var a=t.visible,n=a===void 0?!0:a;return e.visible=n,e}return i.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},i.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},i.prototype.destroy=function(){this.off(),this.destroyed=!0},i.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},i}(Kn),Go=Qn,Vo=Jn,zo=_n,Ho=to,ki=eo,Yo=ro,fr=io;function Xo(r){if(It(r))return null;var i=r[0].x,t=r[0].x,e=r[0].y,a=r[0].y;return b(r,function(n){i=i>n.x?n.x:i,t=t<n.x?n.x:t,e=e>n.y?n.y:e,a=a<n.y?n.y:a}),{minX:i,maxX:t,minY:e,maxY:a,centerX:(i+t)/2,centerY:(e+a)/2}}function Pi(r){return Array.from(new Set(r)).length===1}function Ii(r){return(ao(r)+Ea(r))/2}function _(r,i,t,e){return{x:r+t*Math.cos(e),y:i+t*Math.sin(e)}}function _t(r,i,t,e,a,n){n===void 0&&(n=0);var o=_(r,i,t,e),s=_(r,i,t,a),l=_(r,i,n,e),h=_(r,i,n,a);if(a-e===Math.PI*2){var u=_(r,i,t,e+Math.PI),c=_(r,i,n,e+Math.PI),v=[["M",o.x,o.y],["A",t,t,0,1,1,u.x,u.y],["A",t,t,0,1,1,s.x,s.y],["M",l.x,l.y]];return n&&(v.push(["A",n,n,0,1,0,c.x,c.y]),v.push(["A",n,n,0,1,0,h.x,h.y])),v.push(["M",o.x,o.y]),v.push(["Z"]),v}var f=a-e<=Math.PI?0:1,p=[["M",o.x,o.y],["A",t,t,0,f,1,s.x,s.y],["L",h.x,h.y]];return n&&p.push(["A",n,n,0,f,0,l.x,l.y]),p.push(["L",o.x,o.y]),p.push(["Z"]),p}function za(r,i,t,e,a){var n=_(r,i,t,e),o=_(r,i,t,a);if(Et(a-e,Math.PI*2)){var s=_(r,i,t,e+Math.PI);return[["M",n.x,n.y],["A",t,t,0,1,1,s.x,s.y],["A",t,t,0,1,1,n.x,n.y],["A",t,t,0,1,0,s.x,s.y],["A",t,t,0,1,0,n.x,n.y],["Z"]]}var l=a-e<=Math.PI?0:1;return[["M",n.x,n.y],["A",t,t,0,l,1,o.x,o.y]]}function or(r,i){var t=r.points,e=Xo(t),a,n,o=i.startAngle,s=i.endAngle,l=s-o;return i.isTransposed?(a=e.maxY*l,n=e.minY*l):(a=e.maxX*l,n=e.minX*l),a+=o,n+=o,{startAngle:n,endAngle:a}}function No(r,i){if(ht(r)&&ht(i))return[r,i];if(r=r,i=i,Pi(r)||Pi(i))return[Ii(r),Ii(i)];for(var t=-1,e=0,a=0,n,o=r.length-1,s,l=0;++t<r.length;)n=o,o=t,l+=s=r[n]*i[o]-r[o]*i[n],e+=(r[n]+r[o])*s,a+=(i[n]+i[o])*s;return l*=3,[e/l,a/l]}function Ha(r,i){var t=r.attr(),e=i.attr();return b(t,function(a,n){e[n]===void 0&&(e[n]=void 0)}),e}function ve(r,i,t){var e=Math.min(i,t),a=Math.max(i,t);return r>=e&&r<=a}function Wo(r,i,t){if(et(r))return r.padEnd(i,t);if(O(r)){var e=r.length;if(e<i)for(var a=i-e,n=0;n<a;n++)r.push(t)}return r}function pt(r,i){return typeof r=="object"&&i.forEach(function(t){delete r[t]}),r}function zt(r,i,t){var e,a;i===void 0&&(i=[]),t===void 0&&(t=new Map);try{for(var n=H(r),o=n.next();!o.done;o=n.next()){var s=o.value;t.has(s)||(i.push(s),t.set(s,!0))}}catch(l){e={error:l}}finally{try{o&&!o.done&&(a=n.return)&&a.call(n)}finally{if(e)throw e.error}}return i}var ut=function(){function r(i,t,e,a){i===void 0&&(i=0),t===void 0&&(t=0),e===void 0&&(e=0),a===void 0&&(a=0),this.x=i,this.y=t,this.height=a,this.width=e}return r.fromRange=function(i,t,e,a){return new r(i,t,e-i,a-t)},r.fromObject=function(i){return new r(i.minX,i.minY,i.width,i.height)},Object.defineProperty(r.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),r.prototype.isEqual=function(i){return this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height},r.prototype.contains=function(i){return i.minX>=this.minX&&i.maxX<=this.maxX&&i.minY>=this.minY&&i.maxY<=this.maxY},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.add=function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=this.clone();return b(i,function(a){e.x=Math.min(a.x,e.x),e.y=Math.min(a.y,e.y),e.width=Math.max(a.maxX,e.maxX)-e.x,e.height=Math.max(a.maxY,e.maxY)-e.y}),e},r.prototype.merge=function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=this.clone();return b(i,function(a){e.x=Math.max(a.x,e.x),e.y=Math.max(a.y,e.y),e.width=Math.min(a.maxX,e.maxX)-e.x,e.height=Math.min(a.maxY,e.maxY)-e.y}),e},r.prototype.cut=function(i,t){var e=i.width,a=i.height;switch(t){case E.TOP:case E.TOP_LEFT:case E.TOP_RIGHT:return r.fromRange(this.minX,this.minY+a,this.maxX,this.maxY);case E.RIGHT:case E.RIGHT_TOP:case E.RIGHT_BOTTOM:return r.fromRange(this.minX,this.minY,this.maxX-e,this.maxY);case E.BOTTOM:case E.BOTTOM_LEFT:case E.BOTTOM_RIGHT:return r.fromRange(this.minX,this.minY,this.maxX,this.maxY-a);case E.LEFT:case E.LEFT_TOP:case E.LEFT_BOTTOM:return r.fromRange(this.minX+e,this.minY,this.maxX,this.maxY);default:return this}},r.prototype.shrink=function(i){var t=P(i,4),e=t[0],a=t[1],n=t[2],o=t[3];return new r(this.x+o,this.y+e,this.width-o-a,this.height-e-n)},r.prototype.expand=function(i){var t=P(i,4),e=t[0],a=t[1],n=t[2],o=t[3];return new r(this.x-o,this.y-e,this.width+o+a,this.height+e+n)},r.prototype.exceed=function(i){return[Math.max(-this.minY+i.minY,0),Math.max(this.maxX-i.maxX,0),Math.max(this.maxY-i.maxY,0),Math.max(-this.minX+i.minX,0)]},r.prototype.collide=function(i){return this.minX<i.maxX&&this.maxX>i.minX&&this.minY<i.maxY&&this.maxY>i.minY},r.prototype.size=function(){return this.width*this.height},r.prototype.isPointIn=function(i){return i.x>=this.minX&&i.x<=this.maxX&&i.y>=this.minY&&i.y<=this.maxY},r}();function jo(r){return[[r.minX,r.minY],[r.maxX,r.minY],[r.maxX,r.maxY],[r.minX,r.maxY]]}function Ne(r){if(r.isPolar&&!r.isTransposed)return(r.endAngle-r.startAngle)*r.getRadius();var i=r.convert({x:0,y:0}),t=r.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Uo(r){if(r.isPolar){var i=r.startAngle,t=r.endAngle;return t-i===Math.PI*2}return!1}function pr(r,i){var t=r.getCenter();return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))}function qo(r,i){var t=!1;if(r)if(r.type==="theta"){var e=r.start,a=r.end;t=ve(i.x,e.x,a.x)&&ve(i.y,e.y,a.y)}else{var n=r.invert(i);t=ve(n.x,0,1)&&ve(n.y,0,1)}return t}function de(r,i){var t=r.getCenter();return Math.atan2(i.y-t.y,i.x-t.x)}function Ur(r,i){i===void 0&&(i=0);var t=r.start,e=r.end,a=r.getWidth(),n=r.getHeight();if(r.isPolar){var o=r.startAngle,s=r.endAngle,l=r.getCenter(),h=r.getRadius();return{type:"path",startState:{path:_t(l.x,l.y,h+i,o,o)},endState:function(c){var v=(s-o)*c+o,f=_t(l.x,l.y,h+i,o,v);return{path:f}},attrs:{path:_t(l.x,l.y,h+i,o,s)}}}var u;return r.isTransposed?u={height:n+i*2}:u={width:a+i*2},{type:"rect",startState:{x:t.x-i,y:e.y-i,width:r.isTransposed?a+i*2:0,height:r.isTransposed?0:n+i*2},endState:u,attrs:{x:t.x-i,y:e.y-i,width:a+i*2,height:n+i*2}}}function Zo(r,i){i===void 0&&(i=0);var t=r.start,e=r.end,a=r.getWidth(),n=r.getHeight(),o=Math.min(t.x,e.x),s=Math.min(t.y,e.y);return ut.fromRange(o-i,s-i,o+a+i,s+n+i)}var $o=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function Ko(r){var i="linear";return $o.test(r)?i="timeCat":et(r)&&(i="cat"),i}function Ya(r,i,t,e){return i===void 0&&(i={}),i.type?i.type:r.type!=="identity"&&ue.includes(t)&&["interval"].includes(e)||r.isCategory?"cat":r.type}function Qo(r,i,t){var e=i||[];if(ht(r)||V(no(e,r))&&It(t)){var a=Si("identity");return new a({field:r.toString(),values:[r]})}var n=te(e,r),o=T(t,"type",Ko(n[0])),s=Si(o);return new s(y({field:r,values:n},t))}function Jo(r,i){if(r.type!=="identity"&&i.type!=="identity"){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e]);r.change(t)}}function Ve(r){return r.alias||r.field}function Xa(r,i,t){var e=r.values,a=e.length,n;if(a===1)n=[.5,1];else{var o=1,s=0;Uo(i)?i.isTransposed?(o=T(t,"widthRatio.multiplePie",1/1.3),s=1/a*o,n=[s/2,1-s/2]):n=[0,1-1/a]:(s=1/a/2,n=[s,1-s])}return n}function _o(r){var i=r.values.filter(function(t){return!V(t)&&!isNaN(t)});return Math.max.apply(Math,$($([],P(i),!1),[V(r.max)?-1/0:r.max],!1))}function ts(r){var i,t;switch(r){case E.TOP:i={x:0,y:1},t={x:1,y:1};break;case E.RIGHT:i={x:1,y:0},t={x:1,y:1};break;case E.BOTTOM:i={x:0,y:0},t={x:1,y:0};break;case E.LEFT:i={x:0,y:0},t={x:0,y:1};break;default:i=t={x:0,y:0}}return{start:i,end:t}}function es(r){var i,t;return r.isTransposed?(i={x:0,y:0},t={x:1,y:0}):(i={x:0,y:0},t={x:0,y:1}),{start:i,end:t}}function Ue(r,i){var t={start:{x:0,y:0},end:{x:0,y:0}};r.isRect?t=ts(i):r.isPolar&&(t=es(r));var e=t.start,a=t.end;return{start:r.convert(e),end:r.convert(a)}}function Na(r){var i=r.start,t=r.end;return i.x===t.x}function Oi(r,i){var t=r.start,e=r.end,a=Na(r);return a?(t.y-e.y)*(i.x-t.x)>0?1:-1:(e.x-t.x)*(t.y-i.y)>0?-1:1}function qe(r,i){var t=T(r,["components","axis"],{});return I({},T(t,["common"],{}),I({},T(t,[i],{})))}function Ri(r,i,t){var e=T(r,["components","axis"],{});return I({},T(e,["common","title"],{}),I({},T(e,[i,"title"],{})),t)}function Tr(r){var i=r.x,t=r.y,e=r.circleCenter,a=t.start>t.end,n=r.isTransposed?r.convert({x:a?0:1,y:0}):r.convert({x:0,y:a?0:1}),o=[n.x-e.x,n.y-e.y],s=[1,0],l=n.y>e.y?bi(o,s):bi(o,s)*-1,h=l+(i.end-i.start),u=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));return{center:e,radius:u,startAngle:l,endAngle:h}}function sr(r,i){return Ie(r)?r===!1?!1:{}:T(r,[i])}function Di(r,i){return T(r,"position",i)}function Gi(r,i){return T(i,["title","text"],Ve(r))}var Ce=function(){function r(i,t){this.destroyed=!1,this.facets=[],this.view=i,this.cfg=I({},this.getDefaultCfg(),t)}return r.prototype.init=function(){this.container||(this.container=this.createContainer());var i=this.view.getData();this.facets=this.generateFacets(i)},r.prototype.render=function(){this.renderViews()},r.prototype.update=function(){},r.prototype.clear=function(){this.clearFacetViews()},r.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},r.prototype.facetToView=function(i){var t=i.region,e=i.data,a=i.padding,n=a===void 0?this.cfg.padding:a,o=this.view.createView({region:t,padding:n});o.data(e||[]),i.view=o,this.beforeEachView(o,i);var s=this.cfg.eachView;return s&&s(o,i),this.afterEachView(o,i),o},r.prototype.createContainer=function(){var i=this.view.getLayer(Q.FORE);return i.addGroup()},r.prototype.renderViews=function(){this.createFacetViews()},r.prototype.createFacetViews=function(){var i=this;return this.facets.map(function(t){return i.facetToView(t)})},r.prototype.clearFacetViews=function(){var i=this;b(this.facets,function(t){t.view&&(i.view.removeView(t.view),t.view=void 0)})},r.prototype.parseSpacing=function(){var i=this.view.viewBBox,t=i.width,e=i.height,a=this.cfg.spacing;return a.map(function(n,o){return ht(n)?n/(o===0?t:e):parseFloat(n)/100})},r.prototype.getFieldValues=function(i,t){var e=[],a={};return b(i,function(n){var o=n[t];!V(o)&&!a[o]&&(e.push(o),a[o]=!0)}),e},r.prototype.getRegion=function(i,t,e,a){var n=P(this.parseSpacing(),2),o=n[0],s=n[1],l=(1+o)/(t===0?1:t)-o,h=(1+s)/(i===0?1:i)-s,u={x:(l+o)*e,y:(h+s)*a},c={x:u.x+l,y:u.y+h};return{start:u,end:c}},r.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,spacing:[0,0],padding:10,fields:[]}},r.prototype.getDefaultTitleCfg=function(){var i=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:i}}},r.prototype.processAxis=function(i,t){var e=i.getOptions(),a=e.coordinate,n=i.geometries,o=T(a,"type","rect");if(o==="rect"&&n.length){V(e.axes)&&(e.axes={});var s=e.axes,l=P(n[0].getXYFields(),2),h=l[0],u=l[1],c=sr(s,h),v=sr(s,u);c!==!1&&(e.axes[h]=this.getXAxisOption(h,s,c,t)),v!==!1&&(e.axes[u]=this.getYAxisOption(u,s,v,t))}},r.prototype.getFacetDataFilter=function(i){return function(t){return oo(i,function(e){var a=e.field,n=e.value;return!V(n)&&a?t[a]===n:!0})}},r}(),Wa={},rs=function(r){return Wa[xe(r)]},Se=function(r,i){Wa[xe(r)]=i},at=function(){function r(i,t){this.context=i,this.cfg=t,i.addAction(this)}return r.prototype.applyCfg=function(i){Ye(this,i)},r.prototype.init=function(){this.applyCfg(this.cfg)},r.prototype.destroy=function(){this.context.removeAction(this),this.context=null},r}(),is=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.execute=function(){this.callback&&this.callback(this.context)},i.prototype.destroy=function(){r.prototype.destroy.call(this),this.callback=null},i}(at),ja={};function as(r,i){var t=ja[r],e=null;if(t){var a=t.ActionClass,n=t.cfg;e=new a(i,n),e.name=r,e.init()}return e}function G(r,i,t){ja[r]={ActionClass:i,cfg:t}}function ns(r,i){var t=new is(i);return t.callback=r,t.name="callback",t}function os(r,i){var t=[];if(r.length){t.push(["M",r[0].x,r[0].y]);for(var e=1,a=r.length;e<a;e+=1){var n=r[e];t.push(["L",n.x,n.y])}i&&t.push(["Z"])}return t}function Rr(r,i){for(var t=[r[0]],e=1,a=r.length;e<a;e=e+2){var n=i.convert({x:r[e],y:r[e+1]});t.push(n.x,n.y)}return t}function Ua(r,i){var t=i.isTransposed,e=r[1],a=r[6],n=r[7],o=i.convert({x:a,y:n}),s=t?0:1;return["A",e,e,0,0,s,o.x,o.y]}function ss(r,i,t){var e=t.isTransposed,a=t.startAngle,n=t.endAngle,o=r[0].toLowerCase()==="a"?{x:r[6],y:r[7]}:{x:r[1],y:r[2]},s={x:i[1],y:i[2]},l=[],h=e?"y":"x",u=Math.abs(s[h]-o[h])*(n-a),c=s[h]>=o[h]?1:0,v=u>Math.PI?1:0,f=t.convert(s),p=pr(t,f);if(p>=.5)if(u===Math.PI*2){var d={x:(s.x+o.x)/2,y:(s.y+o.y)/2},g=t.convert(d);l.push(["A",p,p,0,v,c,g.x,g.y]),l.push(["A",p,p,0,v,c,f.x,f.y])}else l.push(["A",p,p,0,v,c,f.x,f.y]);return l}function ls(r){b(r,function(i,t){var e=i;if(e[0].toLowerCase()==="a"){var a=r[t-1],n=r[t+1];n&&n[0].toLowerCase()==="a"?a&&a[0].toLowerCase()==="l"&&(a[0]="M"):a&&a[0].toLowerCase()==="a"&&n&&n[0].toLowerCase()==="l"&&(n[0]="M")}})}var hs=function(r,i,t,e){var a,n=[],o=!!e,s,l,h,u,c,v,f;if(o){a=P(e,2),h=a[0],u=a[1];for(var p=0,d=r.length;p<d;p++){var g=r[p];h=Zt([0,0],h,g),u=$t([0,0],u,g)}}for(var p=0,m=r.length;p<m;p++){var g=r[p];if(p===0&&!t)f=g;else if(p===m-1&&!t)v=g,n.push(f),n.push(v);else{s=r[t?p?p-1:m-1:p-1],l=r[t?(p+1)%m:p+1];var w=[0,0];w=br(w,l,s),w=Me(w,w,i);var x=Ti(g,s),C=Ti(g,l),S=x+C;S!==0&&(x/=S,C/=S);var L=Me([0,0],w,-x),M=Me([0,0],w,C);v=je([0,0],g,L),c=je([0,0],g,M),c=Zt([0,0],c,$t([0,0],l,g)),c=$t([0,0],c,Zt([0,0],l,g)),L=br([0,0],c,g),L=Me([0,0],L,-x/C),v=je([0,0],g,L),v=Zt([0,0],v,$t([0,0],s,g)),v=$t([0,0],v,Zt([0,0],s,g)),M=br([0,0],g,v),M=Me([0,0],M,C/x),c=je([0,0],g,M),o&&(v=$t([0,0],v,h),v=Zt([0,0],v,u),c=$t([0,0],c,h),c=Zt([0,0],c,u)),n.push(f),n.push(v),f=c}}return t&&n.push(n.shift()),n};function qa(r,i,t){for(var e=!!i,a=[],n=0,o=r.length;n<o;n+=2)a.push([r[n],r[n+1]]);for(var s=hs(a,.4,e,t),l=a.length,h=[],u,c,v,n=0;n<l-1;n++)u=s[n*2],c=s[n*2+1],v=a[n+1],h.push(["C",u[0],u[1],c[0],c[1],v[0],v[1]]);return e&&(u=s[l],c=s[l+1],v=a[0],h.push(["C",u[0],u[1],c[0],c[1],v[0],v[1]])),h}function We(r,i){return os(r,i)}function lr(r,i,t){var e=[],a=r[0],n=null;if(r.length<=2)return We(r,i);for(var o=0,s=r.length;o<s;o++){var l=r[o];(!n||!(n.x===l.x&&n.y===l.y))&&(e.push(l.x),e.push(l.y),n=l)}var h=t||[[0,0],[1,1]],u=qa(e,i,h);return u.unshift(["M",a.x,a.y]),u}function cs(r,i){var t=[];return b(i,function(e){var a=e[0];switch(a.toLowerCase()){case"m":case"l":case"c":t.push(Rr(e,r));break;case"a":t.push(Ua(e,r));break;case"z":default:t.push(e);break}}),t}function us(r,i){var t=[],e,a,n,o;return b(i,function(s,l){var h=s[0];switch(h.toLowerCase()){case"m":case"c":case"q":t.push(Rr(s,r));break;case"l":e=i[l-1],a=s,n=r.isTransposed,o=n?e[e.length-2]===a[1]:e[e.length-1]===a[2],o?t=t.concat(ss(e,a,r)):t.push(Rr(s,r));break;case"a":t.push(Ua(s,r));break;case"z":default:t.push(s);break}}),ls(t),t}function Za(r,i){var t=r.event,e=t.target,a=e.getCanvasBBox();return a.width>=i||a.height>=i?a:null}function vs(r,i){var t=r.event,e=t.target,a=e.getCanvasBBox();return a.width>=i||a.height>=i?e.attr("path"):null}function Nt(r){var i=r.event,t,e=i.target;return e&&(t=e.get("element")),t}function ge(r){var i=r.event,t=i.target,e;return t&&(e=t.get("delegateObject")),e}function $a(r){var i=r.event.gEvent;return!(i&&i.fromShape&&i.toShape&&i.fromShape.get("element")===i.toShape.get("element"))}function ze(r){return r&&r.component&&r.component.isList()}function Ka(r){return r&&r.component&&r.component.isSlider()}function He(r){var i=r.event,t=i.target;return t&&t.get("name")==="mask"}function qr(r,i){var t=r.event.target;if(t.get("type")==="path"){var e=vs(r,i);return e?ds(r.view,e):void 0}var a=Za(r,i);return a?Zr(r.view,a):null}function Qa(r,i,t){var e=Za(r,t);if(!e)return null;var a=r.view,n=Dr(a,i,{x:e.x,y:e.y}),o=Dr(a,i,{x:e.maxX,y:e.maxY}),s={minX:n.x,minY:n.y,maxX:o.x,maxY:o.y};return Zr(i,s)}function nt(r){var i=r.geometries,t=[];return b(i,function(e){var a=e.elements;t=t.concat(a)}),r.views&&r.views.length&&b(r.views,function(e){t=t.concat(nt(e))}),t}function fs(r,i,t){var e=nt(r);return e.filter(function(a){return St(a,i)===t})}function Ja(r,i){var t=r.geometries,e=[];return b(t,function(a){var n=a.getElementsBy(function(o){return o.hasState(i)});e=e.concat(n)}),e}function St(r,i){var t=r.getModel(),e=t.data,a;return O(e)?a=e[0][i]:a=e[i],a}function ps(r,i){return!(i.minX>r.maxX||i.maxX<r.minX||i.minY>r.maxY||i.maxY<r.minY)}function Zr(r,i){var t=nt(r),e=[];return b(t,function(a){var n=a.shape,o=n.getCanvasBBox();ps(i,o)&&e.push(a)}),e}function Vi(r){var i=[];return b(r,function(t){var e=t[0];if(e!=="A")for(var a=1;a<t.length;a=a+2)i.push([t[a],t[a+1]]);else{var n=t.length;i.push([t[n-2],t[n-1]])}}),i}function ds(r,i){var t=nt(r),e=Vi(i),a=t.filter(function(n){var o=n.shape,s;if(o.get("type")==="path")s=Vi(o.attr("path"));else{var l=o.getCanvasBBox();s=jo(l)}return so(e,s)});return a}function _a(r){return r.getComponents().map(function(i){return i.component})}function $r(r,i){var t=i.x-r.x,e=i.y-r.y;return Math.sqrt(t*t+e*e)}function gs(r,i){if(r.length<=2)return We(r,!1);var t=r[0],e=[];b(r,function(n){e.push(n.x),e.push(n.y)});var a=qa(e,i,null);return a.unshift(["M",t.x,t.y]),a}function zi(r,i){return r.x<=i.x&&r.maxX>=i.x&&r.y<=i.y&&r.maxY>i.y}function Mt(r){var i=r.parent,t=null;return i&&(t=i.views.filter(function(e){return e!==r})),t}function ys(r,i){var t=r.getCoordinate();return t.invert(i)}function Dr(r,i,t){var e=ys(r,t);return i.getCoordinate().convert(e)}function tn(r,i,t,e){var a=!1;return b(r,function(n){if(n[t]===i[t]&&n[e]===i[e])return a=!0,!1}),a}function ye(r,i){var t=r.getScaleByField(i);return!t&&r.views&&b(r.views,function(e){if(t=ye(e,i),t)return!1}),t}var ms=function(){function r(i){this.actions=[],this.event=null,this.cacheMap={},this.view=i}return r.prototype.cache=function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];if(i.length===1)return this.cacheMap[i[0]];i.length===2&&(this.cacheMap[i[0]]=i[1])},r.prototype.getAction=function(i){return this.actions.find(function(t){return t.name===i})},r.prototype.addAction=function(i){this.actions.push(i)},r.prototype.removeAction=function(i){var t=this.actions,e=this.actions.indexOf(i);e>=0&&t.splice(e,1)},r.prototype.getCurrentPoint=function(){var i=this.event;if(i)if(i.target instanceof HTMLElement){var t=this.view.getCanvas(),e=t.getPointByClient(i.clientX,i.clientY);return e}else return{x:i.x,y:i.y};return null},r.prototype.getCurrentShape=function(){return T(this.event,["gEvent","shape"])},r.prototype.isInPlot=function(){var i=this.getCurrentPoint();return i?this.view.isPointInPlot(i):!1},r.prototype.isInShape=function(i){var t=this.getCurrentShape();return t?t.get("name")===i:!1},r.prototype.isInComponent=function(i){var t=_a(this.view),e=this.getCurrentPoint();return e?!!t.find(function(a){var n=a.getBBox();return i?a.get("name")===i&&zi(n,e):zi(n,e)}):!1},r.prototype.destroy=function(){b(this.actions.slice(),function(i){i.destroy()}),this.view=null,this.event=null,this.actions=null,this.cacheMap=null},r}(),xs=function(){function r(i,t){this.view=i,this.cfg=t}return r.prototype.init=function(){this.initEvents()},r.prototype.initEvents=function(){},r.prototype.clearEvents=function(){},r.prototype.destroy=function(){this.clearEvents()},r}();function Hi(r,i,t){var e=r.split(":"),a=e[0],n=i.getAction(a)||as(a,i);if(!n)throw new Error("There is no action named ".concat(a));var o=e[1];return{action:n,methodName:o,arg:t}}function Yi(r){var i=r.action,t=r.methodName,e=r.arg;if(i[t])i[t](e);else throw new Error("Action(".concat(i.name,") doesn't have a method called ").concat(t))}var gt={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},ws=function(r){k(i,r);function i(t,e){var a=r.call(this,t,e)||this;return a.callbackCaches={},a.emitCaches={},a.steps=e,a}return i.prototype.init=function(){this.initContext(),r.prototype.init.call(this)},i.prototype.destroy=function(){r.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},i.prototype.initEvents=function(){var t=this;b(this.steps,function(e,a){b(e,function(n){var o=t.getActionCallback(a,n);o&&t.bindEvent(n.trigger,o)})})},i.prototype.clearEvents=function(){var t=this;b(this.steps,function(e,a){b(e,function(n){var o=t.getActionCallback(a,n);o&&t.offEvent(n.trigger,o)})})},i.prototype.initContext=function(){var t=this.view,e=new ms(t);this.context=e;var a=this.steps;b(a,function(n){b(n,function(o){if(j(o.action))o.actionObject={action:ns(o.action,e),methodName:"execute"};else if(et(o.action))o.actionObject=Hi(o.action,e,o.arg);else if(O(o.action)){var s=o.action,l=O(o.arg)?o.arg:[o.arg];o.actionObject=[],b(s,function(h,u){o.actionObject.push(Hi(h,e,l[u]))})}})})},i.prototype.isAllowStep=function(t){var e=this.currentStepName,a=this.steps;if(e===t||t===gt.SHOW_ENABLE)return!0;if(t===gt.PROCESSING)return e===gt.START;if(t===gt.START)return e!==gt.PROCESSING;if(t===gt.END)return e===gt.PROCESSING||e===gt.START;if(t===gt.ROLLBACK){if(a[gt.END])return e===gt.END;if(e===gt.START)return!0}return!1},i.prototype.isAllowExecute=function(t,e){if(this.isAllowStep(t)){var a=this.getKey(t,e);return e.once&&this.emitCaches[a]?!1:e.isEnable?e.isEnable(this.context):!0}return!1},i.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},i.prototype.afterExecute=function(t,e){t!==gt.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var a=this.getKey(t,e);this.emitCaches[a]=!0},i.prototype.getKey=function(t,e){return t+e.trigger+e.action},i.prototype.getActionCallback=function(t,e){var a=this,n=this.context,o=this.callbackCaches,s=e.actionObject;if(e.action&&s){var l=this.getKey(t,e);if(!o[l]){var h=function(u){n.event=u,a.isAllowExecute(t,e)?(O(s)?b(s,function(c){n.event=u,Yi(c)}):(n.event=u,Yi(s)),a.afterExecute(t,e),e.callback&&(n.event=u,e.callback(n))):n.event=null};e.debounce?o[l]=ka(h,e.debounce.wait,e.debounce.immediate):e.throttle?o[l]=Nr(h,e.throttle.wait,{leading:e.throttle.leading,trailing:e.throttle.trailing}):o[l]=h}return o[l]}return null},i.prototype.bindEvent=function(t,e){var a=t.split(":");a[0]==="window"?window.addEventListener(a[1],e):a[0]==="document"?document.addEventListener(a[1],e):this.view.on(t,e)},i.prototype.offEvent=function(t,e){var a=t.split(":");a[0]==="window"?window.removeEventListener(a[1],e):a[0]==="document"?document.removeEventListener(a[1],e):this.view.off(t,e)},i}(xs),en={};function Cs(r){return en[xe(r)]}function Z(r,i){en[xe(r)]=i}function Ss(r,i,t){var e=Cs(r);if(!e)return null;if(Ee(e)){var a=Ye(Qt(e),t);return new ws(i,a)}else{var n=e;return new n(i,t)}}function bs(r){return{title:{autoRotate:!0,position:"center",spacing:r.axisTitleSpacing,style:{fill:r.axisTitleTextFillColor,fontSize:r.axisTitleTextFontSize,lineHeight:r.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:r.fontFamily},iconStyle:{fill:r.axisDescriptionIconFillColor}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:r.axisLabelOffset,style:{fill:r.axisLabelFillColor,fontSize:r.axisLabelFontSize,lineHeight:r.axisLabelLineHeight,fontFamily:r.fontFamily}},line:{style:{lineWidth:r.axisLineBorder,stroke:r.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:r.axisGridBorderColor,lineWidth:r.axisGridBorder,lineDash:r.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:r.axisTickLineBorder,stroke:r.axisTickLineBorderColor},alignTick:!0,length:r.axisTickLineLength},subTickLine:null,animate:!0}}function Ts(r){return{title:null,marker:{symbol:"circle",spacing:r.legendMarkerSpacing,style:{r:r.legendCircleMarkerSize,fill:r.legendMarkerColor}},itemName:{spacing:5,style:{fill:r.legendItemNameFillColor,fontFamily:r.fontFamily,fontSize:r.legendItemNameFontSize,lineHeight:r.legendItemNameLineHeight,fontWeight:r.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:"#D8D8D8"},markerStyle:{fill:"#D8D8D8",stroke:"#D8D8D8"}},inactive:{nameStyle:{fill:"#D8D8D8"},markerStyle:{opacity:.2}}},flipPage:!0,pageNavigator:{marker:{style:{size:r.legendPageNavigatorMarkerSize,inactiveFill:r.legendPageNavigatorMarkerInactiveFillColor,inactiveOpacity:r.legendPageNavigatorMarkerInactiveFillOpacity,fill:r.legendPageNavigatorMarkerFillColor,opacity:r.legendPageNavigatorMarkerFillOpacity}},text:{style:{fill:r.legendPageNavigatorTextFillColor,fontSize:r.legendPageNavigatorTextFontSize}}},animate:!1,maxItemWidth:200,itemSpacing:r.legendItemSpacing,itemMarginBottom:r.legendItemMarginBottom,padding:r.legendPadding}}function rn(r){var i,t={point:{default:{fill:r.pointFillColor,r:r.pointSize,stroke:r.pointBorderColor,lineWidth:r.pointBorder,fillOpacity:r.pointFillOpacity},active:{stroke:r.pointActiveBorderColor,lineWidth:r.pointActiveBorder},selected:{stroke:r.pointSelectedBorderColor,lineWidth:r.pointSelectedBorder},inactive:{fillOpacity:r.pointInactiveFillOpacity,strokeOpacity:r.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:r.hollowPointFillColor,lineWidth:r.hollowPointBorder,stroke:r.hollowPointBorderColor,strokeOpacity:r.hollowPointBorderOpacity,r:r.hollowPointSize},active:{stroke:r.hollowPointActiveBorderColor,strokeOpacity:r.hollowPointActiveBorderOpacity},selected:{lineWidth:r.hollowPointSelectedBorder,stroke:r.hollowPointSelectedBorderColor,strokeOpacity:r.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:r.hollowPointInactiveBorderOpacity}},area:{default:{fill:r.areaFillColor,fillOpacity:r.areaFillOpacity,stroke:null},active:{fillOpacity:r.areaActiveFillOpacity},selected:{fillOpacity:r.areaSelectedFillOpacity},inactive:{fillOpacity:r.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:r.hollowAreaBorderColor,lineWidth:r.hollowAreaBorder,strokeOpacity:r.hollowAreaBorderOpacity},active:{fill:null,lineWidth:r.hollowAreaActiveBorder},selected:{fill:null,lineWidth:r.hollowAreaSelectedBorder},inactive:{strokeOpacity:r.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:r.intervalFillColor,fillOpacity:r.intervalFillOpacity},active:{stroke:r.intervalActiveBorderColor,lineWidth:r.intervalActiveBorder},selected:{stroke:r.intervalSelectedBorderColor,lineWidth:r.intervalSelectedBorder},inactive:{fillOpacity:r.intervalInactiveFillOpacity,strokeOpacity:r.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:r.hollowIntervalFillColor,stroke:r.hollowIntervalBorderColor,lineWidth:r.hollowIntervalBorder,strokeOpacity:r.hollowIntervalBorderOpacity},active:{stroke:r.hollowIntervalActiveBorderColor,lineWidth:r.hollowIntervalActiveBorder,strokeOpacity:r.hollowIntervalActiveBorderOpacity},selected:{stroke:r.hollowIntervalSelectedBorderColor,lineWidth:r.hollowIntervalSelectedBorder,strokeOpacity:r.hollowIntervalSelectedBorderOpacity},inactive:{stroke:r.hollowIntervalInactiveBorderColor,lineWidth:r.hollowIntervalInactiveBorder,strokeOpacity:r.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:r.lineBorderColor,lineWidth:r.lineBorder,strokeOpacity:r.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:r.lineActiveBorder},selected:{lineWidth:r.lineSelectedBorder},inactive:{strokeOpacity:r.lineInactiveBorderOpacity}}},e=bs(r),a=Ts(r);return{background:r.backgroundColor,defaultColor:r.brandColor,subColor:r.subColor,semanticRed:r.paletteSemanticRed,semanticGreen:r.paletteSemanticGreen,padding:"auto",fontFamily:r.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:r.paletteQualitative10,colors20:r.paletteQualitative20,sequenceColors:r.paletteSequence,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(n){var o=n.geometry.coordinate;if(o.isPolar&&o.isTransposed){var s=or(n.getModel(),o),l=s.startAngle,h=s.endAngle,u=(l+h)/2,c=7.5,v=c*Math.cos(u),f=c*Math.sin(u);return{matrix:st(null,[["t",v,f]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:y(y({},t.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:y(y({},t.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:y(y({},t.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:y(y({},t.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:y(y({},t.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:y(y({},t.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:y(y({},t.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:y(y({},t.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},violin:{violin:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hollow:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"hollow-smooth":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}}},components:{axis:{common:e,top:{position:"top",grid:null,title:null,verticalLimitLength:1/2},bottom:{position:"bottom",grid:null,title:null,verticalLimitLength:1/2},left:{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3},right:{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3},circle:{title:null,grid:I({},e.grid,{line:{type:"line"}})},radius:{title:null,grid:I({},e.grid,{line:{type:"circle"}})}},legend:{common:a,right:{layout:"vertical",padding:r.legendVerticalPadding},left:{layout:"vertical",padding:r.legendVerticalPadding},top:{layout:"horizontal",padding:r.legendHorizontalPadding},bottom:{layout:"horizontal",padding:r.legendHorizontalPadding},continuous:{title:null,background:null,track:{},rail:{type:"color",size:r.sliderRailHeight,defaultLength:r.sliderRailWidth,style:{fill:r.sliderRailFillColor,stroke:r.sliderRailBorderColor,lineWidth:r.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:r.sliderLabelTextFillColor,fontSize:r.sliderLabelTextFontSize,lineHeight:r.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:r.fontFamily}},handler:{size:r.sliderHandlerWidth,style:{fill:r.sliderHandlerFillColor,stroke:r.sliderHandlerBorderColor}},slidable:!0,padding:a.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:r.tooltipCrosshairsBorderColor,lineWidth:r.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(i={},i["".concat(Oe)]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:r.tooltipContainerFillColor,opacity:r.tooltipContainerFillOpacity,boxShadow:r.tooltipContainerShadow,borderRadius:"".concat(r.tooltipContainerBorderRadius,"px"),color:r.tooltipTextFillColor,fontSize:"".concat(r.tooltipTextFontSize,"px"),fontFamily:r.fontFamily,lineHeight:"".concat(r.tooltipTextLineHeight,"px"),padding:"0 12px 0 12px"},i["".concat(Re)]={marginBottom:"12px",marginTop:"12px"},i["".concat(lo)]={margin:0,listStyleType:"none",padding:0},i["".concat(ho)]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},i["".concat(co)]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},i["".concat(uo)]={display:"inline-block",float:"right",marginLeft:"30px"},i)},annotation:{arc:{style:{stroke:r.annotationArcBorderColor,lineWidth:r.annotationArcBorder},animate:!0},line:{style:{stroke:r.annotationLineBorderColor,lineDash:r.annotationLineDash,lineWidth:r.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,textAlign:"start",fontFamily:r.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:r.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:r.annotationRegionBorder,stroke:r.annotationRegionBorderColor,fill:r.annotationRegionFillColor,fillOpacity:r.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:r.brandColor,lineWidth:2}},line:{style:{stroke:r.annotationLineBorderColor,lineWidth:r.annotationLineBorder},length:r.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,fontFamily:r.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:r.annotationRegionFillColor,fillOpacity:r.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:r.annotationTextFillColor,stroke:r.annotationTextBorderColor,lineWidth:r.annotationTextBorder,fontSize:r.annotationTextFontSize,fontFamily:r.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8],backgroundStyle:{fill:r.cSliderBackgroundFillColor,opacity:r.cSliderBackgroundFillOpacity},foregroundStyle:{fill:r.cSliderForegroundFillColor,opacity:r.cSliderForegroundFillOpacity},handlerStyle:{width:r.cSliderHandlerWidth,height:r.cSliderHandlerHeight,fill:r.cSliderHandlerFillColor,opacity:r.cSliderHandlerFillOpacity,stroke:r.cSliderHandlerBorderColor,lineWidth:r.cSliderHandlerBorder,radius:r.cSliderHandlerBorderRadius,highLightFill:r.cSliderHandlerHighlightFillColor},textStyle:{fill:r.cSliderTextFillColor,opacity:r.cSliderTextFillOpacity,fontSize:r.cSliderTextFontSize,lineHeight:r.cSliderTextLineHeight,fontWeight:r.cSliderTextFontWeight,stroke:r.cSliderTextBorderColor,lineWidth:r.cSliderTextBorder}}},scrollbar:{common:{padding:[8,8,8,8]},default:{style:{trackColor:r.scrollbarTrackFillColor,thumbColor:r.scrollbarThumbFillColor}},hover:{style:{thumbColor:r.scrollbarThumbHighlightFillColor}}}},labels:{offset:12,style:{fill:r.labelFillColor,fontSize:r.labelFontSize,fontFamily:r.fontFamily,stroke:r.labelBorderColor,lineWidth:r.labelBorder},fillColorDark:r.labelFillColorDark,fillColorLight:r.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:r.innerLabelFillColor,fontSize:r.innerLabelFontSize,fontFamily:r.fontFamily,stroke:r.innerLabelBorderColor,lineWidth:r.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:r.overflowLabelFillColor,fontSize:r.overflowLabelFontSize,fontFamily:r.fontFamily,stroke:r.overflowLabelBorderColor,lineWidth:r.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:r.labelLineBorder}},autoRotate:!0}}}var Y={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},oe={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},Ls=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],Ms=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],As=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],an=function(r){r===void 0&&(r={});var i=r.paletteQualitative10,t=i===void 0?Ls:i,e=r.paletteQualitative20,a=e===void 0?Ms:e,n=r.brandColor,o=n===void 0?t[0]:n,s={backgroundColor:"transparent",brandColor:o,subColor:"rgba(0,0,0,0.05)",paletteQualitative10:t,paletteQualitative20:a,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:As,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:Y[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:Y[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:oe[85],axisTickLineBorderColor:Y[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:Y[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:Y[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:Y[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:Y[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:o,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Y[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:Y[100],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:Y[100],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:Y[45],legendPageNavigatorTextFontSize:12,sliderRailFillColor:Y[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Y[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Y[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Y[25],annotationArcBorderColor:Y[15],annotationArcBorder:1,annotationLineBorderColor:Y[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:Y[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Y[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Y[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:Y[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Y[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:oe[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:Y[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:oe[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:Y[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#000",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(0,0,0,0)",scrollbarThumbFillColor:"rgba(0,0,0,0.15)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.2)",pointFillColor:o,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:oe[100],pointBorderOpacity:1,pointActiveBorderColor:Y[100],pointSelectedBorder:2,pointSelectedBorderColor:Y[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:o,hollowPointBorderOpacity:.95,hollowPointFillColor:oe[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Y[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Y[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:o,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:o,areaFillOpacity:.25,areaActiveFillColor:o,areaActiveFillOpacity:.5,areaSelectedFillColor:o,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:o,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Y[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Y[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:o,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Y[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Y[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:o,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:oe[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Y[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Y[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return y(y({},s),r)};an();function hr(r){var i=r.styleSheet,t=i===void 0?{}:i,e=ft(r,["styleSheet"]),a=an(t);return I({},rn(a),e)}var Fs=hr({}),Gr={default:Fs};function Lr(r){return T(Gr,xe(r),Gr.default)}function Bs(r,i){Gr[xe(r)]=hr(i)}function Xi(r,i,t){var e=t.translate(r),a=t.translate(i);return Et(e,a)}function Es(r,i){var t=i.coordinate,e=i.getXScale(),a=e.range,n=a[a.length-1],o=a[0],s=t.invert(r),l=s.x;return t.isPolar&&l>(1+n)/2&&(l=o),e.translate(e.invert(l))}function Ni(r,i,t){var e=t.coordinate,a=t.getYScale(),n=a.field,o=e.invert(i),s=a.invert(o.y),l=kt(r,function(h){var u=h[W];return u[n][0]<=s&&u[n][1]>=s});return l||r[r.length-1]}var ks=Pa(function(r){if(r.isCategory)return 1;for(var i=r.values,t=i.length,e=r.translate(i[0]),a=e,n=0;n<t;n++){var o=i[n],s=r.translate(o);s<e&&(e=s),s>a&&(a=s)}return(a-e)/(t-1)});function Ps(r,i,t){var e=i.getAttribute("position"),a=e.getFields(),n=i.scales,o=j(t)||!t?a[0]:t,s=n[o],l=s?s.getText(r[o]):r[o]||o;return j(t)?t(l,r):l}function Is(r){var i=Ia(r.attributes);return re(i,function(t){return he(ue,t.type)})}function nn(r){var i,t,e=Is(r),a;try{for(var n=H(e),o=n.next();!o.done;o=n.next()){var s=o.value,l=s.getScale(s.type);if(l&&l.isLinear){var h=T(r.scaleDefs,l.field),u=Ya(l,h,s.type,r.type);if(u!=="cat"){a=l;break}}}}catch(f){i={error:f}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(i)throw i.error}}var c=r.getXScale(),v=r.getYScale();return a||v||c}function Os(r,i){var t=i.field,e=r[t];if(O(e)){var a=e.map(function(n){return i.getText(n)});return a.join("-")}return i.getText(e)}function Rs(r,i){var t,e=i.getGroupScales();if(e.length&&(t=e[0]),t){var a=t.field;return t.getText(r[a])}var n=nn(i);return Ve(n)}function on(r,i,t){if(i.length===0)return null;var e=t.type,a=t.getXScale(),n=t.getYScale(),o=a.field,s=n.field,l=null;if(e==="heatmap"||e==="point"){for(var h=t.coordinate,u=h.invert(r),c=a.invert(u.x),v=n.invert(u.y),f=1/0,p=0;p<i.length;p++){var d=i[p],g=d[W],m=Math.pow(g[o]-c,2)+Math.pow(g[s]-v,2);m<f&&(f=m,l=d)}return l}var w=i[0],x=i[i.length-1],C=Es(r,t),S=w[W][o],L=w[W][s],M=x[W][o],A=n.isLinear&&O(L);if(O(S)){for(var p=0;p<i.length;p++){var B=i[p],g=B[W];if(a.translate(g[o][0])<=C&&a.translate(g[o][1])>=C)if(A)O(l)||(l=[]),l.push(B);else{l=B;break}}O(l)&&(l=Ni(l,r,t))}else{var F=void 0;if(!a.isLinear&&a.type!=="timeCat"){for(var p=0;p<i.length;p++){var B=i[p],g=B[W];if(Xi(g[o],C,a))if(A)O(l)||(l=[]),l.push(B);else{l=B;break}else a.translate(g[o])<=C&&(x=B,F=i[p+1])}O(l)&&(l=Ni(l,r,t))}else{if((C>a.translate(M)||C<a.translate(S))&&(C>a.max||C<a.min))return null;for(var R=0,D=i.length-1,z=void 0;R<=D;){z=Math.floor((R+D)/2);var X=i[z][W][o];if(Xi(X,C,a))return i[z];a.translate(X)<=a.translate(C)?(R=z+1,x=i[z],F=i[z+1]):(D===0&&(x=i[0]),D=z-1)}}x&&F&&Math.abs(a.translate(x[W][o])-C)>Math.abs(a.translate(F[W][o])-C)&&(x=F)}var K=ks(t.getXScale());return!l&&Math.abs(a.translate(x[W][o])-C)<=K/2&&(l=x),l}function sn(r,i,t,e){var a,n;t===void 0&&(t=""),e===void 0&&(e=!1);var o=r[W],s=Ps(o,i,t),l=i.tooltipOption,h=i.theme.defaultColor,u=[],c,v;function f(B,F){if(e||!V(F)&&F!==""){var R={title:s,data:o,mappingData:r,name:B,value:F,color:r.color||h,marker:!0};u.push(R)}}if(yt(l)){var p=l.fields,d=l.callback;if(d){var g=p.map(function(B){return r[W][B]}),m=d.apply(void 0,$([],P(g),!1)),w=y({data:r[W],mappingData:r,title:s,color:r.color||h,marker:!0},m);u.push(w)}else{var x=i.scales;try{for(var C=H(p),S=C.next();!S.done;S=C.next()){var L=S.value;if(!V(o[L])){var M=x[L];c=Ve(M),v=M.getText(o[L]),f(c,v)}}}catch(B){a={error:B}}finally{try{S&&!S.done&&(n=C.return)&&n.call(C)}finally{if(a)throw a.error}}}}else{var A=nn(i);v=Os(o,A),c=Rs(o,i),f(c,v)}return u}function Wi(r,i,t,e){var a,n,o=e.showNil,s=[],l=r.dataArray;if(!It(l)){r.sort(l);try{for(var h=H(l),u=h.next();!u.done;u=h.next()){var c=u.value,v=on(i,c,r);if(v){var f=r.getElementId(v),p=r.elementsMap[f];if(r.type==="heatmap"||p.visible){var d=sn(v,r,t,o);d.length&&s.push(d)}}}}catch(g){a={error:g}}finally{try{u&&!u.done&&(n=h.return)&&n.call(h)}finally{if(a)throw a.error}}}return s}function ji(r,i,t,e){var a=e.showNil,n=[],o=r.container,s=o.getShape(i.x,i.y);if(s&&s.get("visible")&&s.get("origin")){var l=s.get("origin").mappingData,h=sn(l,r,t,a);h.length&&n.push(h)}return n}function Vr(r,i,t){var e,a,n=[],o=r.geometries,s=t.shared,l=t.title,h=t.reversed;try{for(var u=H(o),c=u.next();!c.done;c=u.next()){var v=c.value;if(v.visible&&v.tooltipOption!==!1){var f=v.type,p=void 0;["point","edge","polygon"].includes(f)?p=ji(v,i,l,t):["area","line","path","heatmap"].includes(f)||s!==!1?p=Wi(v,i,l,t):p=ji(v,i,l,t),p.length&&(h&&p.reverse(),n.push(p))}}}catch(d){e={error:d}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(e)throw e.error}}return n}function Ds(r,i,t){var e,a,n=Vr(r,i,t);try{for(var o=H(r.views),s=o.next();!s.done;s=o.next()){var l=s.value;n=n.concat(Vr(l,i,t))}}catch(h){e={error:h}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(e)throw e.error}}return n}function Gs(r){return!ht(r)&&!O(r)}function Kr(r){r===void 0&&(r=0);var i=O(r)?r:[r];switch(i.length){case 0:i=[0,0,0,0];break;case 1:i=new Array(4).fill(i[0]);break;case 2:i=$($([],P(i),!1),P(i),!1);break;case 3:i=$($([],P(i),!1),[i[1]],!1);break;default:i=i.slice(0,4);break}return i}var Qr={};function be(r,i){Qr[r]=i}function Vs(){return Object.keys(Qr)}function zs(r){return Qr[r]}var Hs=function(){function r(i){this.option=this.wrapperOption(i)}return r.prototype.update=function(i){return this.option=this.wrapperOption(i),this},r.prototype.hasAction=function(i){var t=this.option.actions;return cr(t,function(e){return e[0]===i})},r.prototype.create=function(i,t){var e=this.option,a=e.type,n=e.cfg,o=a==="theta",s=y({start:i,end:t},n),l=vo(o?"polar":a);return this.coordinate=new l(s),this.coordinate.type=a,o&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},r.prototype.adjust=function(i,t){return this.coordinate.update({start:i,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},r.prototype.rotate=function(i){return this.option.actions.push(["rotate",i]),this},r.prototype.reflect=function(i){return this.option.actions.push(["reflect",i]),this},r.prototype.scale=function(i,t){return this.option.actions.push(["scale",i,t]),this},r.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},r.prototype.getOption=function(){return this.option},r.prototype.getCoordinate=function(){return this.coordinate},r.prototype.wrapperOption=function(i){return y({type:"rect",actions:[],cfg:{}},i)},r.prototype.execActions=function(i){var t=this,e=this.option.actions;b(e,function(a){var n,o=P(a),s=o[0],l=o.slice(1),h=V(i)?!0:i.includes(s);h&&(n=t.coordinate)[s].apply(n,$([],P(l),!1))})},r}(),lt=function(){function r(i,t,e){this.view=i,this.gEvent=t,this.data=e,this.type=t.type}return r.fromData=function(i,t,e){return new r(i,new fo(t,{}),e)},Object.defineProperty(r.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[Event (type=".concat(this.type,")]")},r.prototype.clone=function(){return new r(this.view,this.gEvent,this.data)},r}();function Ys(r){var i=r.getController("axis"),t=r.getController("legend"),e=r.getController("annotation"),a=r.getController("slider"),n=r.getController("scrollbar");[i,a,n,t,e].forEach(function(o){o&&o.layout()})}var Xs=function(){function r(){this.scales=new Map,this.syncScales=new Map}return r.prototype.createScale=function(i,t,e,a){var n=e,o=this.getScaleMeta(a);if(t.length===0&&o){var s=o.scale,l={type:s.type};s.isCategory&&(l.values=s.values),n=I(l,o.scaleDef,e)}var h=Qo(i,t,n);return this.cacheScale(h,e,a),h},r.prototype.sync=function(i,t){var e=this;this.syncScales.forEach(function(a,n){var o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,l=[];b(a,function(h){var u=e.getScale(h);s=ht(u.max)?Math.max(s,u.max):s,o=ht(u.min)?Math.min(o,u.min):o,b(u.values,function(c){l.includes(c)||l.push(c)})}),b(a,function(h){var u=e.getScale(h);if(u.isContinuous)u.change({min:o,max:s,values:l});else if(u.isCategory){var c=u.range,v=e.getScaleMeta(h);l&&!T(v,["scaleDef","range"])&&(c=Xa(I({},u,{values:l}),i,t)),u.change({values:l,range:c})}})})},r.prototype.cacheScale=function(i,t,e){var a=this.getScaleMeta(e);a&&a.scale.type===i.type?(Jo(a.scale,i),a.scaleDef=t):(a={key:e,scale:i,scaleDef:t},this.scales.set(e,a));var n=this.getSyncKey(a);if(a.syncKey=n,this.removeFromSyncScales(e),n){var o=this.syncScales.get(n);o||(o=[],this.syncScales.set(n,o)),o.push(e)}},r.prototype.getScale=function(i){var t=this.getScaleMeta(i);if(!t){var e=ie(i.split("-")),a=this.syncScales.get(e);a&&a.length&&(t=this.getScaleMeta(a[0]))}return t&&t.scale},r.prototype.deleteScale=function(i){var t=this.getScaleMeta(i);if(t){var e=t.syncKey,a=this.syncScales.get(e);if(a&&a.length){var n=a.indexOf(i);n!==-1&&a.splice(n,1)}}this.scales.delete(i)},r.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},r.prototype.removeFromSyncScales=function(i){var t=this;this.syncScales.forEach(function(e,a){var n=e.indexOf(i);if(n!==-1)return e.splice(n,1),e.length===0&&t.syncScales.delete(a),!1})},r.prototype.getSyncKey=function(i){var t=i.scale,e=i.scaleDef,a=t.field,n=T(e,["sync"]);return n===!0?a:n===!1?void 0:n},r.prototype.getScaleMeta=function(i){return this.scales.get(i)},r}(),ar=function(){function r(i,t,e,a){i===void 0&&(i=0),t===void 0&&(t=0),e===void 0&&(e=0),a===void 0&&(a=0),this.top=i,this.right=t,this.bottom=e,this.left=a}return r.instance=function(i,t,e,a){return i===void 0&&(i=0),t===void 0&&(t=0),e===void 0&&(e=0),a===void 0&&(a=0),new r(i,t,e,a)},r.prototype.max=function(i){var t=P(i,4),e=t[0],a=t[1],n=t[2],o=t[3];return this.top=Math.max(this.top,e),this.right=Math.max(this.right,a),this.bottom=Math.max(this.bottom,n),this.left=Math.max(this.left,o),this},r.prototype.shrink=function(i){var t=P(i,4),e=t[0],a=t[1],n=t[2],o=t[3];return this.top+=e,this.right+=a,this.bottom+=n,this.left+=o,this},r.prototype.inc=function(i,t){var e=i.width,a=i.height;switch(t){case E.TOP:case E.TOP_LEFT:case E.TOP_RIGHT:this.top+=a;break;case E.RIGHT:case E.RIGHT_TOP:case E.RIGHT_BOTTOM:this.right+=e;break;case E.BOTTOM:case E.BOTTOM_LEFT:case E.BOTTOM_RIGHT:this.bottom+=a;break;case E.LEFT:case E.LEFT_TOP:case E.LEFT_BOTTOM:this.left+=e;break}return this},r.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},r.prototype.clone=function(){return new(r.bind.apply(r,$([void 0],P(this.getPadding()),!1)))},r}();function Ns(r){var i=r.padding;if(!Gs(i))return new(ar.bind.apply(ar,$([void 0],P(Kr(i)),!1)));var t=r.viewBBox,e=new ar,a=[],n=[],o=[];return b(r.getComponents(),function(s){var l=s.type;l===it.AXIS?a.push(s):[it.LEGEND,it.SLIDER,it.SCROLLBAR].includes(l)?n.push(s):l!==it.GRID&&l!==it.TOOLTIP&&o.push(s)}),b(a,function(s){var l=s.component,h=l.getLayoutBBox(),u=new ut(h.x,h.y,h.width,h.height),c=u.exceed(t);e.max(c)}),b(n,function(s){var l=s.component,h=s.direction,u=l.getLayoutBBox(),c=l.get("padding"),v=new ut(u.x,u.y,u.width,u.height).expand(c);e.inc(v,h)}),b(o,function(s){var l=s.component,h=s.direction,u=l.getLayoutBBox(),c=new ut(u.x,u.y,u.width,u.height);e.inc(c,h)}),e}function Ws(r,i,t){var e=t.instance();i.forEach(function(a){a.autoPadding=e.max(a.autoPadding.getPadding())})}var ln=function(r){k(i,r);function i(t){var e=r.call(this,{visible:t.visible})||this;e.views=[],e.geometries=[],e.controllers=[],e.interactions={},e.limitInPlot=!1,e.options={data:[],animate:!0},e.usedControllers=Vs(),e.scalePool=new Xs,e.layoutFunc=Ys,e.isPreMouseInPlot=!1,e.isDataChanged=!1,e.isCoordinateChanged=!1,e.createdScaleKeys=new Map,e.onCanvasEvent=function(x){var C=x.name;if(!C.includes(":")){var S=e.createViewEvent(x);e.doPlotEvent(S),e.emit(C,S)}},e.onDelegateEvents=function(x){var C=x.name;if(!!C.includes(":")){var S=e.createViewEvent(x);e.emit(C,S)}};var a=t.id,n=a===void 0?go("view"):a,o=t.parent,s=t.canvas,l=t.backgroundGroup,h=t.middleGroup,u=t.foregroundGroup,c=t.region,v=c===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:c,f=t.padding,p=t.appendPadding,d=t.theme,g=t.options,m=t.limitInPlot,w=t.syncViewPadding;return e.parent=o,e.canvas=s,e.backgroundGroup=l,e.middleGroup=h,e.foregroundGroup=u,e.region=v,e.padding=f,e.appendPadding=p,e.options=y(y({},e.options),g),e.limitInPlot=m,e.id=n,e.syncViewPadding=w,e.themeObject=yt(d)?I({},Lr("default"),hr(d)):Lr(d),e.init(),e}return i.prototype.setLayout=function(t){this.layoutFunc=t},i.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},i.prototype.render=function(t,e){t===void 0&&(t=!1),this.emit(q.BEFORE_RENDER,lt.fromData(this,q.BEFORE_RENDER,e)),this.paint(t),this.emit(q.AFTER_RENDER,lt.fromData(this,q.AFTER_RENDER,e)),this.visible===!1&&this.changeVisible(!1)},i.prototype.clear=function(){var t=this;this.emit(q.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var e=this.geometries,a=0;a<e.length;a++)e[a].clear(),e[a].container.remove(!0),e[a].labelsContainer.remove(!0);this.geometries=[];for(var n=this.controllers,a=0;a<n.length;a++)n[a].name==="annotation"?n[a].clear(!0):n[a].clear();this.createdScaleKeys.forEach(function(s,l){t.getRootView().scalePool.deleteScale(l)}),this.createdScaleKeys.clear();for(var o=this.views,a=0;a<o.length;a++)o[a].clear();this.emit(q.AFTER_CLEAR)},i.prototype.destroy=function(){this.emit(q.BEFORE_DESTROY);var t=this.interactions;b(t,function(s){s&&s.destroy()}),this.clear();for(var e=this.controllers,a=0,n=e.length;a<n;a++){var o=e[a];o.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),r.prototype.destroy.call(this)},i.prototype.changeVisible=function(t){r.prototype.changeVisible.call(this,t);for(var e=this.geometries,a=0,n=e.length;a<n;a++){var o=e[a];o.changeVisible(t)}for(var s=this.controllers,a=0,n=s.length;a<n;a++){var l=s[a];l.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},i.prototype.data=function(t){return tt(this.options,"data",t),this.isDataChanged=!0,this},i.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},i.prototype.filter=function(t,e){return j(e)?(tt(this.options,["filters",t],e),this):(!e&&T(this.options,["filters",t])&&delete this.options.filters[t],this)},i.prototype.axis=function(t,e){return Ie(t)?tt(this.options,["axes"],t):tt(this.options,["axes",t],e),this},i.prototype.legend=function(t,e){return Ie(t)?tt(this.options,["legends"],t):et(t)?(tt(this.options,["legends",t],e),Ee(e)&&(e==null?void 0:e.selected)&&tt(this.options,["filters",t],function(a){var n;return(n=e==null?void 0:e.selected[a])!==null&&n!==void 0?n:!0})):tt(this.options,["legends"],t),this},i.prototype.scale=function(t,e){var a=this;return et(t)?tt(this.options,["scales",t],e):yt(t)&&b(t,function(n,o){tt(a.options,["scales",o],n)}),this},i.prototype.tooltip=function(t){return tt(this.options,"tooltip",t),this},i.prototype.annotation=function(){return this.getController("annotation")},i.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},i.prototype.coordinate=function(t,e){return et(t)?tt(this.options,"coordinate",{type:t,cfg:e}):tt(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},i.prototype.coord=function(t,e){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,e)},i.prototype.facet=function(t,e){this.facetInstance&&this.facetInstance.destroy();var a=rs(t);if(!a)throw new Error("facet '".concat(t,"' is not exist!"));return this.facetInstance=new a(this,y(y({},e),{type:t})),this},i.prototype.animate=function(t){return tt(this.options,"animate",t),this},i.prototype.updateOptions=function(t){return this.clear(),Ye(this.options,t),this.views.forEach(function(e){return e.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},i.prototype.option=function(t,e){if(i.prototype[t])throw new Error(`Can't use built in variable name "`.concat(t,'", please change another one.'));return tt(this.options,t,e),this},i.prototype.theme=function(t){return this.themeObject=yt(t)?I({},this.themeObject,hr(t)):Lr(t),this},i.prototype.interaction=function(t,e){var a=this.interactions[t];a&&a.destroy();var n=Ss(t,this,e);return n&&(n.init(),this.interactions[t]=n),this},i.prototype.removeInteraction=function(t){var e=this.interactions[t];e&&(e.destroy(),this.interactions[t]=void 0)},i.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(q.BEFORE_CHANGE_DATA,lt.fromData(this,q.BEFORE_CHANGE_DATA,null)),this.data(t),this.paint(!0);for(var e=this.views,a=0,n=e.length;a<n;a++){var o=e[a];o.changeData(t)}this.emit(q.AFTER_CHANGE_DATA,lt.fromData(this,q.AFTER_CHANGE_DATA,null))},i.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var e={data:this.options.data,scales:Qt(this.options.scales),axes:Qt(this.options.axes),coordinate:Qt(this.coordinateController.getOption()),tooltip:Qt(this.options.tooltip),legends:Qt(this.options.legends),animate:this.options.animate,visible:this.visible},a=new i(y(y({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:fe.BG}),middleGroup:this.middleGroup.addGroup({zIndex:fe.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:fe.FORE}),theme:this.themeObject,padding:this.padding},t),{options:y(y({},e),T(t,"options",{}))}));return this.views.push(a),a},i.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},i.prototype.removeView=function(t){var e=po(this.views,function(a){return a===t})[0];return e&&e.destroy(),e},i.prototype.getCoordinate=function(){return this.coordinateInstance},i.prototype.getTheme=function(){return this.themeObject},i.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},i.prototype.getYScales=function(){var t={},e=[];return this.geometries.forEach(function(a){var n=a.getYScale(),o=n.field;t[o]||(t[o]=!0,e.push(n))}),e},i.prototype.getScalesByDim=function(t){for(var e=this.geometries,a={},n=0,o=e.length;n<o;n++){var s=e[n],l=t==="x"?s.getXScale():s.getYScale();l&&!a[l.field]&&(a[l.field]=l)}return a},i.prototype.getScale=function(t,e){var a=e||this.getScaleKey(t);return this.getRootView().scalePool.getScale(a)},i.prototype.getScaleByField=function(t,e){return this.getScale(t,e)},i.prototype.getOptions=function(){return this.options},i.prototype.getData=function(){return this.filteredData},i.prototype.getOriginalData=function(){return this.options.data},i.prototype.getPadding=function(){return this.autoPadding.getPadding()},i.prototype.getGeometries=function(){return this.geometries},i.prototype.getElements=function(){return Oa(this.geometries,function(t,e){return t.concat(e.getElements())},[])},i.prototype.getElementsBy=function(t){return this.getElements().filter(function(e){return t(e)})},i.prototype.getLayer=function(t){return t===Q.BG?this.backgroundGroup:t===Q.MID?this.middleGroup:t===Q.FORE?this.foregroundGroup:this.foregroundGroup},i.prototype.isPointInPlot=function(t){return qo(this.getCoordinate(),t)},i.prototype.getLegendAttributes=function(){return Ot(this.geometries.map(function(t){return t.getGroupAttributes()}))},i.prototype.getGroupScales=function(){var t=this.geometries.map(function(e){return e.getGroupScales()});return zt(Ot(t))},i.prototype.getCanvas=function(){return this.getRootView().canvas},i.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},i.prototype.getXY=function(t){var e=this.getCoordinate(),a=this.getScalesByDim("x"),n=this.getScalesByDim("y"),o,s;if(b(t,function(l,h){a[h]&&(o=a[h].scale(l)),n[h]&&(s=n[h].scale(l))}),!V(o)&&!V(s))return e.convert({x:o,y:s})},i.prototype.getController=function(t){return kt(this.controllers,function(e){return e.name===t})},i.prototype.showTooltip=function(t){var e=this.getController("tooltip");return e&&e.showTooltip(t),this},i.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},i.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},i.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},i.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},i.prototype.getTooltipItems=function(t){var e=this.getController("tooltip");return e?e.getTooltipItems(t):[]},i.prototype.getSnapRecords=function(t){for(var e=this.geometries,a=[],n=0,o=e.length;n<o;n++){var s=e[n],l=s.dataArray;s.sort(l);for(var h=void 0,u=0,c=l.length;u<c;u++){var v=l[u];h=on(t,v,s),h&&a.push(h)}}for(var f=this.views,n=0,o=f.length;n<o;n++){var p=f[n],d=p.getSnapRecords(t);a=a.concat(d)}return a},i.prototype.getComponents=function(){for(var t=[],e=this.controllers,a=0,n=e.length;a<n;a++){var o=e[a];t=t.concat(o.getComponents())}return t},i.prototype.filterData=function(t){var e=this.options.filters;return Lt(e)===0?t:re(t,function(a,n){var o=Object.keys(e);return o.every(function(s){var l=e[s];return l(a[s],a,n)})})},i.prototype.filterFieldData=function(t,e){var a=this.options.filters,n=T(a,t);return ce(n)?e:e.filter(function(o,s){return n(o[t],o,s)})},i.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),e=t.start,a=t.end,n=this.coordinateBBox.bl,o=this.coordinateBBox.tr;if(ct(e,n)&&ct(a,o)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(n,o)},i.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(q.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(q.AFTER_PAINT),this.isDataChanged=!1},i.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=T(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var e=this.viewBBox,a=e.x,n=e.y,o=e.width,s=e.height;this.backgroundStyleRectShape.attr({fill:t,x:a,y:n,width:o,height:s})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},i.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=Ns(this).shrink(Kr(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();var e=this.controllers.find(function(l){return l.name==="tooltip"});e.update();for(var a=this.views,n=0,o=a.length;n<o;n++){var s=a[n];s.renderPaddingRecursive(t)}},i.prototype.renderLayoutRecursive=function(t){var e=this.syncViewPadding===!0?Ws:j(this.syncViewPadding)?this.syncViewPadding:void 0;e&&(e(this,this.views,ar),this.views.forEach(function(l){l.coordinateBBox=l.viewBBox.shrink(l.autoPadding.getPadding()),l.adjustCoordinate()})),this.doLayout();for(var a=this.views,n=0,o=a.length;n<o;n++){var s=a[n];s.renderLayoutRecursive(t)}},i.prototype.renderPaintRecursive=function(t){var e=this.middleGroup;if(this.limitInPlot){var a=Ur(this.coordinateInstance),n=a.type,o=a.attrs;e.setClip({type:n,attrs:o})}else e.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var s=this.views,l=0,h=s.length;l<h;l++){var u=s[l];u.renderPaintRecursive(t)}},i.prototype.createScale=function(t,e,a,n){var o=T(this.options.scales,[t]),s=y(y({},o),a);return this.parent?this.parent.createScale(t,e,s,n):this.scalePool.createScale(t,e,s,n)},i.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var e=this.views,a=0,n=e.length;a<n;a++){var o=e[a];o.renderDataRecursive(t)}},i.prototype.calculateViewBBox=function(){var t,e,a,n;if(this.parent){var o=this.parent.coordinateBBox;t=o.x,e=o.y,a=o.width,n=o.height}else t=0,e=0,a=this.canvas.get("width"),n=this.canvas.get("height");var s=this.region,l=s.start,h=s.end,u=new ut(t+a*l.x,e+n*l.y,a*(h.x-l.x),n*(h.y-l.y));(!this.viewBBox||!this.viewBBox.isEqual(u))&&(this.viewBBox=new ut(t+a*l.x,e+n*l.y,a*(h.x-l.x),n*(h.y-l.y))),this.coordinateBBox=this.viewBBox},i.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},i.prototype.initComponentController=function(){for(var t=this.usedControllers,e=0,a=t.length;e<a;e++){var n=t[e],o=zs(n);o&&this.controllers.push(new o(this))}},i.prototype.createViewEvent=function(t){var e=t.shape,a=t.name,n=e?e.get("origin"):null,o=new lt(this,t,n);return o.type=a,o},i.prototype.doPlotEvent=function(t){var e=t.type,a=t.x,n=t.y,o={x:a,y:n},s=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(s.includes(e)){var l=this.isPointInPlot(o),h=t.clone();if(l){var u="plot:".concat(e);h.type=u,this.emit(u,h),(e==="mouseleave"||e==="touchend")&&(this.isPreMouseInPlot=!1)}e==="mousemove"||e==="touchmove"?(this.isPreMouseInPlot&&!l?(e==="mousemove"&&(h.type=vt.MOUSE_LEAVE,this.emit(vt.MOUSE_LEAVE,h)),h.type=vt.LEAVE,this.emit(vt.LEAVE,h)):!this.isPreMouseInPlot&&l&&(e==="mousemove"&&(h.type=vt.MOUSE_ENTER,this.emit(vt.MOUSE_ENTER,h)),h.type=vt.ENTER,this.emit(vt.ENTER,h)),this.isPreMouseInPlot=l):(e==="mouseleave"||e==="touchend")&&this.isPreMouseInPlot&&(e==="mouseleave"&&(h.type=vt.MOUSE_LEAVE,this.emit(vt.MOUSE_LEAVE,h)),h.type=vt.LEAVE,this.emit(vt.LEAVE,h),this.isPreMouseInPlot=!1)}},i.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},i.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var e=this.getCoordinate(),a=T(this.options,"scales",{}),n=this.geometries,o=0,s=n.length;o<s;o++){var l=n[o];l.scales=this.getGeometryScales();var h={coordinate:e,scaleDefs:a,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?l.update(h):l.init(h)}this.adjustScales()},i.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),e=this.getGroupedFields(),a=this.getOptions(),n=a.data,o=a.scales,s=o===void 0?{}:o,l=this.filteredData,h=0,u=t.length;h<u;h++){var c=t[h],v=s[c],f=this.getScaleKey(c);this.createScale(c,e.includes(c)?n:l,v,f),this.createdScaleKeys.set(f,!0)}},i.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},i.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),e={},a=0;a<t.length;a++){var n=t[a];e[n]=this.getScaleByField(n)}return e},i.prototype.getScaleFields=function(){for(var t=[],e=new Map,a=this.geometries,n=0;n<a.length;n++){var o=a[n],s=o.getScaleFields();zt(s,t,e)}return t},i.prototype.getGroupedFields=function(){for(var t=[],e=new Map,a=this.geometries,n=0;n<a.length;n++){var o=a[n],s=o.getGroupFields();zt(s,t,e)}return t},i.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},i.prototype.adjustCategoryScaleRange=function(){var t=this,e=$([this.getXScale()],P(this.getYScales()),!1).filter(function(o){return!!o}),a=this.getCoordinate(),n=this.options.scales;b(e,function(o){var s=o.field,l=o.values,h=o.isCategory,u=o.isIdentity;(h||u)&&l&&!T(n,[s,"range"])&&(o.range=Xa(o,a,t.theme))})},i.prototype.initComponents=function(t){for(var e=this.controllers,a=0;a<e.length;a++){var n=e[a];t?n.update():(n.clear(),n.render())}},i.prototype.doLayout=function(){this.layoutFunc(this)},i.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,e=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,e)},i.prototype.paintGeometries=function(t){for(var e=this.options.animate,a=this.getCoordinate(),n={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},o=this.geometries,s=0;s<o.length;s++){var l=o[s];l.coordinate=a,l.canvasRegion=n,e||l.animate(!1),l.paint(t)}},i.prototype.renderComponents=function(t){for(var e=this.getComponents(),a=0;a<e.length;a++){var n=e[a];n.component.render()}},i.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},i.prototype.initOptions=function(){var t=this,e=this.options,a=e.geometries,n=a===void 0?[]:a,o=e.interactions,s=o===void 0?[]:o,l=e.views,h=l===void 0?[]:l,u=e.annotations,c=u===void 0?[]:u,v=e.coordinate,f=e.events,p=e.facets;this.coordinateController?v&&this.coordinateController.update(v):this.coordinateController=new Hs(v);for(var d=0;d<n.length;d++){var g=n[d];this.createGeometry(g)}for(var m=0;m<s.length;m++){var w=s[m],x=w.type,C=w.cfg;this.interaction(x,C)}for(var S=0;S<h.length;S++){var L=h[S];this.createView(L)}for(var M=this.getController("annotation"),A=0;A<c.length;A++){var B=c[A];M.annotation(B)}f&&b(f,function(F,R){t.on(R,F)}),p&&b(p,function(F){var R=F.type,D=ft(F,["type"]);t.facet(R,D)})},i.prototype.createGeometry=function(t){var e=t.type,a=t.cfg,n=a===void 0?{}:a;if(this[e]){var o=this[e](n);b(t,function(s,l){j(o[l])&&o[l](s)})}},i.prototype.getScaleKey=function(t){return"".concat(this.id,"-").concat(t)},i}(jr);function At(r,i){ln.prototype[r.toLowerCase()]=function(t){t===void 0&&(t={});var e=y({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),a=new i(e);return this.geometries.push(a),a}}var js=function(r){k(i,r);function i(t){var e=this,a=t.container,n=t.width,o=t.height,s=t.autoFit,l=s===void 0?!1:s,h=t.padding,u=t.appendPadding,c=t.renderer,v=c===void 0?"canvas":c,f=t.pixelRatio,p=t.localRefresh,d=p===void 0?!0:p,g=t.visible,m=g===void 0?!0:g,w=t.supportCSSTransform,x=w===void 0?!1:w,C=t.defaultInteractions,S=C===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text","axis-description"]:C,L=t.options,M=t.limitInPlot,A=t.theme,B=t.syncViewPadding,F=et(a)?document.getElementById(a):a,R=mo('<div style="position:relative;"></div>');F.appendChild(R);var D=Ei(F,l,n,o),z=Oo(v),X=new z.Canvas(y({container:R,pixelRatio:f,localRefresh:d,supportCSSTransform:x},D));return e=r.call(this,{parent:null,canvas:X,backgroundGroup:X.addGroup({zIndex:fe.BG}),middleGroup:X.addGroup({zIndex:fe.MID}),foregroundGroup:X.addGroup({zIndex:fe.FORE}),padding:h,appendPadding:u,visible:m,options:L,limitInPlot:M,theme:A,syncViewPadding:B})||this,e.onResize=ka(function(){e.forceFit()},300),e.ele=F,e.canvas=X,e.width=D.width,e.height=D.height,e.autoFit=l,e.localRefresh=d,e.renderer=v,e.wrapperElement=R,e.updateCanvasStyle(),e.bindAutoFit(),e.initDefaultInteractions(S),e}return i.prototype.initDefaultInteractions=function(t){var e=this;b(t,function(a){e.interaction(a)})},i.prototype.aria=function(t){var e="aria-label";t===!1?this.ele.removeAttribute(e):this.ele.setAttribute(e,t.label)},i.prototype.changeSize=function(t,e){return this.width===t&&this.height===e?this:(this.emit(q.BEFORE_CHANGE_SIZE),this.width=t,this.height=e,this.canvas.changeSize(t,e),this.render(!0),this.emit(q.AFTER_CHANGE_SIZE),this)},i.prototype.clear=function(){r.prototype.clear.call(this),this.aria(!1)},i.prototype.destroy=function(){r.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),Do(this.wrapperElement),this.wrapperElement=null},i.prototype.changeVisible=function(t){return r.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},i.prototype.forceFit=function(){if(!this.destroyed){var t=Ei(this.ele,!0,this.width,this.height),e=t.width,a=t.height;this.changeSize(e,a)}},i.prototype.updateCanvasStyle=function(){yo(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},i.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},i.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},i}(ln);const ru=js;var Te=function(){function r(i){this.visible=!0,this.components=[],this.view=i}return r.prototype.clear=function(i){b(this.components,function(t){t.component.destroy()}),this.components=[]},r.prototype.destroy=function(){this.clear()},r.prototype.getComponents=function(){return this.components},r.prototype.changeVisible=function(i){this.visible!==i&&(this.components.forEach(function(t){i?t.component.show():t.component.hide()}),this.visible=i)},r}();function Us(r){for(var i=[],t=function(a){var n=r[a],o=kt(i,function(s){return s.color===n.color&&s.name===n.name&&s.value===n.value&&s.title===n.title});o||i.push(n)},e=0;e<r.length;e++)t(e);return i}var qs=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(i.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),i.prototype.init=function(){},i.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},i.prototype.render=function(){},i.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var e=this.view,a=this.getTooltipItems(t);if(!a.length){this.hideTooltip();return}var n=this.getTitle(a),o={x:a[0].x,y:a[0].y};e.emit("tooltip:show",lt.fromData(e,"tooltip:show",y({items:a,title:n},t)));var s=this.getTooltipCfg(),l=s.follow,h=s.showMarkers,u=s.showCrosshairs,c=s.showContent,v=s.marker,f=this.items,p=this.title;if(!ct(p,n)||!ct(f,a)?(e.emit("tooltip:change",lt.fromData(e,"tooltip:change",y({items:a,title:n},t))),(j(c)?c(a):c)&&(this.tooltip||this.renderTooltip(),this.tooltip.update(Ye({},s,{items:this.getItemsAfterProcess(a),title:n},l?t:{})),this.tooltip.show()),h&&this.renderTooltipMarkers(a,v)):(this.tooltip&&l&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=a,this.title=n,u){var d=T(s,["crosshairs","follow"],!1);this.renderCrosshairs(d?t:o,s)}}},i.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var e=this.tooltipMarkersGroup;e&&e.hide();var a=this.xCrosshair,n=this.yCrosshair;a&&a.hide(),n&&n.hide();var o=this.tooltip;o&&o.hide(),this.view.emit("tooltip:hide",lt.fromData(this.view,"tooltip:hide",{})),this.point=null},i.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},i.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},i.prototype.isTooltipLocked=function(){return this.isLocked},i.prototype.clear=function(){var t=this,e=t.tooltip,a=t.xCrosshair,n=t.yCrosshair,o=t.tooltipMarkersGroup;e&&(e.hide(),e.clear()),a&&a.clear(),n&&n.clear(),o&&o.clear(),e!=null&&e.get("customContent")&&(this.tooltip.destroy(),this.tooltip=null),this.title=null,this.items=null},i.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},i.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},i.prototype.changeVisible=function(t){if(this.visible!==t){var e=this,a=e.tooltip,n=e.tooltipMarkersGroup,o=e.xCrosshair,s=e.yCrosshair;t?(a&&a.show(),n&&n.show(),o&&o.show(),s&&s.show()):(a&&a.hide(),n&&n.hide(),o&&o.hide(),s&&s.hide()),this.visible=t}},i.prototype.getTooltipItems=function(t){var e,a,n,o,s,l,h=this.findItemsFromView(this.view,t);if(h.length){h=Ot(h);try{for(var u=H(h),c=u.next();!c.done;c=u.next()){var v=c.value;try{for(var f=(n=void 0,H(v)),p=f.next();!p.done;p=f.next()){var d=p.value,g=d.mappingData,m=g.x,w=g.y;d.x=O(m)?m[m.length-1]:m,d.y=O(w)?w[w.length-1]:w}}catch(F){n={error:F}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}}catch(F){e={error:F}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(e)throw e.error}}var x=this.getTooltipCfg().shared;if(x===!1&&h.length>1){var C=h[0],S=Math.abs(t.y-C[0].y);try{for(var L=H(h),M=L.next();!M.done;M=L.next()){var A=M.value,B=Math.abs(t.y-A[0].y);B<=S&&(C=A,S=B)}}catch(F){s={error:F}}finally{try{M&&!M.done&&(l=L.return)&&l.call(L)}finally{if(s)throw s.error}}h=[C]}return Us(Ot(h))}return[]},i.prototype.layout=function(){},i.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},i.prototype.isCursorEntered=function(t){if(this.tooltip){var e=this.tooltip.getContainer(),a=this.tooltip.get("capture");if(e&&a){var n=e.getBoundingClientRect(),o=n.x,s=n.y,l=n.width,h=n.height;return new ut(o,s,l,h).isPointIn(t)}}return!1},i.prototype.getTooltipCfg=function(){var t=this.view,e=t.getOptions().tooltip,a=this.processCustomContent(e),n=t.getTheme(),o=T(n,["components","tooltip"],{}),s=T(a,"enterable",o.enterable);return I({},o,a,{capture:!!(s||this.isLocked)})},i.prototype.processCustomContent=function(t){if(Ie(t)||!T(t,"customContent"))return t;var e=t.customContent,a=function(n,o){var s=e(n,o)||"";return et(s)?'<div class="g2-tooltip">'+s+"</div>":s};return y(y({},t),{customContent:a})},i.prototype.getTitle=function(t){var e=t[0].title||t[0].name;return this.title=e,e},i.prototype.renderTooltip=function(){var t=this.view.getCanvas(),e={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},a=this.getTooltipCfg(),n=new fr(y(y({parent:t.get("el").parentNode,region:e},a),{visible:!1,crosshairs:null}));n.init(),this.tooltip=n},i.prototype.renderTooltipMarkers=function(t,e){var a,n,o=this.getTooltipMarkersGroup(),s=this.view.getRootView(),l=s.limitInPlot;try{for(var h=H(t),u=h.next();!u.done;u=h.next()){var c=u.value,v=c.x,f=c.y;if(l||(o==null?void 0:o.getClip())){var p=Ur(s.getCoordinate()),d=p.type,g=p.attrs;o==null||o.setClip({type:d,attrs:g})}else o==null||o.setClip(void 0);var m=this.view.getTheme(),w=T(m,["components","tooltip","marker"],{}),x=y(y({fill:c.color,symbol:"circle",shadowColor:c.color},j(e)?y(y({},w),e(c)):e),{x:v,y:f});o.addShape("marker",{attrs:x})}}catch(C){a={error:C}}finally{try{u&&!u.done&&(n=h.return)&&n.call(h)}finally{if(a)throw a.error}}},i.prototype.renderCrosshairs=function(t,e){var a=T(e,["crosshairs","type"],"x");a==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,e)):a==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,e)):a==="xy"&&(this.renderXCrosshairs(t,e),this.renderYCrosshairs(t,e))},i.prototype.renderXCrosshairs=function(t,e){var a=this.getViewWithGeometry(this.view).getCoordinate(),n,o;if(a.isRect)a.isTransposed?(n={x:a.start.x,y:t.y},o={x:a.end.x,y:t.y}):(n={x:t.x,y:a.end.y},o={x:t.x,y:a.start.y});else{var s=de(a,t),l=a.getCenter(),h=a.getRadius();o=_(l.x,l.y,h,s),n=l}var u=I({start:n,end:o,container:this.getTooltipCrosshairsGroup()},T(e,"crosshairs",{}),this.getCrosshairsText("x",t,e));delete u.type;var c=this.xCrosshair;c?c.update(u):(c=new xo(u),c.init()),c.render(),c.show(),this.xCrosshair=c},i.prototype.renderYCrosshairs=function(t,e){var a=this.getViewWithGeometry(this.view).getCoordinate(),n,o;if(a.isRect){var s=void 0,l=void 0;a.isTransposed?(s={x:t.x,y:a.end.y},l={x:t.x,y:a.start.y}):(s={x:a.start.x,y:t.y},l={x:a.end.x,y:t.y}),n={start:s,end:l},o="Line"}else n={center:a.getCenter(),radius:pr(a,t),startAngle:a.startAngle,endAngle:a.endAngle},o="Circle";n=I({container:this.getTooltipCrosshairsGroup()},n,T(e,"crosshairs",{}),this.getCrosshairsText("y",t,e)),delete n.type;var h=this.yCrosshair;h?a.isRect&&h.get("type")==="circle"||!a.isRect&&h.get("type")==="line"?(h=new Li[o](n),h.init()):h.update(n):(h=new Li[o](n),h.init()),h.render(),h.show(),this.yCrosshair=h},i.prototype.getCrosshairsText=function(t,e,a){var n=T(a,["crosshairs","text"]),o=T(a,["crosshairs","follow"]),s=this.items;if(n){var l=this.getViewWithGeometry(this.view),h=s[0],u=l.getXScale(),c=l.getYScales()[0],v=void 0,f=void 0;if(o){var p=this.view.getCoordinate().invert(e);v=u.invert(p.x),f=c.invert(p.y)}else v=h.data[u.field],f=h.data[c.field];var d=t==="x"?v:f;return j(n)?n=n(t,d,s,e):n.content=d,{text:n}}},i.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},i.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},i.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},i.prototype.findItemsFromView=function(t,e){var a,n;if(t.getOptions().tooltip===!1)return[];var o=this.getTooltipCfg(),s=Vr(t,e,o);try{for(var l=H(t.views),h=l.next();!h.done;h=l.next()){var u=h.value;s=s.concat(this.findItemsFromView(u,e))}}catch(c){a={error:c}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(a)throw a.error}}return s},i.prototype.getViewWithGeometry=function(t){var e=this;return t.geometries.length?t:kt(t.views,function(a){return e.getViewWithGeometry(a)})},i.prototype.getItemsAfterProcess=function(t){var e=this.getTooltipCfg().customItems,a=e||function(n){return n};return a(t)},i}(Te),hn={};function cn(r){return hn[r.toLowerCase()]}function mt(r,i){hn[r.toLowerCase()]=i}var me={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},Zs={interval:function(r){return{enter:{animation:r.isRect?r.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:r.isPolar&&r.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},Ui={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(r){var i;return r.isRect?i=r.isTransposed?"grow-in-x":"grow-in-y":(i="grow-in-xy",r.isPolar&&r.isTransposed&&(i="wave-in")),{animation:i}},schema:function(r){var i;return r.isRect?i=r.isTransposed?"grow-in-x":"grow-in-y":i="grow-in-xy",{animation:i}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function $s(r,i){return{delay:j(r.delay)?r.delay(i):r.delay,easing:j(r.easing)?r.easing(i):r.easing,duration:j(r.duration)?r.duration(i):r.duration,callback:r.callback,repeat:r.repeat}}function un(r,i,t){var e=Zs[r];return e&&(j(e)&&(e=e(i)),e=I({},me,e),t)?e[t]:e}function pe(r,i,t){var e=T(r.get("origin"),"data",W),a=i.animation,n=$s(i,e);if(a){var o=cn(a);o&&o(r,n,t)}else r.animate(t.toAttrs,n)}function Ks(r,i,t,e,a){if(Ui[t]){var n=Ui[t](e),o=cn(T(n,"animation",""));if(o){var s=y(y(y({},me.appear),n),i);r.stopAnimate(),o(r,s,{coordinate:e,minYPoint:a,toAttrs:null})}}}var Jr="element-background",vn=function(r){k(i,r);function i(t){var e=r.call(this,t)||this;e.labelShape=[],e.states=[];var a=t.shapeFactory,n=t.container,o=t.offscreenGroup,s=t.elementIndex,l=t.visible,h=l===void 0?!0:l;return e.shapeFactory=a,e.container=n,e.offscreenGroup=o,e.visible=h,e.elementIndex=s,e}return i.prototype.draw=function(t,e){e===void 0&&(e=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,e),this.visible===!1&&this.changeVisible(!1)},i.prototype.update=function(t){var e=this,a=e.shapeFactory,n=e.shape;if(!!n){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(n,t);var o=this.getOffscreenGroup(),s=a.drawShape(this.shapeType,t,o);s.cfg.data=this.data,s.cfg.origin=t,s.cfg.element=this,this.syncShapeStyle(n,s,this.getStates(),this.getAnimateCfg("update"))}},i.prototype.destroy=function(){var t=this,e=t.shapeFactory,a=t.shape;if(a){var n=this.getAnimateCfg("leave");n?pe(a,n,{coordinate:e.coordinate,toAttrs:y({},a.attr())}):a.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=[],this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,r.prototype.destroy.call(this)},i.prototype.changeVisible=function(t){r.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(e){e.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(e){e.hide()}))},i.prototype.setState=function(t,e){var a=this,n=a.states,o=a.shapeFactory,s=a.model,l=a.shape,h=a.shapeType,u=n.indexOf(t);if(e){if(u>-1)return;n.push(t),(t==="active"||t==="selected")&&(l==null||l.toFront())}else{if(u===-1)return;if(n.splice(u,1),t==="active"||t==="selected"){var c=this.geometry,v=c.sortZIndex,f=c.zIndexReversed,p=f?this.geometry.elements.length-this.elementIndex:this.elementIndex;v?l.setZIndex(p):l.set("zIndex",p)}}var d=o.drawShape(h,s,this.getOffscreenGroup());n.length?this.syncShapeStyle(l,d,n,null):this.syncShapeStyle(l,d,["reset"],null),d.remove(!0);var g={state:t,stateStatus:e,element:this,target:this.container};this.container.emit("statechange",g),wo(this.shape,"statechange",g)},i.prototype.clearStates=function(){var t=this,e=this.states;b(e,function(a){t.setState(a,!1)}),this.states=[]},i.prototype.hasState=function(t){return this.states.includes(t)},i.prototype.getStates=function(){return this.states},i.prototype.getData=function(){return this.data},i.prototype.getModel=function(){return this.model},i.prototype.getBBox=function(){var t=this,e=t.shape,a=t.labelShape,n={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return e&&(n=e.getCanvasBBox()),a&&a.forEach(function(o){var s=o.getCanvasBBox();n.x=Math.min(s.x,n.x),n.y=Math.min(s.y,n.y),n.minX=Math.min(s.minX,n.minX),n.minY=Math.min(s.minY,n.minY),n.maxX=Math.max(s.maxX,n.maxX),n.maxY=Math.max(s.maxY,n.maxY)}),n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n},i.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,e=t.shapeType,a=t.geometry,n=t.shapeFactory,o=a.stateOption,s=n.defaultShapeType,l=n.theme[e]||n.theme[s];this.statesStyle=I({},l,o)}return this.statesStyle},i.prototype.getStateStyle=function(t,e){var a=this.getStatesStyle(),n=T(a,[t,"style"],{}),o=n[e]||n;return j(o)?o(this):o},i.prototype.getAnimateCfg=function(t){var e=this,a=this.animate;if(a){var n=a[t];return n&&y(y({},n),{callback:function(){var o;j(n.callback)&&n.callback(),(o=e.geometry)===null||o===void 0||o.emit(Yt.AFTER_DRAW_ANIMATE)}})}return null},i.prototype.drawShape=function(t,e){var a;e===void 0&&(e=!1);var n=this,o=n.shapeFactory,s=n.container,l=n.shapeType;if(this.shape=o.drawShape(l,t,s),this.shape){this.setShapeInfo(this.shape,t);var h=this.shape.cfg.name;h?et(h)&&(this.shape.cfg.name=["element",h]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var u=e?"enter":"appear",c=this.getAnimateCfg(u);c&&((a=this.geometry)===null||a===void 0||a.emit(Yt.BEFORE_DRAW_ANIMATE),pe(this.shape,c,{coordinate:o.coordinate,toAttrs:y({},this.shape.attr())}))}},i.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},i.prototype.setShapeInfo=function(t,e){var a=this;if(t.cfg.origin=e,t.cfg.element=this,t.isGroup()){var n=t.get("children");n.forEach(function(o){a.setShapeInfo(o,e)})}},i.prototype.syncShapeStyle=function(t,e,a,n,o){var s=this,l;if(a===void 0&&(a=[]),o===void 0&&(o=0),!(!t||!e)){var h=t.get("clipShape"),u=e.get("clipShape");if(this.syncShapeStyle(h,u,a,n),t.isGroup())for(var c=t.get("children"),v=e.get("children"),f=0;f<c.length;f++)this.syncShapeStyle(c[f],v[f],a,n,o+f);else{if(!It(a)&&!ct(a,["reset"])){var p=t.get("name");O(p)&&(p=p[1]),b(a,function(g){if(e.get("name")!==Jr){var m=s.getStateStyle(g,p||o);e.attr(m)}})}var d=Ha(t,e);this.animate?n?((l=this.geometry)===null||l===void 0||l.emit(Yt.BEFORE_DRAW_ANIMATE),pe(t,n,{coordinate:this.shapeFactory.coordinate,toAttrs:d,shapeModel:this.model})):It(a)?t.attr(d):(t.stopAnimate(),t.animate(d,{duration:300})):t.attr(d)}}},i.prototype.getShapeType=function(t){var e=T(t,"shape");return O(e)?e[0]:e},i}(jr),fn={},pn={};function Qs(r){return fn[r.toLowerCase()]}function dr(r,i){fn[r.toLowerCase()]=i}function Js(r){return pn[r.toLowerCase()]}function dt(r,i){pn[r.toLowerCase()]=i}var _s={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(r,i){var t=this.getShape(r);return t.getPoints?t.getPoints(i):this.getDefaultPoints(i)},getShape:function(r){var i=this[r]||this[this.defaultShapeType];return i.coordinate=this.coordinate,i},getDefaultPoints:function(){return[]},getDefaultStyle:function(r){return T(r,[this.defaultShapeType,"default","style"],{})},getMarker:function(r,i){var t=this.getShape(r);if(!t.getMarker){var e=this.defaultShapeType;t=this.getShape(e)}var a=this.theme,n=T(a,[r,"default"],{}),o=t.getMarker(i);return I({},n,o)},drawShape:function(r,i,t){var e=this.getShape(r);return e.draw(i,t)}},tl={coordinate:null,parsePath:function(r){var i=this.coordinate,t=Co(r);return i.isPolar?t=us(i,t):t=cs(i,t),t},parsePoint:function(r){var i=this.coordinate;return i.convert(r)},parsePoints:function(r){var i=this.coordinate;return r.map(function(t){return i.convert(t)})},draw:function(r,i){}},_r={};function jt(r,i){var t=ur(r),e=y(y(y({},_s),i),{geometryType:r});return _r[t]=e,e}function U(r,i,t){var e=ur(r),a=_r[e],n=y(y({},tl),t);return a[i]=n,n}function qi(r){var i=ur(r);return _r[i]}function el(r,i,t){var e,a;if(t===void 0&&(t={}),!i)return[r];var n=So(r,i),o=[];if(i.length===1&&t[i[0]]){var s=t[i[0]];try{for(var l=H(s),h=l.next();!h.done;h=l.next()){var u=h.value,c=n["_".concat(u)];c&&o.push(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(e)throw e.error}}}else for(var v in n)if(n.hasOwnProperty(v)){var f=n[v];o.push(f)}return o}function dn(r,i){return cr(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!ct(r[t],i[t])})}function Ae(r){return O(r)?r:r.split("*")}function gn(r,i){for(var t=[],e=[],a=[],n=new Map,o=0;o<i.length;o++){var s=i[o];r[s]?e.push(s):t.push(s),n.set(s,!0)}return Object.keys(r).forEach(function(l){n.has(l)||a.push(l)}),{added:t,updated:e,removed:a}}var Ut=function(r){k(i,r);function i(t){var e=r.call(this,t)||this;e.type="base",e.attributes={},e.elements=[],e.elementsMap={},e.animateOption=!0,e.attributeOption={},e.lastElementsMap={},e.generatePoints=!1,e.beforeMappingData=null,e.adjusts={},e.idFields=[],e.hasSorted=!1,e.isCoordinateChanged=!1;var a=t.container,n=t.labelsContainer,o=t.coordinate,s=t.data,l=t.sortable,h=l===void 0?!1:l,u=t.visible,c=u===void 0?!0:u,v=t.theme,f=t.scales,p=f===void 0?{}:f,d=t.scaleDefs,g=d===void 0?{}:d,m=t.intervalPadding,w=t.dodgePadding,x=t.maxColumnWidth,C=t.minColumnWidth,S=t.columnWidthRatio,L=t.roseWidthRatio,M=t.multiplePieWidthRatio,A=t.zIndexReversed,B=t.sortZIndex,F=t.useDeferredLabel;return e.container=a,e.labelsContainer=n,e.coordinate=o,e.data=s,e.sortable=h,e.visible=c,e.userTheme=v,e.scales=p,e.scaleDefs=g,e.intervalPadding=m,e.dodgePadding=w,e.maxColumnWidth=x,e.minColumnWidth=C,e.columnWidthRatio=S,e.roseWidthRatio=L,e.multiplePieWidthRatio=M,e.zIndexReversed=A,e.sortZIndex=B,e.useDeferredLabel=F?typeof F=="number"?F:1/0:null,e}return i.prototype.position=function(t){var e=t;Ee(t)||(e={fields:Ae(t)});var a=T(e,"fields");return a.length===1&&(a.unshift("1"),tt(e,"fields",a)),tt(this.attributeOption,"position",e),this},i.prototype.color=function(t,e){return this.createAttrOption("color",t,e),this},i.prototype.shape=function(t,e){return this.createAttrOption("shape",t,e),this},i.prototype.size=function(t,e){return this.createAttrOption("size",t,e),this},i.prototype.adjust=function(t){var e=t;return(et(t)||Ee(t))&&(e=[t]),b(e,function(a,n){yt(a)||(e[n]={type:a})}),this.adjustOption=e,this},i.prototype.style=function(t,e){if(et(t)){var a=Ae(t);this.styleOption={fields:a,callback:e}}else{var n=t,a=n.fields,o=n.callback,s=n.cfg;a||o||s?this.styleOption=t:this.styleOption={cfg:t}}return this},i.prototype.tooltip=function(t,e){if(et(t)){var a=Ae(t);this.tooltipOption={fields:a,callback:e}}else this.tooltipOption=t;return this},i.prototype.animate=function(t){return this.animateOption=t,this},i.prototype.label=function(t,e,a){if(et(t)){var n={},o=Ae(t);n.fields=o,j(e)?n.callback=e:Ee(e)&&(n.cfg=e),a&&(n.cfg=a),this.labelOption=n}else this.labelOption=t;return this},i.prototype.state=function(t){return this.stateOption=t,this},i.prototype.customInfo=function(t){return this.customOption=t,this},i.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},i.prototype.update=function(t){t===void 0&&(t={});var e=t.data,a=t.isDataChanged,n=t.isCoordinateChanged,o=this,s=o.attributeOption,l=o.lastAttributeOption;ct(s,l)?e&&(a||!ct(e,this.data))?(this.setCfg(t),this.initAttributes(),this.processData(e)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=n},i.prototype.paint=function(t){var e=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=I({},un(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elementsMap={},this.elements=[];var a=this.getOffscreenGroup();a.clear();var n=this.beforeMappingData,o=this.beforeMapping(n);this.dataArray=new Array(o.length);for(var s=0;s<o.length;s++){var l=o[s];this.dataArray[s]=this.mapping(l)}if(this.updateElements(this.dataArray,t),this.lastElementsMap=this.elementsMap,this.canDoGroupAnimation(t)){var h=this.container,u=this.type,c=this.coordinate,v=T(this.animateOption,"appear"),f=this.getYScale(),p=c.convert({x:0,y:f.scale(this.getYMinValue())});Ks(h,v,u,c,p)}if(this.labelOption){var d=this.useDeferredLabel,g=function(){return e.renderLabels(Ot(e.dataArray),t)}.bind(this);if(typeof d=="number"){var m=typeof d=="number"&&d!==1/0?d:0;if(!window.requestIdleCallback)setTimeout(g,m);else{var w=m&&m!==1/0?{timeout:m}:void 0;window.requestIdleCallback(g,w)}}else g()}this.lastAttributeOption=y({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},i.prototype.clear=function(){var t=this,e=t.container,a=t.geometryLabel,n=t.offscreenGroup;e&&e.clear(),a&&a.clear(),n&&n.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},i.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,r.prototype.destroy.call(this)},i.prototype.getGroupScales=function(){return this.groupScales},i.prototype.getAttribute=function(t){return this.attributes[t]},i.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},i.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},i.prototype.getGroupAttributes=function(){var t=[];return b(this.attributes,function(e){ue.includes(e.type)&&t.push(e)}),t},i.prototype.getDefaultValue=function(t){var e,a=this.getAttribute(t);return a&&It(a.scales)&&(e=a.values[0]),e},i.prototype.getAttributeValues=function(t,e){for(var a=[],n=t.scales,o=0,s=n.length;o<s;o++){var l=n[o],h=l.field;l.isIdentity?a.push(l.values):a.push(e[h])}return t.mapping.apply(t,$([],P(a),!1))},i.prototype.getAdjust=function(t){return this.adjusts[t]},i.prototype.getCoordinate=function(){return this.coordinate},i.prototype.getData=function(){return this.data},i.prototype.getShapeMarker=function(t,e){var a=this.getShapeFactory();return a.getMarker(t,e)},i.prototype.getElementsBy=function(t){return this.elements.filter(function(e){return t(e)})},i.prototype.getElements=function(){return this.elements},i.prototype.getElementId=function(t){t=O(t)?t[0]:t;var e=t[W];if(this.idFields.length){for(var a=e[this.idFields[0]],n=1;n<this.idFields.length;n++)a+="-"+e[this.idFields[n]];return a}var o=this.type,s=this.getXScale(),l=this.getYScale(),h=s.field||"x",u=l.field||"y",c=e[u],v;s.type==="identity"?v=s.values[0]:v=e[h];var f;o==="interval"||o==="schema"?f="".concat(v):o==="line"||o==="area"||o==="path"?f=o:f="".concat(v,"-").concat(c);for(var p=this.groupScales,n=0,d=p.length;n<d;n++){var g=p[n],m=g.field;f="".concat(f,"-").concat(e[m])}var w=this.getAdjust("dodge");if(w){var x=w.dodgeBy;x&&(f="".concat(f,"-").concat(e[x]))}return this.getAdjust("jitter")&&(f="".concat(f,"-").concat(t.x,"-").concat(t.y)),f},i.prototype.getScaleFields=function(){var t=[],e=new Map,a=this,n=a.attributeOption,o=a.labelOption,s=a.tooltipOption;for(var l in n)if(n.hasOwnProperty(l)){var h=n[l];h.fields?zt(h.fields,t,e):h.values&&zt(h.values,t,e)}return o&&o.fields&&zt(o.fields,t,e),yt(s)&&s.fields&&zt(s.fields,t,e),t},i.prototype.changeVisible=function(t){r.prototype.changeVisible.call(this,t);for(var e=this.elements,a=0,n=e.length;a<n;a++){var o=e[a];o.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},i.prototype.getFields=function(){var t=new Map,e=[];return Object.values(this.attributeOption).forEach(function(a){var n=(a==null?void 0:a.fields)||[];n.forEach(function(o){t.has(o)||e.push(o),t.set(o,!0)})},[]),e},i.prototype.getGroupFields=function(){for(var t=[],e=new Map,a=0,n=ue.length;a<n;a++){var o=ue[a],s=this.attributeOption[o];s&&s.fields&&zt(s.fields,t,e)}return t},i.prototype.getXYFields=function(){var t=P(this.attributeOption.position.fields,2),e=t[0],a=t[1];return[e,a]},i.prototype.getXField=function(){return T(this.getXYFields(),[0])},i.prototype.getYField=function(){return T(this.getXYFields(),[1])},i.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},i.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},i.prototype.sort=function(t){if(!this.hasSorted)for(var e=this.getXScale(),a=e.field,n=0;n<t.length;n++){var o=t[n];o.sort(function(s,l){return e.translate(s[W][a])-e.translate(l[W][a])})}this.hasSorted=!0},i.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},i.prototype.getShapeFactory=function(){var t=this.shapeType;if(!!qi(t))return this.shapeFactory||(this.shapeFactory=Qt(qi(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},i.prototype.createShapePointsCfg=function(t){var e=this.getXScale(),a=this.getYScale(),n=this.normalizeValues(t[e.field],e),o;return a?o=this.normalizeValues(t[a.field],a):o=t.y?t.y:.1,{x:n,y:o,y0:a?a.scale(this.getYMinValue()):void 0}},i.prototype.createElement=function(t,e,a){a===void 0&&(a=!1);var n=this.container,o=this.getDrawCfg(t),s=this.getShapeFactory(),l=new vn({shapeFactory:s,container:n,offscreenGroup:this.getOffscreenGroup(),elementIndex:e});return l.animate=this.animateOption,l.geometry=this,l.draw(o,a),l},i.prototype.getDrawCfg=function(t){var e=t[W],a={mappingData:t,data:e,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},n=t.shape;!n&&this.getShapeFactory()&&(n=this.getShapeFactory().defaultShapeType),a.shape=n;var o=this.theme.geometries[this.shapeType];a.defaultStyle=T(o,[n,"default"],{}).style,!a.defaultStyle&&this.getShapeFactory()&&(a.defaultStyle=this.getShapeFactory().getDefaultStyle(o));var s=this.styleOption;return s&&(a.style=this.getStyleCfg(s,e)),this.generatePoints&&(a.points=t.points,a.nextPoints=t.nextPoints),a},i.prototype.updateElements=function(t,e){var a,n,o,s,l,h;e===void 0&&(e=!1);for(var u=new Map,c=[],v=new Map,f=0,p=0;p<t.length;p++)for(var d=t[p],g=0;g<d.length;g++){var m=d[g],w=this.getElementId(m),x=u.has(w)?"".concat(w,"-").concat(p,"-").concat(g):w;c.push(x),u.set(x,m),v.set(x,f),f++}this.elements=new Array(f);var C=gn(this.lastElementsMap,c),S=C.added,L=C.updated,M=C.removed;try{for(var A=H(S),B=A.next();!B.done;B=A.next()){var w=B.value,m=u.get(w),p=v.get(w),F=this.createElement(m,p,e);this.elements[p]=F,this.elementsMap[w]=F,F.shape&&F.shape.set("zIndex",this.zIndexReversed?this.elements.length-p:p)}}catch(xt){a={error:xt}}finally{try{B&&!B.done&&(n=A.return)&&n.call(A)}finally{if(a)throw a.error}}try{for(var R=H(L),D=R.next();!D.done;D=R.next()){var w=D.value,F=this.lastElementsMap[w],m=u.get(w),z=this.getDrawCfg(m),X=F.getModel(),p=v.get(w);(this.isCoordinateChanged||dn(z,X))&&(F.animate=this.animateOption,F.update(z)),this.elements[p]=F,this.elementsMap[w]=F,F.shape&&F.shape.set("zIndex",this.zIndexReversed?this.elements.length-p:p)}}catch(xt){o={error:xt}}finally{try{D&&!D.done&&(s=R.return)&&s.call(R)}finally{if(o)throw o.error}}this.container&&this.container.sort();try{for(var K=H(M),ot=K.next();!ot.done;ot=K.next()){var w=ot.value,F=this.lastElementsMap[w];F.animate=this.animateOption,F.destroy()}}catch(xt){l={error:xt}}finally{try{ot&&!ot.done&&(h=K.return)&&h.call(K)}finally{if(l)throw l.error}}},i.prototype.getLabelType=function(){var t=this,e=t.labelOption,a=t.coordinate,n=t.type,o=a.type,s=a.isTransposed,l=T(e,["cfg","type"]);return l||(o==="polar"?l=s?"pie":"polar":o==="theta"?l="pie":n==="interval"||n==="polygon"?l="interval":l="base"),l},i.prototype.getYMinValue=function(){var t=this.getYScale(),e=t.min,a=t.max,n;return e>=0?n=e:a<=0?n=a:n=0,n},i.prototype.createAttrOption=function(t,e,a){if(V(e)||yt(e))yt(e)&&ct(Object.keys(e),["values"])?tt(this.attributeOption,t,{fields:e.values}):tt(this.attributeOption,t,e);else{var n={};ht(e)?n.values=[e]:n.fields=Ae(e),a&&(j(a)?n.callback=a:n.values=a),tt(this.attributeOption,t,n)}},i.prototype.initAttributes=function(){var t=this,e=this,a=e.attributes,n=e.attributeOption,o=e.theme,s=e.shapeType;this.groupScales=[];var l={},h=function(v){if(n.hasOwnProperty(v)){var f=n[v];if(!f)return{value:void 0};var p=y({},f),d=p.callback,g=p.values,m=p.fields,w=m===void 0?[]:m,x=w.map(function(S){var L=t.scales[S];if(!l[S]&&ue.includes(v)){var M=Ya(L,T(t.scaleDefs,S),v,t.type);M==="cat"&&(t.groupScales.push(L),l[S]=!0)}return L});p.scales=x,v!=="position"&&x.length===1&&x[0].type==="identity"?p.values=x[0].values:!d&&!g&&(v==="size"?p.values=o.sizes:v==="shape"?p.values=o.shapes[s]||[]:v==="color"&&(x.length?p.values=x[0].values.length<=10?o.colors10:o.colors20:p.values=o.colors10));var C=To(v);a[v]=new C(p)}};for(var u in n){var c=h(u);if(typeof c=="object")return c.value}},i.prototype.processData=function(t){var e,a;this.hasSorted=!1;for(var n=this.getAttribute("position").scales,o=n.filter(function(M){return M.isCategory}),s=this.groupData(t),l=[],h=0,u=s.length;h<u;h++){for(var c=s[h],v=[],f=0,p=c.length;f<p;f++){var d=c[f],g={};for(var m in d)g[m]=d[m];g[W]=d;try{for(var w=(e=void 0,H(o)),x=w.next();!x.done;x=w.next()){var C=x.value,S=C.field;g[S]=C.translate(g[S])}}catch(M){e={error:M}}finally{try{x&&!x.done&&(a=w.return)&&a.call(w)}finally{if(e)throw e.error}}v.push(g)}l.push(v)}var L=this.adjustData(l);return this.beforeMappingData=L,L},i.prototype.adjustData=function(t){var e=this.adjustOption,a=this,n=a.intervalPadding,o=a.dodgePadding,s=a.theme,l=this.maxColumnWidth||s.maxColumnWidth,h=this.minColumnWidth||s.minColumnWidth,u=this.columnWidthRatio||s.columnWidthRatio,c=t;if(e){var v=this.getXScale(),f=this.getYScale(),p=v.field,d=f?f.field:null,g=Ne(this.coordinate),m=v.values.length,w=this.getAttribute("size"),x=void 0;w&&(x=w.values[0]);for(var C=0,S=e.length;C<S;C++){var L=e[C],M=y({xField:p,yField:d,intervalPadding:n,dodgePadding:o,xDimensionLength:g,groupNum:m,defaultSize:x,maxColumnWidth:l,minColumnWidth:h,columnWidthRatio:u},L),A=L.type;if(A==="dodge"){var B=[];if(v.isCategory||v.type==="identity")B.push("x");else if(!f)B.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");M.adjustNames=B,M.dodgeRatio=u}else if(A==="stack"){var F=this.coordinate;if(!f){M.height=F.getHeight();var R=this.getDefaultValue("size")||3;M.size=R}!F.isTransposed&&V(M.reverseOrder)&&(M.reverseOrder=!0)}var D=bo(A);M.dimValuesMap={},v&&v.values&&(M.dimValuesMap[v.field]=v.values.map(function(X){return v.translate(X)}));var z=new D(M);c=z.process(c),this.adjusts[A]=z}}return c},i.prototype.groupData=function(t){for(var e=this.getGroupScales(),a=this.scaleDefs,n={},o=[],s=0;s<e.length;s++){var l=e[s],h=l.field;o.push(h),T(a,[h,"values"])&&(n[h]=a[h].values)}return el(t,o,n)},i.prototype.updateStackRange=function(t,e){for(var a=Ot(e),n=t.field,o=t.min,s=t.max,l=0;l<a.length;l++){var h=a[l],u=Math.min.apply(null,h[n]),c=Math.max.apply(null,h[n]);u<o&&(o=u),c>s&&(s=c)}var v=this.scaleDefs,f={};o<t.min&&!T(v,[n,"min"])&&(f.min=o),s>t.max&&!T(v,[n,"max"])&&(f.max=s),t.change(f)},i.prototype.beforeMapping=function(t){var e=t;if(this.sortable&&this.sort(e),this.generatePoints)for(var a=0,n=e.length;a<n;a++){var o=e[a];this.generateShapePoints(o);var s=e[a+1];s&&(this.generateShapePoints(s),o[0].nextPoints=s[0].points)}return e},i.prototype.generateShapePoints=function(t){for(var e=this.getShapeFactory(),a=this.getAttribute("shape"),n=0;n<t.length;n++){var o=t[n],s=this.createShapePointsCfg(o),l=a?this.getAttributeValues(a,o):null,h=e.getShapePoints(l,s);o.points=h}},i.prototype.normalizeValues=function(t,e){var a=[];if(O(t))for(var n=0;n<t.length;n++){var o=t[n];a.push(e.scale(o))}else a=e.scale(t);return a},i.prototype.mapping=function(t){for(var e=this.attributes,a=[],n=0;n<t.length;n++){var o=t[n],s={_origin:o[W],points:o.points,nextPoints:o.nextPoints};for(var l in e)if(e.hasOwnProperty(l)){var h=e[l],u=h.names,c=this.getAttributeValues(h,o);if(u.length>1)for(var v=0;v<c.length;v+=1){var f=c[v],p=u[v];s[p]=O(f)&&f.length===1?f[0]:f}else s[u[0]]=c.length===1?c[0]:c}this.convertPoint(s),a.push(s)}return a},i.prototype.convertPoint=function(t){var e=t.x,a=t.y,n,o,s,l=this.coordinate;if(O(e)&&O(a)){n=[],o=[];for(var h=0,u=0,c=e.length,v=a.length;h<c&&u<v;h+=1,u+=1)s=l.convert({x:e[h],y:a[u]}),n.push(s.x),o.push(s.y)}else if(O(a)){o=[];for(var f=0;f<a.length;f++){var p=a[f];s=l.convert({x:e,y:p}),n&&n!==s.x?(O(n)||(n=[n]),n.push(s.x)):n=s.x,o.push(s.y)}}else if(O(e)){n=[];for(var f=0;f<e.length;f++){var d=e[f];s=l.convert({x:d,y:a}),o&&o!==s.y?(O(o)||(o=[o]),o.push(s.y)):o=s.y,n.push(s.x)}}else{var g=l.convert({x:e,y:a});n=g.x,o=g.y}t.x=n,t.y=o},i.prototype.getStyleCfg=function(t,e){var a=t.fields,n=a===void 0?[]:a,o=t.callback,s=t.cfg;if(s)return s;var l=n.map(function(h){return e[h]});return o.apply(void 0,$([],P(l),!1))},i.prototype.setCfg=function(t){var e=this,a=t.coordinate,n=t.data,o=t.theme,s=t.scaleDefs;a&&(this.coordinate=a),n&&(this.data=n),s&&(this.scaleDefs=s,this.idFields=[],b(s,function(l,h){l&&l.key&&e.idFields.push(h)})),o&&(this.theme=this.userTheme?I({},o,this.userTheme):o)},i.prototype.renderLabels=function(t,e){return e===void 0&&(e=!1),De(this,void 0,void 0,function(){var a,n,o,s,l,h,u,c,v,f,p,d,g=this;return Ge(this,function(m){switch(m.label){case 0:return a=this.geometryLabel,this.emit(Yt.BEFORE_RENDER_LABEL),a||(n=this.getLabelType(),o=Qs(n),a=new o(this),this.geometryLabel=a),[4,a.render(t,e)];case 1:m.sent(),s=a.labelsRenderer.shapesMap,l=new Map,b(s,function(w,x){for(var C=w.getChildren()||[],S=0;S<C.length;S++){var L=C[S],M=g.elementsMap[L.get("elementId")||x.split(" ")[0]];if(M){L.cfg.name=["element","label"],L.cfg.element=M;var A=l.get(M)||new Set;A.add(w),l.set(M,A)}}});try{for(h=H(l.entries()),u=h.next();!u.done;u=h.next())c=P(u.value,2),v=c[0],f=c[1],v.labelShape=$([],P(f),!1)}catch(w){p={error:w}}finally{try{u&&!u.done&&(d=h.return)&&d.call(h)}finally{if(p)throw p.error}}return this.emit(Yt.AFTER_RENDER_LABEL),[2]}})})},i.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&(T(this.animateOption,"appear")===void 0||T(this.animateOption,"appear")&&T(this.animateOption,["appear","animation"])===void 0)},i}(jr),yn=st;function gr(r,i,t){var e=yn(r.getMatrix(),[["t",i,t]]);r.setMatrix(e)}function rl(r,i){var t=r.attr(),e=t.x,a=t.y,n=yn(r.getMatrix(),[["t",-e,-a],["r",i],["t",e,a]]);return n}function mn(r,i){var t=rl(r,i);r.setMatrix(t)}function Wt(r){return r.find(function(i){return i.get("type")==="text"})}function xn(r,i,t){t===void 0&&(t=[0,0,0,0]);var e=r&&r.getChildren()[0];if(e){var a=e.clone();i!=null&&i.rotate&&mn(a,-i.rotate);var n=a.getCanvasBBox(),o=n.x,s=n.y,l=n.width,h=n.height;a.destroy();var u=t;return V(u)?u=[2,2,2,2]:ht(u)&&(u=new Array(4).fill(u)),{x:o-u[3],y:s-u[0],width:l+u[1]+u[3],height:h+u[0]+u[2],rotation:(i==null?void 0:i.rotate)||0}}return{x:0,y:0,width:0,height:0,rotation:0}}function il(r,i,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(r.x+r.width+t,i.x+i.width+t)-Math.max(r.x-t,i.x-t)),a=Math.max(0,Math.min(r.y+r.height+t,i.y+i.height+t)-Math.max(r.y-t,i.y-t));return e*a}function al(r,i){var t=r.getBBox();return cr(i,function(e){var a=e.getBBox();return il(t,a,2)>0})}function wn(r,i,t){var e=t.data,a=t.origin,n=t.animateCfg,o=t.coordinate,s=T(n,"update");r.set("data",e),r.set("origin",a),r.set("animateCfg",n),r.set("coordinate",o),r.set("visible",i.get("visible")),(r.getChildren()||[]).forEach(function(l,h){var u=i.getChildByIndex(h);if(!u)r.removeChild(l),l.remove(!0);else{l.set("data",e),l.set("origin",a),l.set("animateCfg",n),l.set("coordinate",o);var c=Ha(l,u);s?pe(l,s,{toAttrs:c,coordinate:o}):l.attr(c),u.isGroup()&&wn(l,u,t)}}),b(i.getChildren(),function(l,h){h>=r.getCount()&&(l.destroyed||r.add(l))})}var nl=function(){function r(i){this.shapesMap={};var t=i.layout,e=i.container;this.layout=t,this.container=e}return r.prototype.render=function(i,t,e){return e===void 0&&(e=!1),De(this,void 0,void 0,function(){var a,n,o,s,l,h,u,c,v=this;return Ge(this,function(f){switch(f.label){case 0:if(a={},n=this.createOffscreenGroup(),!i.length)return[3,2];try{for(o=H(i),s=o.next();!s.done;s=o.next())l=s.value,l&&(a[l.id]=this.renderLabel(l,n))}catch(p){u={error:p}}finally{try{s&&!s.done&&(c=o.return)&&c.call(o)}finally{if(u)throw u.error}}return[4,this.doLayout(i,t,a)];case 1:f.sent(),this.renderLabelLine(i,a),this.renderLabelBackground(i,a),this.adjustLabel(i,a),f.label=2;case 2:return h=this.shapesMap,b(a,function(p,d){if(p.destroyed)delete a[d];else{if(h[d]){var g=p.get("data"),m=p.get("origin"),w=p.get("coordinate"),x=p.get("animateCfg"),C=h[d];wn(C,a[d],{data:g,origin:m,animateCfg:x,coordinate:w}),a[d]=C}else{if(v.container.destroyed)return;v.container.add(p);var S=T(p.get("animateCfg"),e?"enter":"appear");S&&pe(p,S,{toAttrs:y({},p.attr()),coordinate:p.get("coordinate")})}delete h[d]}}),b(h,function(p){var d=T(p.get("animateCfg"),"leave");d?pe(p,d,{toAttrs:null,coordinate:p.get("coordinate")}):p.remove(!0)}),this.shapesMap=a,n.destroy(),[2]}})})},r.prototype.clear=function(){this.container.clear(),this.shapesMap={}},r.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null},r.prototype.renderLabel=function(i,t){var e=i.id,a=i.elementId,n=i.data,o=i.mappingData,s=i.coordinate,l=i.animate,h=i.content,u=i.capture,c={id:e,elementId:a,capture:u,data:n,origin:y(y({},o),{data:o[W]}),coordinate:s},v=t.addGroup(y({name:"label",animateCfg:this.animate===!1||l===null||l===!1?!1:I({},this.animate,l)},c)),f;if(h.isGroup&&h.isGroup()||h.isShape&&h.isShape()){var p=h.getCanvasBBox(),d=p.width,g=p.height,m=T(i,"textAlign","left"),w=i.x,x=i.y-g/2;m==="center"?w=w-d/2:(m==="right"||m==="end")&&(w=w-d),gr(h,w,x),f=h,v.add(h)}else{var C=T(i,["style","fill"]);f=v.addShape("text",y({attrs:y(y({x:i.x,y:i.y,textAlign:i.textAlign,textBaseline:T(i,"textBaseline","middle"),text:i.content},i.style),{fill:Lo(C)?i.color:C})},c))}return i.rotate&&mn(f,i.rotate),v},r.prototype.doLayout=function(i,t,e){return De(this,void 0,void 0,function(){var a,n=this;return Ge(this,function(o){switch(o.label){case 0:return this.layout?(a=O(this.layout)?this.layout:[this.layout],[4,Promise.all(a.map(function(s){var l=Js(T(s,"type",""));if(!!l){var h=[],u=[];return b(e,function(c,v){h.push(c),u.push(t[c.get("elementId")])}),l(i,h,u,n.region,s.cfg)}}))]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},r.prototype.renderLabelLine=function(i,t){b(i,function(e){var a=T(e,"coordinate");if(!(!e||!a)){var n=a.getCenter(),o=a.getRadius();if(!!e.labelLine){var s=T(e,"labelLine",{}),l=e.id,h=s.path;if(!h){var u=_(n.x,n.y,o,e.angle);h=[["M",u.x,u.y],["L",e.x,e.y]]}var c=t[l];c.destroyed||c.addShape("path",{capture:!1,attrs:y({path:h,stroke:e.color?e.color:T(e,["style","fill"],"#000"),fill:null},s.style),id:l,origin:e.mappingData,data:e.data,coordinate:e.coordinate})}}})},r.prototype.renderLabelBackground=function(i,t){b(i,function(e){var a=T(e,"coordinate"),n=T(e,"background");if(!(!n||!a)){var o=e.id,s=t[o];if(!s.destroyed){var l=s.getChildren()[0];if(l){var h=xn(s,e,n.padding),u=h.rotation,c=ft(h,["rotation"]),v=s.addShape("rect",{attrs:y(y({},c),n.style||{}),id:o,origin:e.mappingData,data:e.data,coordinate:e.coordinate});if(v.setZIndex(-1),u){var f=l.getMatrix();v.setMatrix(f)}}}}})},r.prototype.createOffscreenGroup=function(){var i=this.container,t=i.getGroupBase(),e=new t({});return e},r.prototype.adjustLabel=function(i,t){b(i,function(e){if(e){var a=e.id,n=t[a];if(!n.destroyed){var o=n.findAll(function(s){return s.get("type")!=="path"});b(o,function(s){s&&(e.offsetX&&s.attr("x",s.attr("x")+e.offsetX),e.offsetY&&s.attr("y",s.attr("y")+e.offsetY))})}}})},r}();function Zi(r){var i=0;return b(r,function(t){i+=t}),i/r.length}var ti=function(){function r(i){this.geometry=i}return r.prototype.getLabelItems=function(i){var t=this,e=[],a=this.getLabelCfgs(i);return b(i,function(n,o){var s=a[o];if(!s||V(n.x)||V(n.y)){e.push(null);return}var l=O(s.content)?s.content:[s.content];s.content=l;var h=l.length;b(l,function(u,c){if(V(u)||u===""){e.push(null);return}var v=y(y({},s),t.getLabelPoint(s,n,c));v.textAlign||(v.textAlign=t.getLabelAlign(v,c,h)),v.offset<=0&&(v.labelLine=null),e.push(v)})}),e},r.prototype.render=function(i,t){return t===void 0&&(t=!1),De(this,void 0,void 0,function(){var e,a,n;return Ge(this,function(o){switch(o.label){case 0:return e=this.getLabelItems(i),a=this.getLabelsRenderer(),n=this.getGeometryShapes(),[4,a.render(e,n,t)];case 1:return o.sent(),[2]}})})},r.prototype.clear=function(){var i=this.labelsRenderer;i&&i.clear()},r.prototype.destroy=function(){var i=this.labelsRenderer;i&&i.destroy(),this.labelsRenderer=null},r.prototype.getCoordinate=function(){return this.geometry.coordinate},r.prototype.getDefaultLabelCfg=function(i,t){var e=this.geometry,a=e.type,n=e.theme;return a==="polygon"||a==="interval"&&t==="middle"||i<0&&!["line","point","path"].includes(a)?T(n,"innerLabels",{}):T(n,"labels",{})},r.prototype.getThemedLabelCfg=function(i){var t=this.geometry,e=this.getDefaultLabelCfg(),a=t.type,n=t.theme,o;return a==="polygon"||i.offset<0&&!["line","point","path"].includes(a)?o=I({},e,n.innerLabels,i):o=I({},e,n.labels,i),o},r.prototype.setLabelPosition=function(i,t,e,a){},r.prototype.getLabelOffset=function(i){var t=this.getCoordinate(),e=this.getOffsetVector(i);return t.isTransposed?e[0]:e[1]},r.prototype.getLabelOffsetPoint=function(i,t,e){var a=i.offset,n=this.getCoordinate(),o=n.isTransposed,s=o?"x":"y",l=o?1:-1,h={x:0,y:0};return t>0||e===1?h[s]=a*l:h[s]=a*l*-1,h},r.prototype.getLabelPoint=function(i,t,e){var a=this.getCoordinate(),n=i.content.length;function o(g,m,w){w===void 0&&(w=!1);var x=g;return O(x)&&(i.content.length===1?w?x=Zi(x):x.length<=2?x=x[g.length-1]:x=Zi(x):x=x[m]),x}var s={content:i.content[e],x:0,y:0,start:{x:0,y:0},color:"#fff"},l=O(t.shape)?t.shape[0]:t.shape,h=l==="funnel"||l==="pyramid";if(this.geometry.type==="polygon"){var u=No(t.x,t.y);s.x=u[0],s.y=u[1]}else this.geometry.type==="interval"&&!h?(s.x=o(t.x,e,!0),s.y=o(t.y,e)):(s.x=o(t.x,e),s.y=o(t.y,e));if(h){var c=T(t,"nextPoints"),v=T(t,"points");if(c){var f=a.convert(v[1]),p=a.convert(c[1]);s.x=(f.x+p.x)/2,s.y=(f.y+p.y)/2}else if(l==="pyramid"){var f=a.convert(v[1]),p=a.convert(v[2]);s.x=(f.x+p.x)/2,s.y=(f.y+p.y)/2}}i.position&&this.setLabelPosition(s,t,e,i.position);var d=this.getLabelOffsetPoint(i,e,n);return s.start={x:s.x,y:s.y},s.x+=d.x,s.y+=d.y,s.color=t.color,s},r.prototype.getLabelAlign=function(i,t,e){var a="center",n=this.getCoordinate();if(n.isTransposed){var o=i.offset;o<0?a="right":o===0?a="center":a="left",e>1&&t===0&&(a==="right"?a="left":a==="left"&&(a="right"))}return a},r.prototype.getLabelId=function(i){var t=this.geometry,e=t.type,a=t.getXScale(),n=t.getYScale(),o=i[W],s=t.getElementId(i);return e==="line"||e==="area"?s+=" ".concat(o[a.field]):e==="path"&&(s+=" ".concat(o[a.field],"-").concat(o[n.field])),s},r.prototype.getLabelsRenderer=function(){var i=this.geometry,t=i.labelsContainer,e=i.labelOption,a=i.canvasRegion,n=i.animateOption,o=this.geometry.coordinate,s=this.labelsRenderer;return s||(s=new nl({container:t,layout:T(e,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=s),s.region=a,s.animate=n?un("label",o):!1,s},r.prototype.getLabelCfgs=function(i){var t=this,e=this.geometry,a=e.labelOption,n=e.scales,o=e.coordinate,s=a,l=s.fields,h=s.callback,u=s.cfg,c=l.map(function(f){return n[f]}),v=[];return b(i,function(f,p){var d=f[W],g=t.getLabelText(d,c),m;if(h){var w=l.map(function(M){return d[M]});if(m=h.apply(void 0,$([],P(w),!1)),V(m)){v.push(null);return}}var x=y(y({id:t.getLabelId(f),elementId:t.geometry.getElementId(f),data:d,mappingData:f,coordinate:o},u),m);j(x.position)&&(x.position=x.position(d,f,p));var C=t.getLabelOffset(x.offset||0),S=t.getDefaultLabelCfg(C,x.position);x=I({},S,x),x.offset=t.getLabelOffset(x.offset||0);var L=x.content;j(L)?x.content=L(d,f,p):ce(L)&&(x.content=g[0]),v.push(x)}),v},r.prototype.getLabelText=function(i,t){var e=[];return b(t,function(a){var n=i[a.field];O(n)?n=n.map(function(o){return a.getText(o)}):n=a.getText(n),V(n)||n===""?e.push(null):e.push(n)}),e},r.prototype.getOffsetVector=function(i){i===void 0&&(i=0);var t=this.getCoordinate(),e=0;return ht(i)&&(e=i),t.isTransposed?t.applyMatrix(e,0):t.applyMatrix(0,e)},r.prototype.getGeometryShapes=function(){var i=this.geometry,t={};return b(i.elementsMap,function(e,a){t[a]=e.shape}),b(i.getOffscreenGroup().getChildren(),function(e){var a=i.getElementId(e.get("origin").mappingData);t[a]=e}),t},r}();function $i(r,i,t){if(!r)return t;var e;if(r.callback&&r.callback.length>1){var a=Array(r.callback.length-1).fill("");e=r.mapping.apply(r,$([i],P(a),!1)).join("")}else e=r.mapping(i).join("");return e||t}var ee={hexagon:function(r,i,t){var e=t/2*Math.sqrt(3);return[["M",r,i-t],["L",r+e,i-t/2],["L",r+e,i+t/2],["L",r,i+t],["L",r-e,i+t/2],["L",r-e,i-t/2],["Z"]]},bowtie:function(r,i,t){var e=t-1.5;return[["M",r-t,i-e],["L",r+t,i+e],["L",r+t,i-e],["L",r-t,i+e],["Z"]]},cross:function(r,i,t){return[["M",r-t,i-t],["L",r+t,i+t],["M",r+t,i-t],["L",r-t,i+t]]},tick:function(r,i,t){return[["M",r-t/2,i-t],["L",r+t/2,i-t],["M",r,i-t],["L",r,i+t],["M",r-t/2,i+t],["L",r+t/2,i+t]]},plus:function(r,i,t){return[["M",r-t,i],["L",r+t,i],["M",r,i-t],["L",r,i+t]]},hyphen:function(r,i,t){return[["M",r-t,i],["L",r+t,i]]},line:function(r,i,t){return[["M",r,i-t],["L",r,i+t]]}},ol=["line","cross","tick","plus","hyphen"];function sl(r,i){return j(i)?i(r):I({},r,i)}function ll(r,i){var t=r.symbol;if(et(t)&&ol.indexOf(t)!==-1){var e=T(r,"style",{}),a=T(e,"lineWidth",1),n=e.stroke||e.fill||i;r.style=I({},r.style,{lineWidth:a,stroke:n,fill:null})}}function Cn(r){var i=r.symbol;et(i)&&ee[i]&&(r.symbol=ee[i])}function Mr(r){return r.startsWith(E.LEFT)||r.startsWith(E.RIGHT)?"vertical":"horizontal"}function hl(r,i,t,e,a){var n=t.getScale(t.type);if(n.isCategory){var o=n.field,s=i.getAttribute("color"),l=i.getAttribute("shape"),h=r.getTheme().defaultColor,u=i.coordinate.isPolar;return n.getTicks().map(function(c,v){var f,p=c.text,d=c.value,g=p,m=n.invert(d),w=r.filterFieldData(o,[(f={},f[o]=m,f)]).length===0;b(r.views,function(M){var A;M.filterFieldData(o,[(A={},A[o]=m,A)]).length||(w=!0)});var x=$i(s,m,h),C=$i(l,m,"point"),S=i.getShapeMarker(C,{color:x,isInPolar:u}),L=a;return j(L)&&(L=L(g,v,y({name:g,value:m},I({},e,S)))),S=I({},e,S,pt(y({},L),["style"])),ll(S,x),L&&L.style&&(S.style=sl(S.style,L.style)),Cn(S),{id:m,name:g,value:m,marker:S,unchecked:w}})}return[]}function cl(r,i,t){return t.map(function(e,a){var n=i;j(n)&&(n=n(e.name,a,I({},r,e)));var o=j(e.marker)?e.marker(e.name,a,I({},r,e)):e.marker,s=I({},r,n,o);return Cn(s),e.marker=s,e})}function Ki(r,i){var t=T(r,["components","legend"],{});return I({},T(t,["common"],{}),I({},T(t,[i],{})))}function Ar(r){return r?!1:r==null||isNaN(r)}function Qi(r){if(O(r))return Ar(r[1].y);var i=r.y;return O(i)?Ar(i[0]):Ar(i)}function ei(r,i,t){if(i===void 0&&(i=!1),t===void 0&&(t=!0),!r.length||r.length===1&&!t)return[];if(i){for(var e=[],a=0,n=r.length;a<n;a++){var o=r[a];Qi(o)||e.push(o)}return[e]}for(var s=[],l=[],a=0,n=r.length;a<n;a++){var o=r[a];Qi(o)?l.length&&(l.length===1&&!t||s.push(l),l=[]):l.push(o)}return l.length&&s.push(l),s}function Sn(r){for(var i=[],t=0;t<r.length;t++){var e=r[t];if(e){var a=t===0?"M":"L";i.push([a,e.x,e.y])}}var n=r[0];return n&&(i.push(["L",n.x,n.y]),i.push(["z"])),i}function bn(r){for(var i=r.length/2,t=[],e=[],a=0;a<r.length;a++)a<i?t.push(r[a]):e.push(r[a]);var n=lr(t,!1),o=lr(e,!1);e.length&&n.push(["L",e[0].x,e[0].y]),o.shift();var s=n.concat(o);return t.length&&s.push(["L",t[0].x,t[0].y]),s.push(["z"]),s}function J(r,i,t,e){e===void 0&&(e="");var a=r.style,n=a===void 0?{}:a,o=r.defaultStyle,s=r.color,l=r.size,h=y(y({},o),n);return s&&(i&&(n.stroke||(h.stroke=s)),t&&(n.fill||(h.fill=s))),e&&V(n[e])&&!V(l)&&(h[e]=l),h}function Tn(r){return I({},{fill:"#CCD6EC",fillOpacity:.3},T(r,["background","style"]))}function ri(r){var i=r.x,t=O(r.y)?r.y:[r.y];return t.map(function(e,a){return{x:O(i)?i[a]:i,y:e}})}var ul={line:function(r,i,t){return[["M",r-t,i],["L",r+t,i]]},dot:function(r,i,t){return[["M",r-t,i],["L",r+t,i]]},dash:function(r,i,t){return[["M",r-t,i],["L",r+t,i]]},smooth:function(r,i,t){return[["M",r-t,i],["A",t/2,t/2,0,1,1,r,i],["A",t/2,t/2,0,1,0,r+t,i]]},hv:function(r,i,t){return[["M",r-t-1,i-2.5],["L",r,i-2.5],["L",r,i+2.5],["L",r+t+1,i+2.5]]},vh:function(r,i,t){return[["M",r-t-1,i+2.5],["L",r,i+2.5],["L",r,i-2.5],["L",r+t+1,i-2.5]]},hvh:function(r,i,t){return[["M",r-(t+1),i+2.5],["L",r-t/2,i+2.5],["L",r-t/2,i-2.5],["L",r+t/2,i-2.5],["L",r+t/2,i+2.5],["L",r+t+1,i+2.5]]},vhv:function(r,i){return[["M",r-5,i+2.5],["L",r-5,i],["L",r,i],["L",r,i-3],["L",r,i+3],["L",r+6.5,i+3]]}};function Ln(r,i){var t=r.color;return{symbol:ul[i],style:{lineWidth:2,r:6,stroke:t}}}function vl(r,i,t){for(var e=r.isStack,a=r.connectNulls,n=r.isInCircle,o=r.showSinglePoint,s=J(r,!0,!1,"lineWidth"),l=ei(r.points,a,o),h=[],u=0,c=l.length;u<c;u++){var v=l[u];h=h.concat(pl(v,n,e,i,t,s))}return s.path=h,s}function zr(r,i,t,e,a){if(r.length===1)return[["M",r[0].x,r[0].y-a.lineWidth/2],["L",r[0].x,r[0].y],["L",r[0].x,r[0].y+a.lineWidth/2]];var n;return t?(i&&r.length&&r.push({x:r[0].x,y:r[0].y}),n=lr(r,!1,e)):(n=We(r,!1),i&&n.push(["Z"])),n}function fl(r,i,t,e,a,n){var o=[],s=[];b(r,function(u){var c=ri(u);o.push(c[1]),s.push(c[0])});var l=zr(o,i,e,a,n),h=zr(s,i,e,a,n);return t?l:l.concat(h)}function pl(r,i,t,e,a,n){if(r.length){var o=r[0];return O(o.y)?fl(r,i,t,e,a,n):zr(r,i,e,a,n)}return[]}jt("line",{defaultShapeType:"line"});b(["line","dot","dash","smooth"],function(r){U("line",r,{draw:function(i,t){var e=r==="smooth",a;if(e){var n=this.coordinate,o=n.start,s=n.end;a=[[o.x,s.y],[s.x,o.y]]}var l=vl(i,e,a),h=t.addShape({type:"path",attrs:l,name:"line",capture:!e});return h},getMarker:function(i){return Ln(i,r)}})});var Gt={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},N={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},Ct=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],dl=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],gl=["#B8E1FF","#9AC5FF","#7DAAFF","#5B8FF9","#3D76DD","#085EC0","#0047A5","#00318A","#001D70"],yl=function(r){r===void 0&&(r={});var i=r.paletteQualitative10,t=i===void 0?Ct:i,e=r.paletteQualitative20,a=e===void 0?dl:e,n=r.brandColor,o=n===void 0?t[0]:n,s={backgroundColor:"#141414",brandColor:o,subColor:"rgba(255,255,255,0.05)",paletteQualitative10:t,paletteQualitative20:a,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",paletteSequence:gl,fontFamily:`"Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`,axisLineBorderColor:N[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:N[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisDescriptionIconFillColor:Gt[85],axisTickLineBorderColor:N[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:N[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:N[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:N[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:N[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Ct[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:N[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],legendPageNavigatorMarkerSize:12,legendPageNavigatorMarkerInactiveFillColor:N[45],legendPageNavigatorMarkerInactiveFillOpacity:.45,legendPageNavigatorMarkerFillColor:N[45],legendPageNavigatorMarkerFillOpacity:1,legendPageNavigatorTextFillColor:N[65],legendPageNavigatorTextFontSize:12,sliderRailFillColor:N[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:N[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Gt[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Gt[25],annotationArcBorderColor:N[15],annotationArcBorder:1,annotationLineBorderColor:N[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:N[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:N[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:N[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:N[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:N[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Gt[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:N[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Gt[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:N[25],cSliderRailHieght:16,cSliderBackgroundFillColor:"#416180",cSliderBackgroundFillOpacity:.05,cSliderForegroundFillColor:"#5B8FF9",cSliderForegroundFillOpacity:.15,cSliderHandlerHeight:24,cSliderHandlerWidth:10,cSliderHandlerFillColor:"#F7F7F7",cSliderHandlerFillOpacity:1,cSliderHandlerHighlightFillColor:"#FFF",cSliderHandlerBorderColor:"#BFBFBF",cSliderHandlerBorder:1,cSliderHandlerBorderRadius:2,cSliderTextFillColor:"#fff",cSliderTextFillOpacity:.45,cSliderTextFontSize:12,cSliderTextLineHeight:12,cSliderTextFontWeight:"normal",cSliderTextBorderColor:null,cSliderTextBorder:0,scrollbarTrackFillColor:"rgba(255,255,255,0.65)",scrollbarThumbFillColor:"rgba(0,0,0,0.35)",scrollbarThumbHighlightFillColor:"rgba(0,0,0,0.45)",pointFillColor:Ct[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Gt[100],pointBorderOpacity:1,pointActiveBorderColor:N[100],pointSelectedBorder:2,pointSelectedBorderColor:N[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Ct[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Gt[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:N[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:N[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Ct[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Ct[0],areaFillOpacity:.25,areaActiveFillColor:Ct[0],areaActiveFillOpacity:.5,areaSelectedFillColor:Ct[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Ct[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:N[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:N[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Ct[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:N[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:N[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Ct[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Gt[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:N[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:N[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};return y(y({},s),r)},ml=yl(),ii=function(r){k(i,r);function i(t){var e=r.call(this,t)||this;e.type="path",e.shapeType="line";var a=t.connectNulls,n=a===void 0?!1:a,o=t.showSinglePoint,s=o===void 0?!0:o;return e.connectNulls=n,e.showSinglePoint=s,e}return i.prototype.updateElements=function(t,e){var a,n,o,s,l,h;e===void 0&&(e=!1);for(var u=new Map,c=new Map,v=[],f=0,p=0;p<t.length;p++){var d=t[p],g=this.getElementId(d);v.push(g),u.set(g,d),c.set(g,f),f++}this.elements=new Array(f);var m=gn(this.lastElementsMap,v),w=m.added,x=m.updated,C=m.removed;try{for(var S=H(w),L=S.next();!L.done;L=S.next()){var g=L.value,d=u.get(g),M=this.getShapeFactory(),A=this.getShapeInfo(d),p=c.get(g),B=new vn({shapeFactory:M,container:this.container,offscreenGroup:this.getOffscreenGroup(),elementIndex:p});B.geometry=this,B.animate=this.animateOption,B.draw(A,e),this.elementsMap[g]=B,this.elements[p]=B}}catch(K){a={error:K}}finally{try{L&&!L.done&&(n=S.return)&&n.call(S)}finally{if(a)throw a.error}}try{for(var F=H(x),R=F.next();!R.done;R=F.next()){var g=R.value,d=u.get(g),B=this.lastElementsMap[g],p=c.get(g),A=this.getShapeInfo(d),D=B.getModel();(this.isCoordinateChanged||dn(D,A))&&(B.animate=this.animateOption,B.update(A)),this.elementsMap[g]=B,this.elements[p]=B}}catch(K){o={error:K}}finally{try{R&&!R.done&&(s=F.return)&&s.call(F)}finally{if(o)throw o.error}}try{for(var z=H(C),X=z.next();!X.done;X=z.next()){var g=X.value,B=this.lastElementsMap[g];B.animate=this.animateOption,B.destroy()}}catch(K){l={error:K}}finally{try{X&&!X.done&&(h=z.return)&&h.call(z)}finally{if(l)throw l.error}}},i.prototype.getPointsAndData=function(t){for(var e=[],a=[],n=0,o=t.length;n<o;n++){var s=t[n];e.push({x:s.x,y:s.y}),a.push(s[W])}return{points:e,data:a}},i.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]),a=this.getPointsAndData(t),n=a.points,o=a.data;return e.mappingData=t,e.data=o,e.isStack=!!this.getAdjust("stack"),e.points=n,e.connectNulls=this.connectNulls,e.showSinglePoint=this.showSinglePoint,e},i}(Ut);function xl(r,i,t,e,a){var n=[];if(r.length){for(var o=[],s=[],l=0,h=r.length;l<h;l++){var u=r[l];o.push(u[1]),s.push(u[0])}s=s.reverse(),b([o,s],function(c,v){var f=[],p=e.parsePoints(c),d=p[0];o.length===1&&s.length===1?f=v===0?[["M",d.x-.5,d.y],["L",d.x+.5,d.y]]:[["L",d.x+.5,d.y],["L",d.x-.5,d.y]]:(i&&p.push({x:d.x,y:d.y}),t?f=lr(p,!1,a):f=We(p,!1),v>0&&(f[0][0]="L")),n=n.concat(f)}),n.push(["Z"])}return n}function yr(r,i,t,e,a){for(var n=J(r,i,!i,"lineWidth"),o=r.connectNulls,s=r.isInCircle,l=r.points,h=r.showSinglePoint,u=ei(l,o,h),c=[],v=0,f=u.length;v<f;v++){var p=u[v];c=c.concat(xl(p,s,t,e,a))}return n.path=c,n}function Mn(r){var i=r.start,t=r.end;return[[i.x,t.y],[t.x,i.y]]}jt("area",{defaultShapeType:"area",getDefaultPoints:function(r){var i=r.x,t=r.y0,e=O(r.y)?r.y:[t,r.y];return e.map(function(a){return{x:i,y:a}})}});U("area","area",{draw:function(r,i){var t=yr(r,!1,!1,this),e=i.addShape({type:"path",attrs:t,name:"area"});return e},getMarker:function(r){var i=r.color;return{symbol:function(t,e,a){return a===void 0&&(a=5.5),[["M",t-a,e-4],["L",t+a,e-4],["L",t+a,e+4],["L",t-a,e+4],["Z"]]},style:{r:5,fill:i,fillOpacity:1}}}});var wl=function(r){k(i,r);function i(t){var e=r.call(this,t)||this;e.type="area",e.shapeType="area",e.generatePoints=!0,e.startOnZero=!0;var a=t.startOnZero,n=a===void 0?!0:a,o=t.sortable,s=o===void 0?!1:o,l=t.showSinglePoint,h=l===void 0?!1:l;return e.startOnZero=n,e.sortable=s,e.showSinglePoint=h,e}return i.prototype.getPointsAndData=function(t){for(var e=[],a=[],n=0,o=t.length;n<o;n++){var s=t[n];e.push(s.points),a.push(s[W])}return{points:e,data:a}},i.prototype.getYMinValue=function(){if(this.startOnZero)return r.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},i}(ii);jt("edge",{defaultShapeType:"line",getDefaultPoints:function(r){return ri(r)}});U("edge","line",{draw:function(r,i){var t=J(r,!0,!1,"lineWidth"),e=We(this.parsePoints(r.points),this.coordinate.isPolar);return i.addShape("path",{attrs:y(y({},t),{path:e})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});var Cl=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return i}(Ut),Sl=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return i.prototype.updateElements=function(t,e){for(var a=0;a<t.length;a++){var n=t[a],o=this.prepareRange(n),s=this.prepareSize(),l=T(this.styleOption,["cfg","shadowBlur"]);ht(l)||(l=s/2),this.prepareGreyScaleBlurredCircle(s,l),this.drawWithRange(n,o,s,l)}},i.prototype.color=function(t,e){return this.createAttrOption("color",t,typeof e!="function"?e:""),this},i.prototype.clear=function(){r.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},i.prototype.prepareRange=function(t){var e=this.getAttribute("color"),a=e.getFields()[0],n=1/0,o=-1/0;return t.forEach(function(s){var l=s[W][a];l>o&&(o=l),l<n&&(n=l)}),n===o&&(n=o-1),[n,o]},i.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return ht(t)||(t=this.getDefaultSize()),t},i.prototype.prepareGreyScaleBlurredCircle=function(t,e){var a=this.getGrayScaleBlurredCanvas(),n=t+e,o=a.getContext("2d");a.width=a.height=n*2,o.clearRect(0,0,a.width,a.height),o.shadowOffsetX=o.shadowOffsetY=n*2,o.shadowBlur=e,o.shadowColor="black",o.beginPath(),o.arc(-n,-n,t,0,Math.PI*2,!0),o.closePath(),o.fill()},i.prototype.drawWithRange=function(t,e,a,n){var o,s,l=this.coordinate,h=l.start,u=l.end,c=this.coordinate.getWidth(),v=this.coordinate.getHeight(),f=this.getAttribute("color"),p=f.getFields()[0];this.clearShadowCanvasCtx();var d=this.getShadowCanvasCtx();e&&(t=t.filter(function(F){return F[W][p]<=e[1]&&F[W][p]>=e[0]}));var g=this.scales[p];try{for(var m=H(t),w=m.next();!w.done;w=m.next()){var x=w.value,C=this.getDrawCfg(x),S=C.x,L=C.y,M=g.scale(x[W][p]);this.drawGrayScaleBlurredCircle(S-h.x,L-u.y,a+n,M,d)}}catch(F){o={error:F}}finally{try{w&&!w.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}var A=d.getImageData(0,0,c,v);this.clearShadowCanvasCtx(),this.colorize(A),d.putImageData(A,0,0);var B=this.getImageShape();B.attr("x",h.x),B.attr("y",u.y),B.attr("width",c),B.attr("height",v),B.attr("img",d.canvas),B.set("origin",this.getShapeInfo(t))},i.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),e=this.coordinate;return Math.min(e.getWidth()/(t.scales[0].ticks.length*4),e.getHeight()/(t.scales[1].ticks.length*4))},i.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},i.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},i.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},i.prototype.drawGrayScaleBlurredCircle=function(t,e,a,n,o){var s=this.getGrayScaleBlurredCanvas();o.globalAlpha=n,o.drawImage(s,t-a,e-a)},i.prototype.colorize=function(t){for(var e=this.getAttribute("color"),a=t.data,n=this.paletteCache,o=3;o<a.length;o+=4){var s=a[o];if(ht(s)){var l=n[s]?n[s]:Or.rgb2arr(e.gradient(s/256));a[o-3]=l[0],a[o-2]=l[1],a[o-1]=l[2],a[o]=s}}},i.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var e=this.container;return t=e.addShape({type:"image",attrs:{}}),this.imageShape=t,t},i.prototype.getShapeInfo=function(t){var e=this.getDrawCfg(t[0]),a=t.map(function(n){return n[W]});return y(y({},e),{mappingData:t,data:a})},i}(Ut);function ai(r){var i,t,e=r.x,a=r.y,n=r.y0,o=r.size,s,l;O(a)?(i=P(a,2),s=i[0],l=i[1]):(s=n,l=a);var h,u;O(e)?(t=P(e,2),h=t[0],u=t[1]):(h=e-o/2,u=e+o/2);var c=[{x:h,y:s},{x:h,y:l}];return c.push({x:u,y:l},{x:u,y:s}),c}function ni(r,i){i===void 0&&(i=!0);var t=[],e=r[0];t.push(["M",e.x,e.y]);for(var a=1,n=r.length;a<n;a++)t.push(["L",r[a].x,r[a].y]);return i&&(t.push(["L",e.x,e.y]),t.push(["z"])),t}function An(r,i){var t=0,e=0,a=0,n=0;return O(r)?r.length===1?t=e=a=n=r[0]:r.length===2?(t=a=r[0],e=n=r[1]):r.length===3?(t=r[0],e=n=r[1],a=r[2]):(t=r[0],e=r[1],a=r[2],n=r[3]):t=e=a=n=r,t+e>i&&(t=t?i/(1+e/t):0,e=i-t),a+n>i&&(a=a?i/(1+n/a):0,n=i-a),[t||0,e||0,a||0,n||0]}function Fn(r,i,t){var e=[];if(t.isRect){var a=t.isTransposed?{x:t.start.x,y:i[0].y}:{x:i[0].x,y:t.start.y},n=t.isTransposed?{x:t.end.x,y:i[2].y}:{x:i[3].x,y:t.end.y},o=T(r,["background","style","radius"]);if(o){var s=t.isTransposed?Math.abs(i[0].y-i[2].y):i[2].x-i[1].x,l=t.isTransposed?t.getWidth():t.getHeight(),h=P(An(o,Math.min(s,l)),4),u=h[0],c=h[1],v=h[2],f=h[3],p=t.isTransposed&&t.isReflect("y"),d=p?0:1,g=function(L){return p?-L:L};e.push(["M",a.x,n.y+g(u)]),u!==0&&e.push(["A",u,u,0,0,d,a.x+u,n.y]),e.push(["L",n.x-c,n.y]),c!==0&&e.push(["A",c,c,0,0,d,n.x,n.y+g(c)]),e.push(["L",n.x,a.y-g(v)]),v!==0&&e.push(["A",v,v,0,0,d,n.x-v,a.y]),e.push(["L",a.x+f,a.y]),f!==0&&e.push(["A",f,f,0,0,d,a.x,a.y-g(f)])}else e.push(["M",a.x,a.y]),e.push(["L",n.x,a.y]),e.push(["L",n.x,n.y]),e.push(["L",a.x,n.y]),e.push(["L",a.x,a.y]);e.push(["z"])}if(t.isPolar){var m=t.getCenter(),w=or(r,t),x=w.startAngle,C=w.endAngle;if(t.type!=="theta"&&!t.isTransposed)e=_t(m.x,m.y,t.getRadius(),x,C);else{var S=function(A){return Math.pow(A,2)},u=Math.sqrt(S(m.x-i[0].x)+S(m.y-i[0].y)),c=Math.sqrt(S(m.x-i[2].x)+S(m.y-i[2].y));e=_t(m.x,m.y,u,t.startAngle,t.endAngle,c)}}return e}function bl(r,i,t){var e=t.getWidth(),a=t.getHeight(),n=t.type==="rect",o=[],s=(r[2].x-r[1].x)/2,l=t.isTransposed?s*a/e:s*e/a;return i==="round"?(n?(o.push(["M",r[0].x,r[0].y+l]),o.push(["L",r[1].x,r[1].y-l]),o.push(["A",s,s,0,0,1,r[2].x,r[2].y-l]),o.push(["L",r[3].x,r[3].y+l]),o.push(["A",s,s,0,0,1,r[0].x,r[0].y+l])):(o.push(["M",r[0].x,r[0].y]),o.push(["L",r[1].x,r[1].y]),o.push(["A",s,s,0,0,1,r[2].x,r[2].y]),o.push(["L",r[3].x,r[3].y]),o.push(["A",s,s,0,0,1,r[0].x,r[0].y])),o.push(["z"])):o=ni(r),o}function Bn(r,i,t){var e=[];return V(i)?t?e.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",(r[2].x+r[3].x)/2,(r[2].y+r[3].y)/2],["Z"]):e.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",r[2].x,r[2].y],["L",r[3].x,r[3].y],["Z"]):e.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",i[1].x,i[1].y],["L",i[0].x,i[0].y],["Z"]),e}function Fe(r,i){return[i,r]}function Tl(r,i,t){var e,a,n,o,s,l,h,u=P($([],P(r),!1),4),c=u[0],v=u[1],f=u[2],p=u[3],d=P(typeof t=="number"?Array(4).fill(t):t,4),g=d[0],m=d[1],w=d[2],x=d[3];i.isTransposed&&(e=P(Fe(v,p),2),v=e[0],p=e[1]),i.isReflect("y")&&(a=P(Fe(c,v),2),c=a[0],v=a[1],n=P(Fe(f,p),2),f=n[0],p=n[1]),i.isReflect("x")&&(o=P(Fe(c,p),2),c=o[0],p=o[1],s=P(Fe(v,f),2),v=s[0],f=s[1]);var C=[],S=function(L){return Math.abs(L)};return l=P(An([g,m,w,x],Math.min(S(p.x-c.x),S(v.y-c.y))).map(function(L){return S(L)}),4),g=l[0],m=l[1],w=l[2],x=l[3],i.isTransposed&&(h=P([x,g,m,w],4),g=h[0],m=h[1],w=h[2],x=h[3]),c.y<v.y?(C.push(["M",p.x,p.y+w]),w!==0&&C.push(["A",w,w,0,0,0,p.x-w,p.y]),C.push(["L",c.x+x,c.y]),x!==0&&C.push(["A",x,x,0,0,0,c.x,c.y+x]),C.push(["L",v.x,v.y-g]),g!==0&&C.push(["A",g,g,0,0,0,v.x+g,v.y]),C.push(["L",f.x-m,f.y]),m!==0&&C.push(["A",m,m,0,0,0,f.x,f.y-m]),C.push(["L",p.x,p.y+w]),C.push(["z"])):p.x<c.x?(C.push(["M",f.x+m,f.y]),m!==0&&C.push(["A",m,m,0,0,0,f.x,f.y+m]),C.push(["L",p.x,p.y-w]),w!==0&&C.push(["A",w,w,0,0,0,p.x+w,p.y]),C.push(["L",c.x-x,c.y]),x!==0&&C.push(["A",x,x,0,0,0,c.x,c.y-x]),C.push(["L",v.x,v.y+g]),g!==0&&C.push(["A",g,g,0,0,0,v.x-g,v.y]),C.push(["L",f.x+m,f.y]),C.push(["z"])):(C.push(["M",v.x,v.y+g]),g!==0&&C.push(["A",g,g,0,0,1,v.x+g,v.y]),C.push(["L",f.x-m,f.y]),m!==0&&C.push(["A",m,m,0,0,1,f.x,f.y+m]),C.push(["L",p.x,p.y-w]),w!==0&&C.push(["A",w,w,0,0,1,p.x-w,p.y]),C.push(["L",c.x+x,c.y]),x!==0&&C.push(["A",x,x,0,0,1,c.x,c.y-x]),C.push(["L",v.x,v.y+g]),C.push(["z"])),C}jt("interval",{defaultShapeType:"rect",getDefaultPoints:function(r){return ai(r)}});U("interval","rect",{draw:function(r,i){var t=J(r,!1,!0),e=i,a=r==null?void 0:r.background;if(a){e=i.addGroup({name:"interval-group"});var n=Tn(r),o=Fn(r,this.parsePoints(r.points),this.coordinate);e.addShape("path",{attrs:y(y({},n),{path:o}),zIndex:-1,name:Jr})}var s;t.radius&&this.coordinate.isRect?s=Tl(this.parsePoints(r.points),this.coordinate,t.radius):s=this.parsePath(bl(r.points,t.lineCap,this.coordinate));var l=e.addShape("path",{attrs:y(y({},t),{path:s}),name:"interval"});return a?e:l},getMarker:function(r){var i=r.color,t=r.isInPolar;return t?{symbol:"circle",style:{r:4.5,fill:i}}:{symbol:"square",style:{r:4,fill:i}}}});function Ll(r,i){var t=r.length,e=r;et(e[0])&&(e=r.map(function(s){return i.translate(s)}));for(var a=e[1]-e[0],n=2;n<t;n++){var o=e[n]-e[n-1];a>o&&(a=o)}return a}function Ml(r,i){if(i){var t=Ot(r),e=te(t,i);return e.length}return r.length}function oi(r){var i=r.theme,t=r.coordinate,e=r.getXScale(),a=e.values,n=r.beforeMappingData,o=a.length,s=Ne(r.coordinate),l=r.intervalPadding,h=r.dodgePadding,u=r.maxColumnWidth||i.maxColumnWidth,c=r.minColumnWidth||i.minColumnWidth,v=r.columnWidthRatio||i.columnWidthRatio,f=r.multiplePieWidthRatio||i.multiplePieWidthRatio,p=r.roseWidthRatio||i.roseWidthRatio;if(e.isLinear&&a.length>1){a.sort();var d=Ll(a,e);o=(e.max-e.min)/d,a.length>o&&(o=a.length)}var g=e.range,m=1/o,w=1;if(t.isPolar?t.isTransposed&&o>1?w=f:w=p:(e.isLinear&&(m*=g[1]-g[0]),w=v),!V(l)&&l>=0){var x=l/s;m=(1-(o-1)*x)/o}else m*=w;if(r.getAdjust("dodge")){var C=r.getAdjust("dodge"),S=C.dodgeBy,L=Ml(n,S);if(!V(h)&&h>=0){var M=h/s;m=(m-M*(L-1))/L}else!V(l)&&l>=0&&(m*=w),m=m/L;m=m>=0?m:0}if(!V(u)&&u>=0){var A=u/s;m>A&&(m=A)}if(!V(c)&&c>=0){var B=c/s;m<B&&(m=B)}return m}var Al=function(r){k(i,r);function i(t){var e=r.call(this,t)||this;e.type="interval",e.shapeType="interval",e.generatePoints=!0;var a=t.background;return e.background=a,e}return i.prototype.createShapePointsCfg=function(t){var e=r.prototype.createShapePointsCfg.call(this,t),a,n=this.getAttribute("size");if(n){a=this.getAttributeValues(n,t)[0];var o=this.coordinate,s=Ne(o);a=a/s}else this.defaultSize||(this.defaultSize=oi(this)),a=this.defaultSize;return e.size=a,e},i.prototype.adjustScale=function(){r.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:_o(t)});else{var e=this.scaleDefs,a=t.field,n=t.min,o=t.max,s=t.type;s!=="time"&&(n>0&&!T(e,[a,"min"])&&t.change({min:0}),o<=0&&!T(e,[a,"max"])&&t.change({max:0}))}},i.prototype.getDrawCfg=function(t){var e=r.prototype.getDrawCfg.call(this,t);return e.background=this.background,e},i}(Ut),Fl=function(r){k(i,r);function i(t){var e=r.call(this,t)||this;e.type="line";var a=t.sortable,n=a===void 0?!1:a;return e.sortable=n,e}return i}(ii),En=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],Bl=["cross","tick","plus","hyphen","line"];function si(r,i,t,e,a){var n,o,s=J(i,a,!a,"r"),l=r.parsePoints(i.points),h=l[0];if(i.isStack)h=l[1];else if(l.length>1){var u=t.addGroup();try{for(var c=H(l),v=c.next();!v.done;v=c.next()){var f=v.value;u.addShape({type:"marker",attrs:y(y(y({},s),{symbol:ee[e]||e}),f)})}}catch(p){n={error:p}}finally{try{v&&!v.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}return u}return t.addShape({type:"marker",attrs:y(y(y({},s),{symbol:ee[e]||e}),h)})}jt("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(r){return ri(r)}});b(En,function(r){U("point","hollow-".concat(r),{draw:function(i,t){return si(this,i,t,r,!0)},getMarker:function(i){var t=i.color;return{symbol:ee[r]||r,style:{r:4.5,stroke:t,fill:null}}}})});var El=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return i.prototype.getDrawCfg=function(t){var e=r.prototype.getDrawCfg.call(this,t);return y(y({},e),{isStack:!!this.getAdjust("stack")})},i}(Ut);function kl(r){for(var i=r[0],t=1,e=[["M",i.x,i.y]];t<r.length;){var a=r[t];(a.x!==r[t-1].x||a.y!==r[t-1].y)&&(e.push(["L",a.x,a.y]),a.x===i.x&&a.y===i.y&&t<r.length-1&&(i=r[t+1],e.push(["Z"]),e.push(["M",i.x,i.y]),t++)),t++}return ct(ie(e),i)||e.push(["L",i.x,i.y]),e.push(["Z"]),e}jt("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(r){var i=[];return b(r.x,function(t,e){var a=r.y[e];i.push({x:t,y:a})}),i}});U("polygon","polygon",{draw:function(r,i){if(!It(r.points)){var t=J(r,!0,!0),e=this.parsePath(kl(r.points));return i.addShape("path",{attrs:y(y({},t),{path:e}),name:"polygon"})}},getMarker:function(r){var i=r.color;return{symbol:"square",style:{r:4,fill:i}}}});var Pl=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return i.prototype.createShapePointsCfg=function(t){var e=r.prototype.createShapePointsCfg.call(this,t),a=e.x,n=e.y,o;if(!(O(a)&&O(n))){var s=this.getXScale(),l=this.getYScale(),h=s.values.length,u=l.values.length,c=.5*1/h,v=.5*1/u;s.isCategory&&l.isCategory?(a=[a-c,a-c,a+c,a+c],n=[n-v,n+v,n+v,n-v]):O(a)?(o=a,a=[o[0],o[0],o[1],o[1]],n=[n-v/2,n+v/2,n+v/2,n-v/2]):O(n)&&(o=n,n=[o[0],o[1],o[1],o[0]],a=[a-c/2,a-c/2,a+c/2,a+c/2]),e.x=a,e.y=n}return e},i}(Ut);jt("schema",{defaultShapeType:""});var Il=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return i.prototype.createShapePointsCfg=function(t){var e=r.prototype.createShapePointsCfg.call(this,t),a,n=this.getAttribute("size");if(n){a=this.getAttributeValues(n,t)[0];var o=this.coordinate,s=Ne(o);a=a/s}else this.defaultSize||(this.defaultSize=oi(this)),a=this.defaultSize;return e.size=a,e},i}(Ut);function Ol(r){if(!O(r))return[];var i=Ea(r);return we(r,function(t){return t/i})}jt("violin",{defaultShapeType:"violin",getDefaultPoints:function(r){var i=r.size/2,t=[],e=Ol(r._size);return b(r.y,function(a,n){var o=e[n]*i,s=n===0,l=n===r.y.length-1;t.push({isMin:s,isMax:l,x:r.x-o,y:a}),t.unshift({isMin:s,isMax:l,x:r.x+o,y:a})}),t}});U("violin","violin",{draw:function(r,i){var t=J(r,!0,!0),e=this.parsePath(Sn(r.points));return i.addShape("path",{attrs:y(y({},t),{path:e}),name:"violin"})},getMarker:function(r){var i=r.color;return{symbol:"circle",style:{r:4,fill:i}}}});var Rl=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="violin",t.shapeType="violin",t.generatePoints=!0,t}return i.prototype.createShapePointsCfg=function(t){var e=r.prototype.createShapePointsCfg.call(this,t),a,n=this.getAttribute("size");if(n){a=this.getAttributeValues(n,t)[0];var o=this.coordinate,s=Ne(o);a=a/s}else this.defaultSize||(this.defaultSize=oi(this)),a=this.defaultSize;return e.size=a,e._size=T(t[W],[this._sizeField]),e},i.prototype.initAttributes=function(){var t=this.attributeOption,e=t.size?t.size.fields[0]:this._sizeField?this._sizeField:"size";this._sizeField=e,delete t.size,r.prototype.initAttributes.call(this)},i}(Ut);U("area","line",{draw:function(r,i){var t=yr(r,!0,!1,this),e=i.addShape({type:"path",attrs:t,name:"area"});return e},getMarker:function(r){var i=r.color;return{symbol:function(t,e,a){return a===void 0&&(a=5.5),[["M",t-a,e-4],["L",t+a,e-4],["L",t+a,e+4],["L",t-a,e+4],["Z"]]},style:{r:5,stroke:i,fill:null}}}});U("area","smooth",{draw:function(r,i){var t=this.coordinate,e=yr(r,!1,!0,this,Mn(t)),a=i.addShape({type:"path",attrs:e,name:"area"});return a},getMarker:function(r){var i=r.color;return{symbol:function(t,e,a){return a===void 0&&(a=5.5),[["M",t-a,e-4],["L",t+a,e-4],["L",t+a,e+4],["L",t-a,e+4],["Z"]]},style:{r:5,fill:i,fillOpacity:1}}}});U("area","smooth-line",{draw:function(r,i){var t=this.coordinate,e=yr(r,!0,!0,this,Mn(t)),a=i.addShape({type:"path",attrs:e,name:"area"});return a},getMarker:function(r){var i=r.color;return{symbol:function(t,e,a){return a===void 0&&(a=5.5),[["M",t-a,e-4],["L",t+a,e-4],["L",t+a,e+4],["L",t-a,e+4],["Z"]]},style:{r:5,stroke:i,fill:null}}}});function Hr(r,i){return["C",r.x*1/2+i.x*1/2,r.y,r.x*1/2+i.x*1/2,i.y,i.x,i.y]}function Yr(r,i){var t=[];t.push({x:i.x,y:i.y}),t.push(r);var e=["Q"];return b(t,function(a){e.push(a.x,a.y)}),e}function Dl(r,i,t){var e=Yr(i,t),a=[["M",r.x,r.y]];return a.push(e),a}function Gl(r,i){var t=Yr(r[1],i),e=Yr(r[3],i),a=[["M",r[0].x,r[0].y]];return a.push(e),a.push(["L",r[3].x,r[3].y]),a.push(["L",r[2].x,r[2].y]),a.push(t),a.push(["L",r[1].x,r[1].y]),a.push(["L",r[0].x,r[0].y]),a.push(["Z"]),a}U("edge","arc",{draw:function(r,i){var t=J(r,!0,!1,"lineWidth"),e=r.points,a=e.length>2?"weight":"normal",n;if(r.isInCircle){var o={x:0,y:1};return a==="normal"?n=Dl(e[0],e[1],o):(t.fill=t.stroke,n=Gl(e,o)),n=this.parsePath(n),i.addShape("path",{attrs:y(y({},t),{path:n})})}else{if(a==="normal")return e=this.parsePoints(e),n=za((e[1].x+e[0].x)/2,e[0].y,Math.abs(e[1].x-e[0].x)/2,Math.PI,Math.PI*2),i.addShape("path",{attrs:y(y({},t),{path:n})});var s=Hr(e[1],e[3]),l=Hr(e[2],e[0]);return n=[["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],s,["L",e[3].x,e[3].y],["L",e[2].x,e[2].y],l,["Z"]],n=this.parsePath(n),t.fill=t.stroke,i.addShape("path",{attrs:y(y({},t),{path:n})})}},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});function Vl(r,i){var t=Hr(r,i),e=[["M",r.x,r.y]];return e.push(t),e}U("edge","smooth",{draw:function(r,i){var t=J(r,!0,!1,"lineWidth"),e=r.points,a=this.parsePath(Vl(e[0],e[1]));return i.addShape("path",{attrs:y(y({},t),{path:a})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});var Ze=1/3;function zl(r,i){var t=[];t.push({x:r.x,y:r.y*(1-Ze)+i.y*Ze}),t.push({x:i.x,y:r.y*(1-Ze)+i.y*Ze}),t.push(i);var e=[["M",r.x,r.y]];return b(t,function(a){e.push(["L",a.x,a.y])}),e}U("edge","vhv",{draw:function(r,i){var t=J(r,!0,!1,"lineWidth"),e=r.points,a=this.parsePath(zl(e[0],e[1]));return i.addShape("path",{attrs:y(y({},t),{path:a})})},getMarker:function(r){return{symbol:"circle",style:{r:4.5,fill:r.color}}}});U("interval","funnel",{getPoints:function(r){return r.size=r.size*2,ai(r)},draw:function(r,i){var t=J(r,!1,!0),e=this.parsePath(Bn(r.points,r.nextPoints,!1)),a=i.addShape("path",{attrs:y(y({},t),{path:e}),name:"interval"});return a},getMarker:function(r){var i=r.color;return{symbol:"square",style:{r:4,fill:i}}}});U("interval","hollow-rect",{draw:function(r,i){var t=J(r,!0,!1),e=i,a=r==null?void 0:r.background;if(a){e=i.addGroup();var n=Tn(r),o=Fn(r,this.parsePoints(r.points),this.coordinate);e.addShape("path",{attrs:y(y({},n),{path:o}),zIndex:-1,name:Jr})}var s=this.parsePath(ni(r.points)),l=e.addShape("path",{attrs:y(y({},t),{path:s}),name:"interval"});return a?e:l},getMarker:function(r){var i=r.color,t=r.isInPolar;return t?{symbol:"circle",style:{r:4.5,stroke:i,fill:null}}:{symbol:"square",style:{r:4,stroke:i,fill:null}}}});function Hl(r){var i=r.x,t=r.y,e=r.y0;return O(t)?t.map(function(a,n){return{x:O(i)?i[n]:i,y:a}}):[{x:i,y:e},{x:i,y:t}]}U("interval","line",{getPoints:function(r){return Hl(r)},draw:function(r,i){var t=J(r,!0,!1,"lineWidth"),e=pt(y({},t),["fill"]),a=this.parsePath(ni(r.points,!1)),n=i.addShape("path",{attrs:y(y({},e),{path:a}),name:"interval"});return n},getMarker:function(r){var i=r.color;return{symbol:function(t,e,a){return[["M",t,e-a],["L",t,e+a]]},style:{r:5,stroke:i}}}});U("interval","pyramid",{getPoints:function(r){return r.size=r.size*2,ai(r)},draw:function(r,i){var t=J(r,!1,!0),e=this.parsePath(Bn(r.points,r.nextPoints,!0)),a=i.addShape("path",{attrs:y(y({},t),{path:e}),name:"interval"});return a},getMarker:function(r){var i=r.color;return{symbol:"square",style:{r:4,fill:i}}}});function Yl(r){var i,t=r.x,e=r.y,a=r.y0,n=r.size,o,s;O(e)?(i=P(e,2),o=i[0],s=i[1]):(o=a,s=e);var l=t+n/2,h=t-n/2;return[{x:t,y:o},{x:t,y:s},{x:h,y:o},{x:l,y:o},{x:h,y:s},{x:l,y:s}]}function Xl(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y]]}U("interval","tick",{getPoints:function(r){return Yl(r)},draw:function(r,i){var t=J(r,!0,!1),e=this.parsePath(Xl(r.points)),a=i.addShape("path",{attrs:y(y({},t),{path:e}),name:"interval"});return a},getMarker:function(r){var i=r.color;return{symbol:function(t,e,a){return[["M",t-a/2,e-a],["L",t+a/2,e-a],["M",t,e-a],["L",t,e+a],["M",t-a/2,e+a],["L",t+a/2,e+a]]},style:{r:5,stroke:i}}}});var Nl=function(r,i,t){var e=r.x,a=r.y,n=i.x,o=i.y,s;switch(t){case"hv":s=[{x:n,y:a}];break;case"vh":s=[{x:e,y:o}];break;case"hvh":var l=(n+e)/2;s=[{x:l,y:a},{x:l,y:o}];break;case"vhv":var h=(a+o)/2;s=[{x:e,y:h},{x:n,y:h}];break}return s};function Wl(r,i){var t=[];return b(r,function(e,a){var n=r[a+1];if(t.push(e),n){var o=Nl(e,n,i);t=t.concat(o)}}),t}function jl(r){return r.map(function(i,t){return t===0?["M",i.x,i.y]:["L",i.x,i.y]})}function Ul(r,i){var t=ei(r.points,r.connectNulls,r.showSinglePoint),e=[];return b(t,function(a){var n=Wl(a,i);e=e.concat(jl(n))}),y(y({},J(r,!0,!1,"lineWidth")),{path:e})}b(["hv","vh","hvh","vhv"],function(r){U("line",r,{draw:function(i,t){var e=Ul(i,r),a=t.addShape({type:"path",attrs:e,name:"line"});return a},getMarker:function(i){return Ln(i,r)}})});b(Bl,function(r){U("point",r,{draw:function(i,t){return si(this,i,t,r,!0)},getMarker:function(i){var t=i.color;return{symbol:ee[r],style:{r:4.5,stroke:t,fill:null}}}})});U("point","image",{draw:function(r,i){var t,e,a=J(r,!1,!1,"r").r,n=this.parsePoints(r.points),o=n[0];if(r.isStack)o=n[1];else if(n.length>1){var s=i.addGroup();try{for(var l=H(n),h=l.next();!h.done;h=l.next()){var u=h.value;s.addShape("image",{attrs:{x:u.x-a/2,y:u.y-a,width:a,height:a,img:r.shape[1]}})}}catch(c){t={error:c}}finally{try{h&&!h.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}return s}return i.addShape("image",{attrs:{x:o.x-a/2,y:o.y-a,width:a,height:a,img:r.shape[1]}})},getMarker:function(r){var i=r.color;return{symbol:"circle",style:{r:4.5,fill:i}}}});b(En,function(r){U("point",r,{draw:function(i,t){return si(this,i,t,r,!1)},getMarker:function(i){var t=i.color;return{symbol:ee[r]||r,style:{r:4.5,fill:t}}}})});function Ji(r){var i=O(r)?r:[r],t=i[0],e=i[i.length-1],a=i.length>1?i[1]:t,n=i.length>3?i[3]:e,o=i.length>2?i[2]:a;return{min:t,max:e,min1:a,max1:n,median:o}}function _i(r,i,t){var e=t/2,a;if(O(i)){var n=Ji(i),o=n.min,s=n.max,l=n.median,h=n.min1,u=n.max1,c=r-e,v=r+e;a=[[c,s],[v,s],[r,s],[r,u],[c,h],[c,u],[v,u],[v,h],[r,h],[r,o],[c,o],[v,o],[c,l],[v,l]]}else{i=V(i)?.5:i;var f=Ji(r),o=f.min,s=f.max,l=f.median,h=f.min1,u=f.max1,p=i-e,d=i+e;a=[[o,p],[o,d],[o,i],[h,i],[h,p],[h,d],[u,d],[u,p],[u,i],[s,i],[s,p],[s,d],[l,p],[l,d]]}return a.map(function(g){return{x:g[0],y:g[1]}})}function ql(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y],["L",r[6].x,r[6].y],["L",r[7].x,r[7].y],["L",r[4].x,r[4].y],["Z"],["M",r[8].x,r[8].y],["L",r[9].x,r[9].y],["M",r[10].x,r[10].y],["L",r[11].x,r[11].y],["M",r[12].x,r[12].y],["L",r[13].x,r[13].y]]}U("schema","box",{getPoints:function(r){var i=r.x,t=r.y,e=r.size;return _i(i,t,e)},draw:function(r,i){var t=J(r,!0,!1),e=this.parsePath(ql(r.points)),a=i.addShape("path",{attrs:y(y({},t),{path:e,name:"schema"})});return a},getMarker:function(r){var i=r.color;return{symbol:function(t,e,a){var n=[e-6,e-3,e,e+3,e+6],o=_i(t,n,a);return[["M",o[0].x+1,o[0].y],["L",o[1].x-1,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["M",o[4].x,o[4].y],["L",o[5].x,o[5].y],["L",o[6].x,o[6].y],["L",o[7].x,o[7].y],["L",o[4].x,o[4].y],["Z"],["M",o[8].x,o[8].y],["L",o[9].x,o[9].y],["M",o[10].x+1,o[10].y],["L",o[11].x-1,o[11].y],["M",o[12].x,o[12].y],["L",o[13].x,o[13].y]]},style:{r:6,lineWidth:1,stroke:i}}}});function Zl(r){var i=O(r)?r:[r],t=i.sort(function(e,a){return a-e});return Wo(t,4,t[t.length-1])}function ta(r,i,t){var e=Zl(i);return[{x:r,y:e[0]},{x:r,y:e[1]},{x:r-t/2,y:e[2]},{x:r-t/2,y:e[1]},{x:r+t/2,y:e[1]},{x:r+t/2,y:e[2]},{x:r,y:e[2]},{x:r,y:e[3]}]}function $l(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]}U("schema","candle",{getPoints:function(r){var i=r.x,t=r.y,e=r.size;return ta(i,t,e)},draw:function(r,i){var t=J(r,!0,!0),e=this.parsePath($l(r.points)),a=i.addShape("path",{attrs:y(y({},t),{path:e,name:"schema"})});return a},getMarker:function(r){var i=r.color;return{symbol:function(t,e,a){var n=[e+7.5,e+3,e-3,e-7.5],o=ta(t,n,a);return[["M",o[0].x,o[0].y],["L",o[1].x,o[1].y],["M",o[2].x,o[2].y],["L",o[3].x,o[3].y],["L",o[4].x,o[4].y],["L",o[5].x,o[5].y],["Z"],["M",o[6].x,o[6].y],["L",o[7].x,o[7].y]]},style:{lineWidth:1,stroke:i,fill:i,r:6}}}});function Kl(r,i){var t=Math.abs(r[0].x-r[2].x),e=Math.abs(r[0].y-r[2].y),a=Math.min(t,e);i&&(a=Pt(i,0,Math.min(t,e))),a=a/2;var n=(r[0].x+r[2].x)/2,o=(r[0].y+r[2].y)/2;return{x:n-a,y:o-a,width:a*2,height:a*2}}U("polygon","square",{draw:function(r,i){if(!It(r.points)){var t=J(r,!0,!0),e=this.parsePoints(r.points);return i.addShape("rect",{attrs:y(y({},t),Kl(e,r.size)),name:"polygon"})}},getMarker:function(r){var i=r.color;return{symbol:"square",style:{r:4,fill:i}}}});U("violin","smooth",{draw:function(r,i){var t=J(r,!0,!0),e=this.parsePath(bn(r.points));return i.addShape("path",{attrs:y(y({},t),{path:e})})},getMarker:function(r){var i=r.color;return{symbol:"circle",style:{stroke:null,r:4,fill:i}}}});U("violin","hollow",{draw:function(r,i){var t=J(r,!0,!1),e=this.parsePath(Sn(r.points));return i.addShape("path",{attrs:y(y({},t),{path:e})})},getMarker:function(r){var i=r.color;return{symbol:"circle",style:{r:4,fill:null,stroke:i}}}});U("violin","hollow-smooth",{draw:function(r,i){var t=J(r,!0,!1),e=this.parsePath(bn(r.points));return i.addShape("path",{attrs:y(y({},t),{path:e})})},getMarker:function(r){var i=r.color;return{symbol:"circle",style:{r:4,fill:null,stroke:i}}}});var Ql=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.getLabelValueDir=function(t){var e="y",a=t.points;return a[0][e]<=a[2][e]?1:-1},i.prototype.getLabelOffsetPoint=function(t,e,a,n){var o,s=r.prototype.getLabelOffsetPoint.call(this,t,e,a),l=this.getCoordinate(),h=l.isTransposed,u=h?"x":"y",c=this.getLabelValueDir(t.mappingData);return s=y(y({},s),(o={},o[u]=s[u]*c,o)),l.isReflect("x")&&(s=y(y({},s),{x:s.x*-1})),l.isReflect("y")&&(s=y(y({},s),{y:s.y*-1})),s},i.prototype.getThemedLabelCfg=function(t){var e=this.geometry,a=this.getDefaultLabelCfg(),n=e.theme;return I({},a,n.labels,t.position==="middle"?{offset:0}:{},t)},i.prototype.setLabelPosition=function(t,e,a,n){var o=this.getCoordinate(),s=o.isTransposed,l=e.points,h=o.convert(l[0]),u=o.convert(l[2]),c=this.getLabelValueDir(e),v,f,p,d,g=O(e.shape)?e.shape[0]:e.shape;if(g==="funnel"||g==="pyramid"){var m=T(e,"nextPoints"),w=T(e,"points");if(m){var x=o.convert(w[0]),C=o.convert(w[1]),S=o.convert(m[0]),L=o.convert(m[1]);s?(v=Math.min(S.y,x.y),p=Math.max(S.y,x.y),f=(C.x+L.x)/2,d=(x.x+S.x)/2):(v=Math.min((C.y+L.y)/2,(x.y+S.y)/2),p=Math.max((C.y+L.y)/2,(x.y+S.y)/2),f=L.x,d=x.x)}else v=Math.min(u.y,h.y),p=Math.max(u.y,h.y),f=u.x,d=h.x}else v=Math.min(u.y,h.y),p=Math.max(u.y,h.y),f=u.x,d=h.x;switch(n){case"right":t.x=f,t.y=(v+p)/2,t.textAlign=T(t,"textAlign",c>0?"left":"right");break;case"left":t.x=d,t.y=(v+p)/2,t.textAlign=T(t,"textAlign",c>0?"left":"right");break;case"bottom":s&&(t.x=(f+d)/2),t.y=p,t.textAlign=T(t,"textAlign","center"),t.textBaseline=T(t,"textBaseline",c>0?"bottom":"top");break;case"middle":s&&(t.x=(f+d)/2),t.y=(v+p)/2,t.textAlign=T(t,"textAlign","center"),t.textBaseline=T(t,"textBaseline","middle");break;case"top":s&&(t.x=(f+d)/2),t.y=v,t.textAlign=T(t,"textAlign","center"),t.textBaseline=T(t,"textBaseline",c>0?"bottom":"top");break}},i}(ti),$e=Math.PI/2,kn=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.getLabelOffset=function(t){var e=this.getCoordinate(),a=0;if(ht(t))a=t;else if(et(t)&&t.indexOf("%")!==-1){var n=e.getRadius();e.innerRadius>0&&(n=n*(1-e.innerRadius)),a=parseFloat(t)*.01*n}return a},i.prototype.getLabelItems=function(t){var e=r.prototype.getLabelItems.call(this,t),a=this.geometry.getYScale();return we(e,function(n){if(n&&a){var o=a.scale(T(n.data,a.field));return y(y({},n),{percent:o})}return n})},i.prototype.getLabelAlign=function(t){var e=this.getCoordinate(),a;if(t.labelEmit)a=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!e.isTransposed)a="center";else{var n=e.getCenter(),o=t.offset;Math.abs(t.x-n.x)<1?a="center":t.angle>Math.PI||t.angle<=0?a=o>0?"left":"right":a=o>0?"right":"left"}return a},i.prototype.getLabelPoint=function(t,e,a){var n=1,o,s=t.content[a];this.isToMiddle(e)?o=this.getMiddlePoint(e.points):(t.content.length===1&&a===0?a=1:a===0&&(n=-1),o=this.getArcPoint(e,a));var l=t.offset*n,h=this.getPointAngle(o),u=t.labelEmit,c=this.getCirclePoint(h,l,o,u);return c.r===0?c.content="":(c.content=s,c.angle=h,c.color=e.color),c.rotate=t.autoRotate?this.getLabelRotate(h,l,u):t.rotate,c.start={x:o.x,y:o.y},c},i.prototype.getArcPoint=function(t,e){return e===void 0&&(e=0),!O(t.x)&&!O(t.y)?{x:t.x,y:t.y}:{x:O(t.x)?t.x[e]:t.x,y:O(t.y)?t.y[e]:t.y}},i.prototype.getPointAngle=function(t){return de(this.getCoordinate(),t)},i.prototype.getCirclePoint=function(t,e,a,n){var o=this.getCoordinate(),s=o.getCenter(),l=pr(o,a);if(l===0)return y(y({},s),{r:l});var h=t;if(o.isTransposed&&l>e&&!n){var u=Math.asin(e/(2*l));h=t+u*2}else l=l+e;return{x:s.x+l*Math.cos(h),y:s.y+l*Math.sin(h),r:l}},i.prototype.getLabelRotate=function(t,e,a){var n=t+$e;return a&&(n-=$e),n&&(n>$e?n=n-Math.PI:n<-$e&&(n=n+Math.PI)),n},i.prototype.getMiddlePoint=function(t){var e=this.getCoordinate(),a=t.length,n={x:0,y:0};return b(t,function(o){n.x+=o.x,n.y+=o.y}),n.x/=a,n.y/=a,n=e.convert(n),n},i.prototype.isToMiddle=function(t){return t.x.length>2},i}(ti),Jl=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return i.prototype.getDefaultLabelCfg=function(t,e){var a=r.prototype.getDefaultLabelCfg.call(this,t,e);return I({},a,T(this.geometry.theme,"pieLabels",{}))},i.prototype.getLabelOffset=function(t){return r.prototype.getLabelOffset.call(this,t)||0},i.prototype.getLabelRotate=function(t,e,a){var n;return e<0&&(n=t,n>Math.PI/2&&(n=n-Math.PI),n<-Math.PI/2&&(n=n+Math.PI)),n},i.prototype.getLabelAlign=function(t){var e=this.getCoordinate(),a=e.getCenter(),n;return t.angle<=Math.PI/2&&t.x>=a.x?n="left":n="right",t.offset<=0&&(n==="right"?n="left":n="right"),n},i.prototype.getArcPoint=function(t){return t},i.prototype.getPointAngle=function(t){var e=this.getCoordinate(),a={x:O(t.x)?t.x[0]:t.x,y:t.y[0]},n={x:O(t.x)?t.x[1]:t.x,y:t.y[1]},o,s=de(e,a);if(t.points&&t.points[0].y===t.points[1].y)o=s;else{var l=de(e,n);s>=l&&(l=l+Math.PI*2),o=s+(l-s)/2}return o},i.prototype.getCirclePoint=function(t,e){var a=this.getCoordinate(),n=a.getCenter(),o=a.getRadius()+e;return y(y({},_(n.x,n.y,o,t)),{angle:t,r:o})},i}(kn),ea=4;function _l(r,i,t,e,a,n){var o,s,l=!0,h=e.start,u=e.end,c=Math.min(h.y,u.y),v=Math.abs(h.y-u.y),f,p=0,d=Number.MIN_VALUE,g=i.map(function(M){return M.y>p&&(p=M.y),M.y<d&&(d=M.y),{size:t,targets:[M.y-c]}});for(d-=c,p-c>v&&(v=p-c);l;)for(g.forEach(function(M){var A=(Math.min.apply(d,M.targets)+Math.max.apply(d,M.targets))/2;M.pos=Math.min(Math.max(d,A-M.size/2),v-M.size)}),l=!1,f=g.length;f--;)if(f>0){var m=g[f-1],w=g[f];m.pos+m.size>w.pos&&(m.size+=w.size,m.targets=m.targets.concat(w.targets),m.pos+m.size>v&&(m.pos=v-m.size),g.splice(f,1),l=!0)}f=0,g.forEach(function(M){var A=c+t/2;M.targets.forEach(function(){i[f].y=M.pos+A,A+=t,f++})});var x={};try{for(var C=H(r),S=C.next();!S.done;S=C.next()){var L=S.value;x[L.get("id")]=L}}catch(M){o={error:M}}finally{try{S&&!S.done&&(s=C.return)&&s.call(C)}finally{if(o)throw o.error}}i.forEach(function(M){var A=M.r*M.r,B=Math.pow(Math.abs(M.y-a.y),2);if(A<B)M.x=a.x;else{var F=Math.sqrt(A-B);n?M.x=a.x+F:M.x=a.x-F}var R=x[M.id];R.attr("x",M.x),R.attr("y",M.y);var D=kt(R.getChildren(),function(z){return z.get("type")==="text"});D&&(D.attr("y",M.y),D.attr("x",M.x))})}function th(r,i,t,e){if(!(!r.length||!i.length)){var a=r[0]?r[0].offset:0,n=i[0].get("coordinate"),o=n.getRadius(),s=n.getCenter();if(a>0){var l=14,h=o+a,u=h*2+l*2,c={start:n.start,end:n.end},v=[[],[]];r.forEach(function(f){!f||(f.textAlign==="right"?v[0].push(f):v[1].push(f))}),v.forEach(function(f,p){var d=u/l;f.length>d&&(f.sort(function(g,m){return m["..percent"]-g["..percent"]}),f.splice(d,f.length-d)),f.sort(function(g,m){return g.y-m.y}),_l(i,f,l,c,s,p)})}b(r,function(f){if(f&&f.labelLine){var p=f.offset,d=f.angle,g=_(s.x,s.y,o,d),m=_(s.x,s.y,o+p/2,d),w=f.x+T(f,"offsetX",0),x=f.y+T(f,"offsetY",0),C={x:w-Math.cos(d)*ea,y:x-Math.sin(d)*ea};yt(f.labelLine)||(f.labelLine={}),f.labelLine.path=["M ".concat(g.x),"".concat(g.y," Q").concat(m.x),"".concat(m.y," ").concat(C.x),C.y].join(",")}})}}function Pn(r,i,t){var e=r.filter(function(p){return!p.invisible});e.sort(function(p,d){return p.y-d.y});var a=!0,n=t.minY,o=t.maxY,s=Math.abs(n-o),l,h=0,u=Number.MIN_VALUE,c=e.map(function(p){return p.y>h&&(h=p.y),p.y<u&&(u=p.y),{content:p.content,size:i,targets:[p.y-n],pos:null}});for(u-=n,h-n>s&&(s=h-n);a;)for(c.forEach(function(p){var d=(Math.min.apply(u,p.targets)+Math.max.apply(u,p.targets))/2;p.pos=Math.min(Math.max(u,d-p.size/2),s-p.size),p.pos=Math.max(0,p.pos)}),a=!1,l=c.length;l--;)if(l>0){var v=c[l-1],f=c[l];v.pos+v.size>f.pos&&(v.size+=f.size,v.targets=v.targets.concat(f.targets),v.pos+v.size>s&&(v.pos=s-v.size),c.splice(l,1),a=!0)}l=0,c.forEach(function(p){var d=n+i/2;p.targets.forEach(function(){e[l].y=p.pos+d,d+=i,l++})})}var ra=4;function eh(r,i){var t=i.getCenter(),e=i.getRadius();if(r&&r.labelLine){var a=r.angle,n=r.offset,o=_(t.x,t.y,e,a),s=r.x+T(r,"offsetX",0)*(Math.cos(a)>0?1:-1),l=r.y+T(r,"offsetY",0)*(Math.sin(a)>0?1:-1),h={x:s-Math.cos(a)*ra,y:l-Math.sin(a)*ra},u=r.labelLine.smooth,c=[],v=h.x-t.x,f=h.y-t.y,p=Math.atan(f/v);if(v<0&&(p+=Math.PI),u===!1){yt(r.labelLine)||(r.labelLine={});var d=0;(a<0&&a>-Math.PI/2||a>Math.PI*1.5)&&h.y>o.y&&(d=1),a>=0&&a<Math.PI/2&&h.y>o.y&&(d=1),a>=Math.PI/2&&a<Math.PI&&o.y>h.y&&(d=1),(a<-Math.PI/2||a>=Math.PI&&a<Math.PI*1.5)&&o.y>h.y&&(d=1);var g=n/2>4?4:Math.max(n/2-1,0),m=_(t.x,t.y,e+g,a),w=_(t.x,t.y,e+n/2,p),x=0;c.push("M ".concat(o.x," ").concat(o.y)),c.push("L ".concat(m.x," ").concat(m.y)),c.push("A ".concat(t.x," ").concat(t.y," 0 ").concat(x," ").concat(d," ").concat(w.x," ").concat(w.y)),c.push("L ".concat(h.x," ").concat(h.y))}else{var m=_(t.x,t.y,e+(n/2>4?4:Math.max(n/2-1,0)),a),C=o.x<t.x?1:-1;c.push("M ".concat(h.x," ").concat(h.y));var S=(o.y-t.y)/(o.x-t.x),L=(h.y-t.y)/(h.x-t.x);Math.abs(S-L)>Math.pow(Math.E,-16)&&c.push.apply(c,["C",h.x+C*4,h.y,2*m.x-o.x,2*m.y-o.y,o.x,o.y]),c.push("L ".concat(o.x," ").concat(o.y))}r.labelLine.path=c.join(" ")}}function rh(r,i,t,e){var a,n,o=re(r,function(A){return!V(A)}),s=i[0]&&i[0].get("coordinate");if(!!s){var l=s.getCenter(),h=s.getRadius(),u={};try{for(var c=H(i),v=c.next();!v.done;v=c.next()){var f=v.value;u[f.get("id")]=f}}catch(A){a={error:A}}finally{try{v&&!v.done&&(n=c.return)&&n.call(c)}finally{if(a)throw a.error}}var p=T(o[0],"labelHeight",14),d=T(o[0],"offset",0);if(!(d<=0)){var g="left",m="right",w=Xe(o,function(A){return A.x<l.x?g:m}),x=s.start,C=s.end,S=Math.min((h+d+p)*2,s.getHeight()),L=S/2,M={minX:x.x,maxX:C.x,minY:l.y-L,maxY:l.y+L};b(w,function(A,B){var F=Math.floor(S/p);A.length>F&&(A.sort(function(R,D){return D.percent-R.percent}),b(A,function(R,D){D+1>F&&(u[R.id].set("visible",!1),R.invisible=!0)})),Pn(A,p,M)}),b(w,function(A,B){b(A,function(F){var R=B===m,D=u[F.id],z=D.getChildByIndex(0);if(z){var X=h+d,K=F.y-l.y,ot=Math.pow(X,2),xt=Math.pow(K,2),Ft=ot-xt>0?ot-xt:0,rt=Math.sqrt(Ft),ne=Math.abs(Math.cos(F.angle)*X);R?F.x=l.x+Math.max(rt,ne):F.x=l.x-Math.max(rt,ne)}z&&(z.attr("y",F.y),z.attr("x",F.x)),eh(F,s)})})}}}var Xr=4,ih=4,ia=4;function ah(r,i,t){var e=i.getCenter(),a=i.getRadius(),n={x:r.x-(t?ia:-ia),y:r.y},o=_(e.x,e.y,a+Xr,r.angle),s={x:n.x,y:n.y},l={x:o.x,y:o.y},h=_(e.x,e.y,a,r.angle),u="";if(n.y!==o.y){var c=t?4:-4;s.y=n.y,r.angle<0&&r.angle>=-Math.PI/2&&(s.x=Math.max(o.x,n.x-c),n.y<o.y?l.y=s.y:(l.y=o.y,l.x=Math.max(l.x,s.x-c))),r.angle>0&&r.angle<Math.PI/2&&(s.x=Math.max(o.x,n.x-c),n.y>o.y?l.y=s.y:(l.y=o.y,l.x=Math.max(l.x,s.x-c))),r.angle>Math.PI/2&&(s.x=Math.min(o.x,n.x-c),n.y>o.y?l.y=s.y:(l.y=o.y,l.x=Math.min(l.x,s.x-c))),r.angle<-Math.PI/2&&(s.x=Math.min(o.x,n.x-c),n.y<o.y?l.y=s.y:(l.y=o.y,l.x=Math.min(l.x,s.x-c)))}u=["M ".concat(n.x,",").concat(n.y),"L ".concat(s.x,",").concat(s.y),"L ".concat(l.x,",").concat(l.y),"L ".concat(o.x,",").concat(o.y),"L ".concat(h.x,",").concat(h.y)].join(" "),r.labelLine=I({},r.labelLine,{path:u})}function nh(r,i,t,e){var a,n,o=i[0]&&i[0].get("coordinate");if(!!o){var s=o.getCenter(),l=o.getRadius(),h={};try{for(var u=H(i),c=u.next();!c.done;c=u.next()){var v=c.value;h[v.get("id")]=v}}catch(A){a={error:A}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(a)throw a.error}}var f=T(r[0],"labelHeight",14),p=Math.max(T(r[0],"offset",0),Xr);b(r,function(A){if(!!A){var B=T(h,[A.id]);if(!!B){var F=A.x>s.x||A.x===s.x&&A.y>s.y,R=V(A.offsetX)?ih:A.offsetX,D=_(s.x,s.y,l+Xr,A.angle),z=p+R;A.x=s.x+(F?1:-1)*(l+z),A.y=D.y}}});var d=o.start,g=o.end,m="left",w="right",x=Xe(r,function(A){return A.x<s.x?m:w}),C=(l+p)*2+f;b(x,function(A){var B=A.length*f;B>C&&(C=Math.min(B,Math.abs(d.y-g.y)))});var S={minX:d.x,maxX:g.x,minY:s.y-C/2,maxY:s.y+C/2};b(x,function(A,B){var F=C/f;A.length>F&&(A.sort(function(R,D){return D.percent-R.percent}),b(A,function(R,D){D>F&&(h[R.id].set("visible",!1),R.invisible=!0)})),Pn(A,f,S)});var L=S.minY,M=S.maxY;b(x,function(A,B){var F=B===w;b(A,function(R){var D=T(h,R&&[R.id]);if(!!D){if(R.y<L||R.y>M){D.set("visible",!1);return}var z=D.getChildByIndex(0),X=z.getCanvasBBox(),K={x:F?X.x:X.maxX,y:X.y+X.height/2};gr(z,R.x-K.x,R.y-K.y),R.labelLine&&ah(R,o,F)}})})}}function oh(r,i,t,e){b(i,function(a){var n=e.minX,o=e.minY,s=e.maxX,l=e.maxY,h=a.getCanvasBBox(),u=h.minX,c=h.minY,v=h.maxX,f=h.maxY,p=h.x,d=h.y,g=h.width,m=h.height,w=p,x=d;(u<n||v<n)&&(w=n),(c<o||f<o)&&(x=o),u>s?w=s-g:v>s&&(w=w-(v-s)),c>l?x=l-m:f>l&&(x=x-(f-l)),(w!==p||x!==d)&&gr(a,w-p,x-d)})}function sh(r,i,t,e){b(i,function(a,n){var o=a.getCanvasBBox(),s=t[n].getBBox();(o.minX<s.minX||o.minY<s.minY||o.maxX>s.maxX||o.maxY>s.maxY)&&a.remove(!0)})}var lh=100,In=function(){function r(i){i===void 0&&(i={}),this.bitmap={};var t=i.xGap,e=t===void 0?1:t,a=i.yGap,n=a===void 0?8:a;this.xGap=e,this.yGap=n}return r.prototype.hasGap=function(i){for(var t=!0,e=this.bitmap,a=Math.round(i.minX),n=Math.round(i.maxX),o=Math.round(i.minY),s=Math.round(i.maxY),l=a;l<=n;l+=1){if(!e[l]){e[l]={};continue}if(l===a||l===n){for(var h=o;h<=s;h++)if(e[l][h]){t=!1;break}}else if(e[l][o]||e[l][s]){t=!1;break}}return t},r.prototype.fillGap=function(i){for(var t=this.bitmap,e=Math.round(i.minX),a=Math.round(i.maxX),n=Math.round(i.minY),o=Math.round(i.maxY),s=e;s<=a;s+=1)t[s]||(t[s]={});for(var s=e;s<=a;s+=this.xGap){for(var l=n;l<=o;l+=this.yGap)t[s][l]=!0;t[s][o]=!0}if(this.yGap!==1)for(var s=n;s<=o;s+=1)t[e][s]=!0,t[a][s]=!0;if(this.xGap!==1)for(var s=e;s<=a;s+=1)t[s][n]=!0,t[s][o]=!0},r.prototype.destroy=function(){this.bitmap={}},r}();function hh(r,i,t){t===void 0&&(t=lh);var e=-1,a=r.attr(),n=a.x,o=a.y,s=r.getCanvasBBox(),l=Math.sqrt(s.width*s.width+s.height*s.height),h,u=-e,c=0,v=0,f=function(m){var w=m*.1;return[w*Math.cos(w),w*Math.sin(w)]};if(i.hasGap(s))return i.fillGap(s),!0;for(var p=!1,d=0,g={};Math.min(Math.abs(c),Math.abs(v))<l&&d<t;)if(h=f(u+=e),c=~~h[0],v=~~h[1],!(!c&&!v||g["".concat(c,"-").concat(v)])&&(r.attr({x:n+c,y:o+v}),c+v<0&&r.attr("textAlign","right"),d++,i.hasGap(r.getCanvasBBox()))){i.fillGap(r.getCanvasBBox()),p=!0,g["".concat(c,"-").concat(v)]=!0;break}return p}function ch(r,i,t,e){var a=r.getCanvasBBox(),n=a.width,o=a.height,s={x:i,y:t,textAlign:"center"};switch(e){case 0:s.y-=o+1,s.x+=1,s.textAlign="left";break;case 1:s.y-=o+1,s.x-=1,s.textAlign="right";break;case 2:s.y+=o+1,s.x-=1,s.textAlign="right";break;case 3:s.y+=o+1,s.x+=1,s.textAlign="left";break;case 5:s.y-=o*2+2;break;case 6:s.y+=o*2+2;break;case 7:s.x+=n+1,s.textAlign="left";break;case 8:s.x-=n+1,s.textAlign="right";break}return r.attr(s),r.getCanvasBBox()}function uh(r,i,t,e){var a=new In;b(i,function(n){var o=n.find(function(s){return s.get("type")==="text"});hh(o,a)||n.remove(!0)}),a.destroy()}function vh(r,i,t,e){var a=new In;b(i,function(n){for(var o=n.find(function(f){return f.get("type")==="text"}),s=o.attr(),l=s.x,h=s.y,u=!1,c=0;c<=8;c++){var v=ch(o,l,h,c);if(a.hasGap(v)){a.fillGap(v),u=!0;break}}u||n.remove(!0)}),a.destroy()}function fh(r,i){return(r[0]||0)*(i[0]||0)+(r[1]||0)*(i[1]||0)+(r[2]||0)*(i[2]||0)}function aa(r){if(r.length>4)return[];var i=function(a,n){return[n.x-a.x,n.y-a.y]},t=i(r[0],r[1]),e=i(r[1],r[2]);return[t,e]}function Ke(r,i,t){i===void 0&&(i=0),t===void 0&&(t={x:0,y:0});var e=r.x,a=r.y;return{x:(e-t.x)*Math.cos(-i)+(a-t.y)*Math.sin(-i)+t.x,y:(t.x-e)*Math.sin(-i)+(a-t.y)*Math.cos(-i)+t.y}}function na(r){var i=[{x:r.x,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x+r.width,y:r.y+r.height},{x:r.x,y:r.y+r.height}],t=r.rotation;return t?[Ke(i[0],t,i[0]),Ke(i[1],t,i[0]),Ke(i[2],t,i[0]),Ke(i[3],t,i[0])]:i}function oa(r,i){if(r.length>4)return{min:0,max:0};var t=[];return r.forEach(function(e){t.push(fh([e.x,e.y],i))}),{min:Math.min.apply(Math,$([],P(t),!1)),max:Math.max.apply(Math,$([],P(t),!1))}}function ph(r,i){return r.max>i.min&&r.min<i.max}function dh(r){return typeof r=="number"&&!Number.isNaN(r)&&r!==1/0&&r!==-1/0}function sa(r){return["x","y","width","height"].every(function(i){return dh(r[i])})}function gh(r,i,t){return t===void 0&&(t=0),!(i.x>r.x+r.width+t||i.x+i.width<r.x-t||i.y>r.y+r.height+t||i.y+i.height<r.y-t)}function yh(r,i,t){if(t===void 0&&(t=0),!sa(r)||!sa(i))return!1;if(!r.rotation&&!i.rotation)return gh(r,i,t);for(var e=na(r),a=na(i),n=aa(e).concat(aa(a)),o=0;o<n.length;o++){var s=n[o],l=oa(e,s),h=oa(a,s);if(!ph(l,h))return!1}return!0}var mh=function(){function r(i){var t=this;this.queue=[],this.worker=new Worker(i),this.worker.onmessage=function(e){var a;(a=t.queue.shift())===null||a===void 0||a.resolve(e)},this.worker.onmessageerror=function(e){var a;console.warn("[AntV G2] Web worker is not available"),(a=t.queue.shift())===null||a===void 0||a.reject(e)}}return r.prototype.post=function(i,t){var e=this;return new Promise(function(a,n){e.queue.push({resolve:a,reject:n});try{e.worker.postMessage(i)}catch{console.warn("[AntV G2] Web worker is not available"),j(t)&&t()}})},r.prototype.destroy=function(){this.worker.terminate()},r}();function xh(r){if(!(typeof window>"u")){var i;try{i=new Blob([r.toString()],{type:"application/javascript"})}catch{i=new window.BlobBuilder,i.append(r.toString()),i=i.getBlob()}return new mh(URL.createObjectURL(i))}}var wh=function(r){function i(){function h(x,C){return(x[0]||0)*(C[0]||0)+(x[1]||0)*(C[1]||0)+(x[2]||0)*(C[2]||0)}function u(x){if(x.length>4)return[];var C=function(M,A){return[A.x-M.x,A.y-M.y]},S=C(x[0],x[1]),L=C(x[1],x[2]);return[S,L]}function c(x,C,S){C===void 0&&(C=0),S===void 0&&(S={x:0,y:0});var L=x.x,M=x.y;return{x:(L-S.x)*Math.cos(-C)+(M-S.y)*Math.sin(-C)+S.x,y:(S.x-L)*Math.sin(-C)+(M-S.y)*Math.cos(-C)+S.y}}function v(x){var C=[{x:x.x,y:x.y},{x:x.x+x.width,y:x.y},{x:x.x+x.width,y:x.y+x.height},{x:x.x,y:x.y+x.height}],S=x.rotation;return S?[c(C[0],S,C[0]),c(C[1],S,C[0]),c(C[2],S,C[0]),c(C[3],S,C[0])]:C}function f(x,C){if(x.length>4)return{min:0,max:0};var S=[];return x.forEach(function(L){S.push(h([L.x,L.y],C))}),{min:Math.min.apply(null,S),max:Math.max.apply(null,S)}}function p(x,C){return x.max>C.min&&x.min<C.max}function d(x){return typeof x=="number"&&!Number.isNaN(x)&&x!==1/0&&x!==-1/0}function g(x){return["x","y","width","height"].every(function(C){return d(x[C])})}function m(x,C,S){return S===void 0&&(S=0),!(C.x>x.x+x.width+S||C.x+C.width<x.x-S||C.y>x.y+x.height+S||C.y+C.height<x.y-S)}function w(x,C,S){if(S===void 0&&(S=0),!g(x)||!g(C))return!1;if(!x.rotation&&!C.rotation)return m(x,C,S);for(var L=v(x),M=v(C),A=u(L).concat(u(M)),B=0;B<A.length;B++){var F=A[B],R=f(L,F),D=f(M,F);if(!p(R,D))return!1}return!0}return{intersect:w}}var t=i().intersect;function e(h){for(var u=h.slice(),c=0;c<u.length;c++){var v=u[c];if(v.visible)for(var f=c+1;f<u.length;f++){var p=u[f];v!==p&&p.visible&&t(v,p)&&(p.visible=!1)}}return u}var a={"hide-overlap":e};try{var n=JSON.parse(r.data);if(!n||!n.type||!a[n.type])return;var o=n.type,s=n.items,l=a[o](s);self.postMessage(l)}catch(h){throw h}},Ch=`
   self.onmessage = `.concat(wh.toString(),`
`),Fr=function(r){for(var i=r.slice(),t=0;t<i.length;t++){var e=i[t];if(e.visible)for(var a=t+1;a<i.length;a++){var n=i[a];e!==n&&n.visible&&yh(e,n)&&(n.visible=!1)}}return i},Br=new Map,la=xh(Ch);function Sh(r,i,t,e){return De(this,void 0,void 0,function(){var a,n,o,s,l,h;return Ge(this,function(u){switch(u.label){case 0:return a=i.map(function(c,v){return y(y({},xn(c,r[v],T(r[v],"background.padding"))),{visible:!0})}),n=JSON.stringify(a),o=function(c){return Br.set(n,c),b(c,function(v,f){var p=v.visible,d=i[f];p?d==null||d.show():d==null||d.hide()}),c},Br.get(n)?(o(Br.get(n)),[3,7]):[3,1];case 1:if(!la)return[3,6];u.label=2;case 2:return u.trys.push([2,4,,5]),s=JSON.stringify({type:"hide-overlap",items:a}),[4,la.post(s,function(){return o(Fr(a))})];case 3:return l=u.sent(),o(Array.isArray(l.data)?l.data:[]),[3,5];case 4:return h=u.sent(),console.error(h),o(Fr(a)),[3,5];case 5:return[3,7];case 6:o(Fr(a)),u.label=7;case 7:return[2]}})})}var ha={"#5B8FF9":!0},bh=function(r){var i=Or.toRGB(r).toUpperCase();if(ha[i])return ha[i];var t=P(Or.rgb2arr(i),3),e=t[0],a=t[1],n=t[2],o=(e*299+a*587+n*114)/1e3<128;return o};function Th(r,i,t){if(t.length!==0){var e=t[0].get("element"),a=e.geometry.theme,n=a.labels||{},o=n.fillColorLight,s=n.fillColorDark;t.forEach(function(l,h){var u=i[h],c=u.find(function(m){return m.get("type")==="text"}),v=ut.fromObject(l.getBBox()),f=ut.fromObject(c.getCanvasBBox()),p=!v.contains(f),d=l.attr("fill"),g=bh(d);p?c.attr(a.overflowLabels.style):g?o&&c.attr("fill",o):s&&c.attr("fill",s)})}}function Lh(r,i,t){var e=r.coordinate,a=Wt(i),n=ut.fromObject(a.getCanvasBBox()),o=ut.fromObject(t.getBBox());return e.isTransposed?o.height>=n.height:o.width>=n.width}function Mh(r,i,t){var e=!!r.getAdjust("stack");return e||i.every(function(a,n){var o=t[n];return Lh(r,a,o)})}function Ah(r,i,t){var e=r.coordinate,a=ut.fromObject(t.getBBox()),n=Wt(i);e.isTransposed?n.attr({x:a.minX+a.width/2,textAlign:"center"}):n.attr({y:a.minY+a.height/2,textBaseline:"middle"})}function Fh(r,i,t){var e;if(t.length!==0){var a=(e=t[0])===null||e===void 0?void 0:e.get("element"),n=a==null?void 0:a.geometry;if(!(!n||n.type!=="interval")){var o=Mh(n,i,t);o&&t.forEach(function(s,l){var h=i[l];Ah(n,h,s)})}}}function Bh(r){var i=500,t=[],e=Math.max(Math.floor(r.length/i),1);return b(r,function(a,n){n%e===0?t.push(a):a.set("visible",!1)}),t}function Eh(r,i,t){var e;if(t.length!==0){var a=(e=t[0])===null||e===void 0?void 0:e.get("element"),n=a==null?void 0:a.geometry;if(!(!n||n.type!=="interval")){var o=Bh(i),s=P(n.getXYFields(),1),l=s[0],h=[],u=[],c=Xe(o,function(g){return g.get("data")[l]}),v=Ra(we(o,function(g){return g.get("data")[l]})),f;o.forEach(function(g){g.set("visible",!0)});var p=function(g){g&&(g.length&&u.push(g.pop()),u.push.apply(u,$([],P(g),!1)))};for(Lt(v)>0&&(f=v.shift(),p(c[f])),Lt(v)>0&&(f=v.pop(),p(c[f])),b(v.reverse(),function(g){p(c[g])});u.length>0;){var d=u.shift();d.get("visible")&&(al(d,h)?d.set("visible",!1):h.push(d))}}}}function kh(r,i){var t=r.getXYFields()[1],e=[],a=i.sort(function(n,o){return n.get("data")[t]-n.get("data")[t]});return a.length>0&&e.push(a.shift()),a.length>0&&e.push(a.pop()),e.push.apply(e,$([],P(a),!1)),e}function On(r,i,t){return r.some(function(e){return t(e,i)})}function Ph(r,i,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(r.x+r.width+t,i.x+i.width+t)-Math.max(r.x-t,i.x-t)),a=Math.max(0,Math.min(r.y+r.height+t,i.y+i.height+t)-Math.max(r.y-t,i.y-t));return e*a}function ca(r,i){return On(r,i,function(t,e){var a=Wt(t),n=Wt(e);return Ph(a.getCanvasBBox(),n.getCanvasBBox(),2)>0})}function Ih(r,i,t,e,a){var n,o;if(t.length!==0){var s=(n=t[0])===null||n===void 0?void 0:n.get("element"),l=s==null?void 0:s.geometry;if(!(!l||l.type!=="point")){var h=P(l.getXYFields(),2),u=h[0],c=h[1],v=Xe(i,function(d){return d.get("data")[u]}),f=[],p=a&&a.offset||((o=r[0])===null||o===void 0?void 0:o.offset)||12;we(Wr(v).reverse(),function(d){for(var g=kh(l,v[d]);g.length;){var m=g.shift(),w=Wt(m);if(On(f,m,function(S,L){return S.get("data")[u]===L.get("data")[u]&&S.get("data")[c]===L.get("data")[c]})){w.set("visible",!1);continue}var x=ca(f,m),C=!1;if(x&&(w.attr("y",w.attr("y")+2*p),C=ca(f,m)),C){w.set("visible",!1);continue}f.push(m)}})}}}function Oh(r,i){var t=r.getXYFields()[1],e=[],a=i.sort(function(n,o){return n.get("data")[t]-n.get("data")[t]});return a.length>0&&e.push(a.shift()),a.length>0&&e.push(a.pop()),e.push.apply(e,$([],P(a),!1)),e}function Rn(r,i,t){return r.some(function(e){return t(e,i)})}function Rh(r,i,t){t===void 0&&(t=0);var e=Math.max(0,Math.min(r.x+r.width+t,i.x+i.width+t)-Math.max(r.x-t,i.x-t)),a=Math.max(0,Math.min(r.y+r.height+t,i.y+i.height+t)-Math.max(r.y-t,i.y-t));return e*a}function ua(r,i){return Rn(r,i,function(t,e){var a=Wt(t),n=Wt(e);return Rh(a.getCanvasBBox(),n.getCanvasBBox(),2)>0})}function Dh(r,i,t,e,a){var n,o;if(t.length!==0){var s=(n=t[0])===null||n===void 0?void 0:n.get("element"),l=s==null?void 0:s.geometry;if(!(!l||["path","line","area"].indexOf(l.type)<0)){var h=P(l.getXYFields(),2),u=h[0],c=h[1],v=Xe(i,function(d){return d.get("data")[u]}),f=[],p=a&&a.offset||((o=r[0])===null||o===void 0?void 0:o.offset)||12;we(Wr(v).reverse(),function(d){for(var g=Oh(l,v[d]);g.length;){var m=g.shift(),w=Wt(m);if(Rn(f,m,function(S,L){return S.get("data")[u]===L.get("data")[u]&&S.get("data")[c]===L.get("data")[c]})){w.set("visible",!1);continue}var x=ua(f,m),C=!1;if(x&&(w.attr("y",w.attr("y")+2*p),C=ua(f,m)),C){w.set("visible",!1);continue}f.push(m)}})}}}var Er;function Gh(){return Er||(Er=document.createElement("canvas").getContext("2d")),Er}var Qe=Pa(function(r,i){i===void 0&&(i={});var t=i.fontSize,e=i.fontFamily,a=i.fontWeight,n=i.fontStyle,o=i.fontVariant,s=Gh();return s.font=[n,o,a,"".concat(t,"px"),e].join(" "),s.measureText(et(r)?r:"").width},function(r,i){return i===void 0&&(i={}),$([r],P(Ia(i)),!1).join("")}),Vh=function(r,i,t){var e=16,a=Qe("...",t),n;et(r)?n=r:n=Mo(r);var o=i,s=[],l,h;if(Qe(r,t)<=i)return r;for(;l=n.substr(0,e),h=Qe(l,t),!(h+a>o&&h>o);)if(s.push(l),o-=h,n=n.substr(e),!n)return s.join("");for(;l=n.substr(0,1),h=Qe(l,t),!(h+a>o);)if(s.push(l),o-=h,n=n.substr(1),!n)return s.join("");return"".concat(s.join(""),"...")};function zh(r,i,t,e,a){if(!(i.length<=0)){var n=(a==null?void 0:a.direction)||["top","right","bottom","left"],o=(a==null?void 0:a.action)||"translate",s=(a==null?void 0:a.margin)||0,l=i[0].get("coordinate");if(!!l){var h=Zo(l,s),u=h.minX,c=h.minY,v=h.maxX,f=h.maxY;b(i,function(p){var d=p.getCanvasBBox(),g=d.minX,m=d.minY,w=d.maxX,x=d.maxY,C=d.x,S=d.y,L=d.width,M=d.height,A=C,B=S;if(n.indexOf("left")>=0&&(g<u||w<u)&&(A=u),n.indexOf("top")>=0&&(m<c||x<c)&&(B=c),n.indexOf("right")>=0&&(g>v?A=v-L:w>v&&(A=A-(w-v))),n.indexOf("bottom")>=0&&(m>f?B=f-M:x>f&&(B=B-(x-f))),A!==C||B!==S){var F=A-C;if(o==="translate")gr(p,F,B-S);else if(o==="ellipsis"){var R=p.findAll(function(D){return D.get("type")==="text"});R.forEach(function(D){var z=Ao(D.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),X=D.getCanvasBBox(),K=Vh(D.attr("text"),X.width-Math.abs(F),z);D.attr("text",K)})}else p.hide()}})}}}function Hh(r,i,t){var e={fillOpacity:V(r.attr("fillOpacity"))?1:r.attr("fillOpacity"),strokeOpacity:V(r.attr("strokeOpacity"))?1:r.attr("strokeOpacity"),opacity:V(r.attr("opacity"))?1:r.attr("opacity")};r.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),r.animate(e,i)}function Yh(r,i,t){var e={fillOpacity:0,strokeOpacity:0,opacity:0},a=i.easing,n=i.duration,o=i.delay;r.animate(e,n,a,function(){r.remove(!0)},o)}function Xh(r,i,t){var e,a=P(i,2),n=a[0],o=a[1];return r.applyToMatrix([n,o,1]),t==="x"?(r.setMatrix(st(r.getMatrix(),[["t",-n,-o],["s",.01,1],["t",n,o]])),e=st(r.getMatrix(),[["t",-n,-o],["s",100,1],["t",n,o]])):t==="y"?(r.setMatrix(st(r.getMatrix(),[["t",-n,-o],["s",1,.01],["t",n,o]])),e=st(r.getMatrix(),[["t",-n,-o],["s",1,100],["t",n,o]])):t==="xy"&&(r.setMatrix(st(r.getMatrix(),[["t",-n,-o],["s",.01,.01],["t",n,o]])),e=st(r.getMatrix(),[["t",-n,-o],["s",100,100],["t",n,o]])),e}function li(r,i,t,e,a){var n=t.start,o=t.end,s=t.getWidth(),l=t.getHeight(),h,u;a==="y"?(h=n.x+s/2,u=e.y<n.y?e.y:n.y):a==="x"?(h=e.x>n.x?e.x:n.x,u=n.y+l/2):a==="xy"&&(t.isPolar?(h=t.getCenter().x,u=t.getCenter().y):(h=(n.x+o.x)/2,u=(n.y+o.y)/2));var c=Xh(r,[h,u],a);r.animate({matrix:c},i)}function Nh(r,i,t){var e=t.coordinate,a=t.minYPoint;li(r,i,e,a,"x")}function Wh(r,i,t){var e=t.coordinate,a=t.minYPoint;li(r,i,e,a,"y")}function jh(r,i,t){var e=t.coordinate,a=t.minYPoint;li(r,i,e,a,"xy")}function Uh(r,i,t){var e=r.getTotalLength();r.attr("lineDash",[e]),r.animate(function(a){return{lineDashOffset:(1-a)*e}},i)}function qh(r,i,t){var e=t.toAttrs,a=e.x,n=e.y;delete e.x,delete e.y,r.attr(e),r.animate({x:a,y:n},i)}function Zh(r,i,t){var e=r.getBBox(),a=r.get("origin").mappingData,n=a.points,o=n[0].y-n[1].y>0?e.maxX:e.minX,s=(e.minY+e.maxY)/2;r.applyToMatrix([o,s,1]);var l=st(r.getMatrix(),[["t",-o,-s],["s",.01,1],["t",o,s]]);r.setMatrix(l),r.animate({matrix:st(r.getMatrix(),[["t",-o,-s],["s",100,1],["t",o,s]])},i)}function $h(r,i,t){var e=r.getBBox(),a=r.get("origin").mappingData,n=(e.minX+e.maxX)/2,o=a.points,s=o[0].y-o[1].y<=0?e.maxY:e.minY;r.applyToMatrix([n,s,1]);var l=st(r.getMatrix(),[["t",-n,-s],["s",1,.01],["t",n,s]]);r.setMatrix(l),r.animate({matrix:st(r.getMatrix(),[["t",-n,-s],["s",1,100],["t",n,s]])},i)}function va(r,i){var t,e=Fo(r,i),a=e.startAngle,n=e.endAngle;return!Et(a,-Math.PI*.5)&&a<-Math.PI*.5&&(a+=Math.PI*2),!Et(n,-Math.PI*.5)&&n<-Math.PI*.5&&(n+=Math.PI*2),i[5]===0&&(t=P([n,a],2),a=t[0],n=t[1]),Et(a,Math.PI*1.5)&&(a=Math.PI*-.5),Et(n,Math.PI*-.5)&&!Et(a,n)&&(n=Math.PI*1.5),{startAngle:a,endAngle:n}}function fa(r){var i;return r[0]==="M"||r[0]==="L"?i=[r[1],r[2]]:(r[0]==="a"||r[0]==="A"||r[0]==="C")&&(i=[r[r.length-2],r[r.length-1]]),i}function pa(r){var i,t,e,a=r.filter(function(x){return x[0]==="A"||x[0]==="a"});if(a.length===0)return{startAngle:0,endAngle:0,radius:0,innerRadius:0};var n=a[0],o=a.length>1?a[1]:a[0],s=r.indexOf(n),l=r.indexOf(o),h=fa(r[s-1]),u=fa(r[l-1]),c=va(h,n),v=c.startAngle,f=c.endAngle,p=va(u,o),d=p.startAngle,g=p.endAngle;Et(v,d)&&Et(f,g)?(t=v,e=f):(t=Math.min(v,d),e=Math.max(f,g));var m=n[1],w=a[a.length-1][1];return m<w?(i=P([w,m],2),m=i[0],w=i[1]):m===w&&(w=0),{startAngle:t,endAngle:e,radius:m,innerRadius:w}}function Kh(r,i,t){var e=t.toAttrs,a=t.coordinate,n=e.path||[],o=n.map(function(w){return w[0]});if(!(n.length<1)){var s=pa(n),l=s.startAngle,h=s.endAngle,u=s.radius,c=s.innerRadius,v=pa(r.attr("path")),f=v.startAngle,p=v.endAngle,d=a.getCenter(),g=l-f,m=h-p;if(g===0&&m===0){r.attr("path",n);return}r.animate(function(w){var x=f+w*g,C=p+w*m;return y(y({},e),{path:ct(o,["M","A","A","Z"])?za(d.x,d.y,u,x,C):_t(d.x,d.y,u,x,C,c)})},y(y({},i),{callback:function(){r.attr("path",n)}}))}}function Qh(r,i,t){var e=Ur(t.coordinate,20),a=e.type,n=e.startState,o=e.endState,s=r.setClip({type:a,attrs:n});t.toAttrs&&r.attr(t.toAttrs),s.animate(o,y(y({},i),{callback:function(){r&&!r.get("destroyed")&&r.set("clipShape",null),s.remove(!0)}}))}function hi(r,i,t){if(r.isGroup())b(r.getChildren(),function(s){hi(s,i,t)});else{var e=r.getBBox(),a=(e.minX+e.maxX)/2,n=(e.minY+e.maxY)/2;if(r.applyToMatrix([a,n,1]),t==="zoomIn"){var o=st(r.getMatrix(),[["t",-a,-n],["s",.01,.01],["t",a,n]]);r.setMatrix(o),r.animate({matrix:st(r.getMatrix(),[["t",-a,-n],["s",100,100],["t",a,n]])},i)}else r.animate({matrix:st(r.getMatrix(),[["t",-a,-n],["s",.01,.01],["t",a,n]])},y(y({},i),{callback:function(){r.remove(!0)}}))}}function Jh(r,i,t){hi(r,i,"zoomIn")}function _h(r,i,t){hi(r,i,"zoomOut")}function Rt(r){return[E.TOP,E.BOTTOM].includes(r)?{offsetX:0,offsetY:r===E.TOP?-8:8,style:{textAlign:"center",textBaseline:r===E.TOP?"bottom":"top"}}:[E.LEFT,E.RIGHT].includes(r)?{offsetX:r===E.LEFT?-8:8,offsetY:0,style:{textAlign:r===E.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function kr(r,i,t){return{x:r.x+i*Math.cos(t),y:r.y+i*Math.sin(t)}}var tc=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){return I({},r.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},i.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},i.prototype.getRegion=function(t,e){var a=.5,n={x:.5,y:.5},o=Math.PI*2/t,s=-1*Math.PI/2+o*e,l=a/(1+1/Math.sin(o/2)),h=kr(n,a-l,s),u=Math.PI*5/4,c=Math.PI*1/4;return{start:kr(h,l,u),end:kr(h,l,c)}},i.prototype.afterEachView=function(t,e){this.processAxis(t,e)},i.prototype.beforeEachView=function(t,e){},i.prototype.generateFacets=function(t){var e=this,a=this.cfg,n=a.fields,o=a.type,s=P(n,1),l=s[0];if(!l)throw new Error("No `fields` specified!");var h=this.getFieldValues(t,l),u=h.length,c=[];return h.forEach(function(v,f){var p=[{field:l,value:v,values:h}],d=re(t,e.getFacetDataFilter(p)),g={type:o,data:d,region:e.getRegion(u,f),columnValue:v,columnField:l,columnIndex:f,columnValuesLength:u,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};c.push(g)}),c},i.prototype.getXAxisOption=function(t,e,a,n){return a},i.prototype.getYAxisOption=function(t,e,a,n){return a},i.prototype.renderTitle=function(){var t=this;b(this.facets,function(e){var a=e.columnValue,n=e.view,o=T(t.cfg.title,"formatter"),s=I({position:["50%","0%"],content:o?o(a):a},Rt(E.TOP),t.cfg.title);n.annotation().text(s)})},i}(Ce),ec=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){return I({},r.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},i.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},i.prototype.afterEachView=function(t,e){this.processAxis(t,e)},i.prototype.beforeEachView=function(t,e){},i.prototype.generateFacets=function(t){var e=this,a=this.cfg.fields,n=this.cfg.cols,o=P(a,1),s=o[0];if(!s)throw new Error("No `fields` specified!");var l=this.getFieldValues(t,s),h=l.length;n=n||h;var u=this.getPageCount(h,n),c=[];return l.forEach(function(v,f){var p=e.getRowCol(f,n),d=p.row,g=p.col,m=[{field:s,value:v,values:l}],w=re(t,e.getFacetDataFilter(m)),x={type:e.cfg.type,data:w,region:e.getRegion(u,n,g,d),columnValue:v,rowValue:v,columnField:s,rowField:null,columnIndex:g,rowIndex:d,columnValuesLength:n,rowValuesLength:u,total:h};c.push(x)}),c},i.prototype.getXAxisOption=function(t,e,a,n){return n.rowIndex!==n.rowValuesLength-1&&n.columnValuesLength*n.rowIndex+n.columnIndex+1+n.columnValuesLength<=n.total?y(y({},a),{label:null,title:null}):a},i.prototype.getYAxisOption=function(t,e,a,n){return n.columnIndex!==0?y(y({},a),{title:null,label:null}):a},i.prototype.renderTitle=function(){var t=this;b(this.facets,function(e){var a=e.columnValue,n=e.view,o=T(t.cfg.title,"formatter"),s=I({position:["50%","0%"],content:o?o(a):a},Rt(E.TOP),t.cfg.title);n.annotation().text(s)})},i.prototype.getPageCount=function(t,e){return Math.floor((t+e-1)/e)},i.prototype.getRowCol=function(t,e){var a=Math.floor(t/e),n=t%e;return{row:a,col:n}},i}(Ce),rc=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){return I({},r.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:y({},r.prototype.getDefaultTitleCfg.call(this)),rowTitle:y({},r.prototype.getDefaultTitleCfg.call(this))})},i.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},i.prototype.afterEachView=function(t,e){this.processAxis(t,e)},i.prototype.beforeEachView=function(t,e){},i.prototype.generateFacets=function(t){for(var e=this.cfg,a=e.fields,n=e.type,o=a.length,s=o,l=[],h=0;h<s;h++)for(var u=a[h],c=0;c<o;c++){var v=a[c],f={type:n,data:t,region:this.getRegion(o,s,h,c),columnValue:u,rowValue:v,columnField:u,rowField:v,columnIndex:h,rowIndex:c,columnValuesLength:s,rowValuesLength:o};l.push(f)}return l},i.prototype.getXAxisOption=function(t,e,a,n){return n.rowIndex!==n.rowValuesLength-1?y(y({},a),{label:null,title:null}):a},i.prototype.getYAxisOption=function(t,e,a,n){return n.columnIndex!==0?y(y({},a),{title:null,label:null}):a},i.prototype.renderTitle=function(){var t=this;b(this.facets,function(e,a){var n=e.columnIndex,o=e.rowIndex,s=e.columnValuesLength;e.rowValuesLength;var l=e.columnValue,h=e.rowValue,u=e.view;if(o===0){var c=T(t.cfg.columnTitle,"formatter"),v=I({position:["50%","0%"],content:c?c(l):l},Rt(E.TOP),t.cfg.columnTitle);u.annotation().text(v)}if(n===s-1){var c=T(t.cfg.rowTitle,"formatter"),v=I({position:["100%","50%"],content:c?c(h):h},Rt(E.RIGHT),t.cfg.rowTitle);u.annotation().text(v)}})},i}(Ce),ic=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.getDefaultCfg=function(){return I({},r.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this),transpose:!1})},i.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},i.prototype.beforeEachView=function(t,e){this.cfg.transpose?e.columnIndex%2===0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():e.rowIndex%2!==0&&t.coordinate().reflect("y")},i.prototype.afterEachView=function(t,e){this.processAxis(t,e)},i.prototype.generateFacets=function(t){var e=this,a=P(this.cfg.fields,1),n=a[0],o=[],s=1,l=1,h=[""],u=[""],c,v;return this.cfg.transpose?(c=n,h=this.getFieldValues(t,c).slice(0,2),s=h.length):(v=n,u=this.getFieldValues(t,v).slice(0,2),l=u.length),h.forEach(function(f,p){u.forEach(function(d,g){var m=[{field:c,value:f,values:h},{field:v,value:d,values:u}],w=re(t,e.getFacetDataFilter(m)),x={type:e.cfg.type,data:w,region:e.getRegion(l,s,p,g),columnValue:f,rowValue:d,columnField:c,rowField:v,columnIndex:p,rowIndex:g,columnValuesLength:s,rowValuesLength:l};o.push(x)})}),o},i.prototype.getXAxisOption=function(t,e,a,n){return n.columnIndex===1||n.rowIndex===1?y(y({},a),{label:null,title:null}):a},i.prototype.getYAxisOption=function(t,e,a,n){return a},i.prototype.renderTitle=function(){var t=this;b(this.facets,function(e,a){var n=e.columnValue,o=e.rowValue,s=e.view,l=T(t.cfg.title,"formatter");if(t.cfg.transpose){var h=I({position:["50%","0%"],content:l?l(n):n},Rt(E.TOP),t.cfg.title);s.annotation().text(h)}else{var h=I({position:["100%","50%"],content:l?l(o):o},Rt(E.RIGHT),t.cfg.title);s.annotation().text(h)}})},i}(Ce),ac=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.afterEachView=function(t,e){this.processAxis(t,e)},i.prototype.beforeEachView=function(t,e){},i.prototype.getDefaultCfg=function(){return I({},r.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:y({},r.prototype.getDefaultTitleCfg.call(this)),rowTitle:y({},r.prototype.getDefaultTitleCfg.call(this))})},i.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},i.prototype.generateFacets=function(t){var e=this,a=P(this.cfg.fields,2),n=a[0],o=a[1],s=[],l=1,h=1,u=[""],c=[""];return n&&(u=this.getFieldValues(t,n),l=u.length),o&&(c=this.getFieldValues(t,o),h=c.length),u.forEach(function(v,f){c.forEach(function(p,d){var g=[{field:n,value:v,values:u},{field:o,value:p,values:c}],m=re(t,e.getFacetDataFilter(g)),w={type:e.cfg.type,data:m,region:e.getRegion(h,l,f,d),columnValue:v,rowValue:p,columnField:n,rowField:o,columnIndex:f,rowIndex:d,columnValuesLength:l,rowValuesLength:h};s.push(w)})}),s},i.prototype.renderTitle=function(){var t=this;b(this.facets,function(e,a){var n=e.columnIndex,o=e.rowIndex,s=e.columnValuesLength,l=e.columnValue,h=e.rowValue,u=e.view;if(o===0){var c=T(t.cfg.columnTitle,"formatter"),v=I({position:["50%","0%"],content:c?c(l):l},Rt(E.TOP),t.cfg.columnTitle);u.annotation().text(v)}if(n===s-1){var c=T(t.cfg.rowTitle,"formatter"),v=I({position:["100%","50%"],content:c?c(h):h},Rt(E.RIGHT),t.cfg.rowTitle);u.annotation().text(v)}})},i.prototype.getXAxisOption=function(t,e,a,n){return n.rowIndex!==n.rowValuesLength-1?y(y({},a),{title:null,label:null}):n.columnIndex!==Math.floor((n.columnValuesLength-1)/2)?y(y({},a),{title:null}):a},i.prototype.getYAxisOption=function(t,e,a,n){return n.columnIndex!==0?y(y({},a),{title:null,label:null}):n.rowIndex!==Math.floor((n.rowValuesLength-1)/2)?y(y({},a),{title:null}):a},i}(Ce),nc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return i.prototype.afterEachView=function(t,e){this.processAxis(t,e)},i.prototype.beforeEachView=function(t,e){},i.prototype.init=function(){r.prototype.init.call(this),this.view.on(q.AFTER_RENDER,this.afterChartRender)},i.prototype.getDefaultCfg=function(){return I({},r.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},i.prototype.generateFacets=function(t){var e=this.cfg.fields;if(!e.length)throw new Error("Please specify for the fields for rootFacet!");var a=[],n={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return a.push(n),n.children=this.getChildFacets(t,1,a),this.setRegion(a),a},i.prototype.setRegion=function(t){var e=this;this.forceColIndex(t),t.forEach(function(a){a.region=e.getRegion(a.rowValuesLength,a.columnValuesLength,a.columnIndex,a.rowIndex)})},i.prototype.getRegion=function(t,e,a,n){var o=1/e,s=1/t,l={x:o*a,y:s*n},h={x:l.x+o,y:l.y+s*2/3};return{start:l,end:h}},i.prototype.forceColIndex=function(t){var e,a,n=this,o=[],s=0;t.forEach(function(p){n.isLeaf(p)&&(o.push(p),p.columnIndex=s,s++)}),o.forEach(function(p){p.columnValuesLength=o.length});for(var l=this.cfg.fields.length,h=l-1;h>=0;h--){var u=this.getFacetsByLevel(t,h);try{for(var c=(e=void 0,H(u)),v=c.next();!v.done;v=c.next()){var f=v.value;this.isLeaf(f)||(f.originColIndex=f.columnIndex,f.columnIndex=this.getRegionIndex(f.children),f.columnValuesLength=o.length)}}catch(p){e={error:p}}finally{try{v&&!v.done&&(a=c.return)&&a.call(c)}finally{if(e)throw e.error}}}},i.prototype.getFacetsByLevel=function(t,e){var a=[];return t.forEach(function(n){n.rowIndex===e&&a.push(n)}),a},i.prototype.getRegionIndex=function(t){var e=t[0],a=t[t.length-1];return(a.columnIndex-e.columnIndex)/2+e.columnIndex},i.prototype.isLeaf=function(t){return!t.children||!t.children.length},i.prototype.getRows=function(){return this.cfg.fields.length+1},i.prototype.getChildFacets=function(t,e,a){var n=this,o=this.cfg.fields,s=o.length;if(!(s<e)){var l=[],h=o[e-1],u=this.getFieldValues(t,h);return u.forEach(function(c,v){var f=[{field:h,value:c,values:u}],p=t.filter(n.getFacetDataFilter(f));if(p.length){var d={type:n.cfg.type,data:p,region:null,columnValue:c,rowValue:"",columnField:h,rowField:"",columnIndex:v,rowValuesLength:n.getRows(),columnValuesLength:1,rowIndex:e,children:n.getChildFacets(p,e+1,a)};l.push(d),a.push(d)}}),l}},i.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},i.prototype.renderTitle=function(){var t=this;b(this.facets,function(e){var a=e.columnValue,n=e.view,o=T(t.cfg.title,"formatter"),s=I({position:["50%","0%"],content:o?o(a):a},Rt(E.TOP),t.cfg.title);n.annotation().text(s)})},i.prototype.drawLines=function(t){var e=this;t.forEach(function(a){if(!e.isLeaf(a)){var n=a.children;e.addFacetLines(a,n)}})},i.prototype.addFacetLines=function(t,e){var a=this,n=t.view,o=n.coordinateBBox,s={x:o.x+o.width/2,y:o.y+o.height};e.forEach(function(l){var h=l.view.coordinateBBox,u={x:h.bl.x+(h.tr.x-h.bl.x)/2,y:h.tr.y},c={x:s.x,y:s.y+(u.y-s.y)/2},v={x:u.x,y:c.y};a.drawLine([s,c,v,u])})},i.prototype.getPath=function(t){var e=[],a=this.cfg.line.smooth;return a?(e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(n,o){o===0?e.push(["M",n.x,n.y]):e.push(["L",n.x,n.y])}),e},i.prototype.drawLine=function(t){var e=this.getPath(t),a=this.cfg.line.style;this.container.addShape("path",{attrs:Ye({path:e},a)})},i.prototype.getXAxisOption=function(t,e,a,n){return n.rowIndex!==n.rowValuesLength-1?y(y({},a),{title:null,label:null}):a},i.prototype.getYAxisOption=function(t,e,a,n){return n.originColIndex!==0&&n.columnIndex!==0?y(y({},a),{title:null,label:null}):a},i}(Ce);function da(r){var i=$([],P(r),!1);i.sort(function(e,a){return e-a});var t=i.length;return t===0?0:t%2===1?i[(t-1)/2]:(i[t/2]+i[t/2-1])/2}function oc(r){var i=Oa(r,function(t,e){return t+=isNaN(e)||!ht(e)?0:e},0);return r.length===0?0:i/r.length}function Je(r,i){if(!i)return null;var t;switch(r){case"start":return 0;case"center":return .5;case"end":return 1;case"median":{t=i.isCategory?da(i.values.map(function(e,a){return a})):da(i.values);break}case"mean":{t=i.isCategory?(i.values.length-1)/2:oc(i.values);break}case"min":t=i.isCategory?0:i[r];break;case"max":t=i.isCategory?i.values.length-1:i[r];break;default:t=r;break}return i.scale(t)}var _e=["regionFilter","shape"],sc=function(r){k(i,r);function i(t){var e=r.call(this,t)||this;return e.cache=new Map,e.foregroundContainer=e.view.getLayer(Q.FORE).addGroup(),e.backgroundContainer=e.view.getLayer(Q.BG).addGroup(),e.option=[],e}return Object.defineProperty(i.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),i.prototype.init=function(){},i.prototype.layout=function(){this.update()},i.prototype.render=function(){},i.prototype.update=function(){var t=this;this.onAfterRender(function(){var a=new Map;b(t.option,function(n){if(he(_e,n.type)){var o=t.updateOrCreate(n);o&&a.set(t.getCacheKey(n),o)}}),t.cache=t.syncCache(a)});var e=new Map;b(this.option,function(a){if(!he(_e,a.type)){var n=t.updateOrCreate(a);n&&e.set(t.getCacheKey(a),n)}}),this.cache=this.syncCache(e)},i.prototype.clear=function(t){t===void 0&&(t=!1),r.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},i.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},i.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(e){t.push(e)}),t},i.prototype.clearComponents=function(){this.getComponents().forEach(function(t){t.component.destroy()}),this.cache.clear()},i.prototype.onAfterRender=function(t){var e=!1;this.view.getOptions().animate&&this.view.geometries.forEach(function(a){a.animateOption&&(a.once(Yt.AFTER_DRAW_ANIMATE,function(){t()}),e=!0)}),e||this.view.getRootView().once(q.AFTER_RENDER,function(){t()})},i.prototype.createAnnotation=function(t){var e=t.type,a=Bo[ur(e)];if(a){var n=this.getAnnotationTheme(e),o=this.getAnnotationCfg(e,t,n);if(!o)return null;var s=new a(o);return{component:s,layer:this.isTop(o)?Q.FORE:Q.BG,direction:E.NONE,type:it.ANNOTATION,extra:t}}},i.prototype.annotation=function(t){this.option.push(t)},i.prototype.arc=function(t){return this.annotation(y({type:"arc"},t)),this},i.prototype.image=function(t){return this.annotation(y({type:"image"},t)),this},i.prototype.line=function(t){return this.annotation(y({type:"line"},t)),this},i.prototype.region=function(t){return this.annotation(y({type:"region"},t)),this},i.prototype.text=function(t){return this.annotation(y({type:"text"},t)),this},i.prototype.dataMarker=function(t){return this.annotation(y({type:"dataMarker"},t)),this},i.prototype.dataRegion=function(t){this.annotation(y({type:"dataRegion"},t))},i.prototype.regionFilter=function(t){this.annotation(y({type:"regionFilter"},t))},i.prototype.shape=function(t){this.annotation(y({type:"shape"},t))},i.prototype.html=function(t){this.annotation(y({type:"html"},t))},i.prototype.parsePosition=function(t){var e,a,n=this.view.getXScale(),o=this.view.getScalesByDim("y"),s=j(t)?t.call(null,n,o):t,l=0,h=0;if(O(s)){var u=P(s,2),c=u[0],v=u[1];if(et(c)&&c.indexOf("%")!==-1&&!isNaN(c.slice(0,-1)))return this.parsePercentPosition(s);l=Je(c,n),h=Je(v,Object.values(o)[0])}else if(!V(s))try{for(var f=H(Wr(s)),p=f.next();!p.done;p=f.next()){var d=p.value,g=s[d];d===n.field&&(l=Je(g,n)),o[d]&&(h=Je(g,o[d]))}}catch(m){e={error:m}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(e)throw e.error}}return isNaN(l)||isNaN(h)?null:this.view.getCoordinate().convert({x:l,y:h})},i.prototype.getRegionPoints=function(t,e){var a=this,n=this.view.getXScale(),o=this.view.getScalesByDim("y"),s=Object.values(o)[0],l=n.field,h=this.view.getData(),u=O(t)?t[0]:t[l],c=O(e)?e[0]:e[l],v=[],f;return b(h,function(p,d){if(p[l]===u&&(f=d),d>=f){var g=a.parsePosition([p[l],p[s.field]]);g&&v.push(g)}if(p[l]===c)return!1}),v},i.prototype.parsePercentPosition=function(t){var e=parseFloat(t[0])/100,a=parseFloat(t[1])/100,n=this.view.getCoordinate(),o=n.start,s=n.end,l={x:Math.min(o.x,s.x),y:Math.min(o.y,s.y)},h=n.getWidth()*e+l.x,u=n.getHeight()*a+l.y;return{x:h,y:u}},i.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),e=t.start,a=t.end,n=t.getWidth(),o=t.getHeight(),s={x:Math.min(e.x,a.x),y:Math.min(e.y,a.y)};return{x:s.x,y:s.y,minX:s.x,minY:s.y,maxX:s.x+n,maxY:s.y+o,width:n,height:o}},i.prototype.getAnnotationCfg=function(t,e,a){var n=this,o=this.view.getCoordinate(),s=this.view.getCanvas(),l={};if(V(e))return null;var h=e.start,u=e.end,c=e.position,v=this.parsePosition(h),f=this.parsePosition(u),p=this.parsePosition(c);if(["arc","image","line","region","regionFilter"].includes(t)&&(!v||!f))return null;if(["text","dataMarker","html"].includes(t)&&!p)return null;if(t==="arc"){var d=e;d.start,d.end;var g=ft(d,["start","end"]),m=de(o,v),w=de(o,f);m>w&&(w=Math.PI*2+w),l=y(y({},g),{center:o.getCenter(),radius:pr(o,v),startAngle:m,endAngle:w})}else if(t==="image"){var x=e;x.start,x.end;var g=ft(x,["start","end"]);l=y(y({},g),{start:v,end:f,src:e.src})}else if(t==="line"){var C=e;C.start,C.end;var g=ft(C,["start","end"]);l=y(y({},g),{start:v,end:f,text:T(e,"text",null)})}else if(t==="region"){var S=e;S.start,S.end;var g=ft(S,["start","end"]);l=y(y({},g),{start:v,end:f})}else if(t==="text"){var L=this.view.getData(),M=e;M.position;var A=M.content,g=ft(M,["position","content"]),B=A;j(A)&&(B=A(L)),l=y(y(y({},p),g),{content:B})}else if(t==="dataMarker"){var F=e;F.position;var R=F.point,D=F.line,z=F.text,X=F.autoAdjust,K=F.direction,g=ft(F,["position","point","line","text","autoAdjust","direction"]);l=y(y(y({},g),p),{coordinateBBox:this.getCoordinateBBox(),point:R,line:D,text:z,autoAdjust:X,direction:K})}else if(t==="dataRegion"){var ot=e,xt=ot.start,Ft=ot.end,rt=ot.region,z=ot.text,ne=ot.lineLength,g=ft(ot,["start","end","region","text","lineLength"]);l=y(y({},g),{points:this.getRegionPoints(xt,Ft),region:rt,text:z,lineLength:ne})}else if(t==="regionFilter"){var qt=e;qt.start,qt.end;var xi=qt.apply,Wn=qt.color,g=ft(qt,["start","end","apply","color"]),jn=this.view.geometries,wi=[],xr=function(bt){!bt||(bt.isGroup()?bt.getChildren().forEach(function(Le){return xr(Le)}):wi.push(bt))};b(jn,function(bt){xi?he(xi,bt.type)&&b(bt.elements,function(Le){xr(Le.shape)}):b(bt.elements,function(Le){xr(Le.shape)})}),l=y(y({},g),{color:Wn,shapes:wi,start:v,end:f})}else if(t==="shape"){var Ci=e,Un=Ci.render,wr=ft(Ci,["render"]),qn=function($n){if(j(e.render))return Un($n,n.view,{parsePosition:n.parsePosition.bind(n)})};l=y(y({},wr),{render:qn})}else if(t==="html"){var Cr=e,Sr=Cr.html;Cr.position;var wr=ft(Cr,["html","position"]),Zn=function(bt){return j(Sr)?Sr(bt,n.view):Sr};l=y(y(y({},wr),p),{parent:s.get("el").parentNode,html:Zn})}var Dt=I({},a,y(y({},l),{top:e.top,style:e.style,offsetX:e.offsetX,offsetY:e.offsetY}));return t!=="html"&&(Dt.container=this.getComponentContainer(Dt)),Dt.animate=this.view.getOptions().animate&&Dt.animate&&T(e,"animate",Dt.animate),Dt.animateOption=I({},me,Dt.animateOption,e.animateOption),Dt},i.prototype.isTop=function(t){return T(t,"top",!0)},i.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},i.prototype.getAnnotationTheme=function(t){return T(this.view.getTheme(),["components","annotation",t],{})},i.prototype.updateOrCreate=function(t){var e=this.cache.get(this.getCacheKey(t));if(e){var a=t.type,n=this.getAnnotationTheme(a),o=this.getAnnotationCfg(a,t,n);o&&pt(o,["container"]),e.component.update(y(y({},o||{}),{visible:!!o})),he(_e,t.type)&&e.component.render()}else e=this.createAnnotation(t),e&&(e.component.init(),he(_e,t.type)&&e.component.render());return e},i.prototype.syncCache=function(t){var e=this,a=new Map(this.cache);return t.forEach(function(n,o){a.set(o,n)}),a.forEach(function(n,o){kt(e.option,function(s){return o===e.getCacheKey(s)})||(n.component.destroy(),a.delete(o))}),a},i.prototype.getCacheKey=function(t){return t},i}(Te);function ga(r,i){var t=I({},T(r,["components","axis","common"]),T(r,["components","axis",i]));return T(t,["grid"],{})}function tr(r,i,t,e){var a=[],n=i.getTicks();return r.isPolar&&n.push({value:1,text:"",tickValue:""}),n.reduce(function(o,s,l){var h=s.value;if(e)a.push({points:[r.convert(t==="y"?{x:0,y:h}:{x:h,y:0}),r.convert(t==="y"?{x:1,y:h}:{x:h,y:1})]});else if(l){var u=o.value,c=(u+h)/2;a.push({points:[r.convert(t==="y"?{x:0,y:c}:{x:c,y:0}),r.convert(t==="y"?{x:1,y:c}:{x:c,y:1})]})}return s},n[0]),a}function Pr(r,i,t,e,a){var n=i.values.length,o=[],s=t.getTicks();return s.reduce(function(l,h){var u=l?l.value:h.value,c=h.value,v=(u+c)/2;return a==="x"?o.push({points:[r.convert({x:e?c:v,y:0}),r.convert({x:e?c:v,y:1})]}):o.push({points:we(Array(n+1),function(f,p){return r.convert({x:p/n,y:e?c:v})})}),h},s[0]),o}function ya(r,i){var t=T(i,"grid");if(t===null)return!1;var e=T(r,"grid");return!(t===void 0&&e===null)}var Vt=["container"],ma=y(y({},me),{appear:null}),lc=function(r){k(i,r);function i(t){var e=r.call(this,t)||this;return e.cache=new Map,e.gridContainer=e.view.getLayer(Q.BG).addGroup(),e.gridForeContainer=e.view.getLayer(Q.FORE).addGroup(),e.axisContainer=e.view.getLayer(Q.BG).addGroup(),e.axisForeContainer=e.view.getLayer(Q.FORE).addGroup(),e}return Object.defineProperty(i.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),i.prototype.init=function(){},i.prototype.render=function(){this.update()},i.prototype.layout=function(){var t=this,e=this.view.getCoordinate();b(this.getComponents(),function(a){var n=a.component,o=a.direction,s=a.type,l=a.extra,h=l.dim,u=l.scale,c=l.alignTick,v;if(s===it.AXIS)e.isPolar?h==="x"?v=e.isTransposed?Ue(e,o):Tr(e):h==="y"&&(v=e.isTransposed?Tr(e):Ue(e,o)):v=Ue(e,o);else if(s===it.GRID)if(e.isPolar){var f=void 0;e.isTransposed?f=h==="x"?Pr(e,t.view.getYScales()[0],u,c,h):tr(e,u,h,c):f=h==="x"?tr(e,u,h,c):Pr(e,t.view.getXScale(),u,c,h),v={items:f,center:t.view.getCoordinate().getCenter()}}else v={items:tr(e,u,h,c)};n.update(v)})},i.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var e=new Map;this.cache.forEach(function(a,n){t.has(n)?e.set(n,a):a.component.destroy()}),this.cache=e},i.prototype.clear=function(){r.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.gridForeContainer.clear(),this.axisContainer.clear(),this.axisForeContainer.clear()},i.prototype.destroy=function(){r.prototype.destroy.call(this),this.gridContainer.remove(!0),this.gridForeContainer.remove(!0),this.axisContainer.remove(!0),this.axisForeContainer.remove(!0)},i.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(e){t.push(e)}),t},i.prototype.updateXAxes=function(t){var e=this.view.getXScale();if(!(!e||e.isIdentity)){var a=sr(this.option,e.field);if(a!==!1){var n=Di(a,E.BOTTOM),o=Q.BG,s="x",l=this.view.getCoordinate(),h=this.getId("axis",e.field),u=this.getId("grid",e.field);if(l.isRect){var c=this.cache.get(h);if(c){var v=this.getLineAxisCfg(e,a,n);pt(v,Vt),c.component.update(v),t.set(h,c)}else c=this.createLineAxis(e,a,o,n,s),this.cache.set(h,c),t.set(h,c);var f=this.cache.get(u);if(f){var v=this.getLineGridCfg(e,a,n,s);pt(v,Vt),f.component.update(v),t.set(u,f)}else f=this.createLineGrid(e,a,o,n,s),f&&(this.cache.set(u,f),t.set(u,f))}else if(l.isPolar){var c=this.cache.get(h);if(c){var v=l.isTransposed?this.getLineAxisCfg(e,a,E.RADIUS):this.getCircleAxisCfg(e,a,n);pt(v,Vt),c.component.update(v),t.set(h,c)}else{if(l.isTransposed){if(ce(a))return;c=this.createLineAxis(e,a,o,E.RADIUS,s)}else c=this.createCircleAxis(e,a,o,n,s);this.cache.set(h,c),t.set(h,c)}var f=this.cache.get(u);if(f){var v=l.isTransposed?this.getCircleGridCfg(e,a,E.RADIUS,s):this.getLineGridCfg(e,a,E.CIRCLE,s);pt(v,Vt),f.component.update(v),t.set(u,f)}else{if(l.isTransposed){if(ce(a))return;f=this.createCircleGrid(e,a,o,E.RADIUS,s)}else f=this.createLineGrid(e,a,o,E.CIRCLE,s);f&&(this.cache.set(u,f),t.set(u,f))}}}}},i.prototype.updateYAxes=function(t){var e=this,a=this.view.getYScales();b(a,function(n,o){if(!(!n||n.isIdentity)){var s=n.field,l=sr(e.option,s);if(l!==!1){var h=Q.BG,u="y",c=e.getId("axis",s),v=e.getId("grid",s),f=e.view.getCoordinate();if(f.isRect){var p=Di(l,o===0?E.LEFT:E.RIGHT),d=e.cache.get(c);if(d){var g=e.getLineAxisCfg(n,l,p);pt(g,Vt),d.component.update(g),t.set(c,d)}else d=e.createLineAxis(n,l,h,p,u),e.cache.set(c,d),t.set(c,d);var m=e.cache.get(v);if(m){var g=e.getLineGridCfg(n,l,p,u);pt(g,Vt),m.component.update(g),t.set(v,m)}else m=e.createLineGrid(n,l,h,p,u),m&&(e.cache.set(v,m),t.set(v,m))}else if(f.isPolar){var d=e.cache.get(c);if(d){var g=f.isTransposed?e.getCircleAxisCfg(n,l,E.CIRCLE):e.getLineAxisCfg(n,l,E.RADIUS);pt(g,Vt),d.component.update(g),t.set(c,d)}else{if(f.isTransposed){if(ce(l))return;d=e.createCircleAxis(n,l,h,E.CIRCLE,u)}else d=e.createLineAxis(n,l,h,E.RADIUS,u);e.cache.set(c,d),t.set(c,d)}var m=e.cache.get(v);if(m){var g=f.isTransposed?e.getLineGridCfg(n,l,E.CIRCLE,u):e.getCircleGridCfg(n,l,E.RADIUS,u);pt(g,Vt),m.component.update(g),t.set(v,m)}else{if(f.isTransposed){if(ce(l))return;m=e.createLineGrid(n,l,h,E.CIRCLE,u)}else m=e.createCircleGrid(n,l,h,E.RADIUS,u);m&&(e.cache.set(v,m),t.set(v,m))}}}}})},i.prototype.createLineAxis=function(t,e,a,n,o){var s={component:new Go(this.getLineAxisCfg(t,e,n)),layer:a,direction:n===E.RADIUS?E.NONE:n,type:it.AXIS,extra:{dim:o,scale:t}};return s.component.set("field",t.field),s.component.init(),s},i.prototype.createLineGrid=function(t,e,a,n,o){var s=this.getLineGridCfg(t,e,n,o);if(s){var l={component:new zo(s),layer:a,direction:E.NONE,type:it.GRID,extra:{dim:o,scale:t,alignTick:T(s,"alignTick",!0)}};return l.component.init(),l}},i.prototype.createCircleAxis=function(t,e,a,n,o){var s={component:new Vo(this.getCircleAxisCfg(t,e,n)),layer:a,direction:n,type:it.AXIS,extra:{dim:o,scale:t}};return s.component.set("field",t.field),s.component.init(),s},i.prototype.createCircleGrid=function(t,e,a,n,o){var s=this.getCircleGridCfg(t,e,n,o);if(s){var l={component:new Ho(s),layer:a,direction:E.NONE,type:it.GRID,extra:{dim:o,scale:t,alignTick:T(s,"alignTick",!0)}};return l.component.init(),l}},i.prototype.getLineAxisCfg=function(t,e,a){var n=T(e,["top"])?this.axisForeContainer:this.axisContainer,o=this.view.getCoordinate(),s=Ue(o,a),l=Gi(t,e),h=qe(this.view.getTheme(),a),u=T(e,["title"])?I({title:{style:{text:l}}},{title:Ri(this.view.getTheme(),a,e.title)},e):e,c=I(y(y({container:n},s),{ticks:t.getTicks().map(function(x){return{id:"".concat(x.tickValue),name:x.text,value:x.value}}),verticalFactor:o.isPolar?Oi(s,o.getCenter())*-1:Oi(s,o.getCenter()),theme:h}),h,u),v=this.getAnimateCfg(c),f=v.animate,p=v.animateOption;c.animateOption=p,c.animate=f;var d=Na(s),g=T(c,"verticalLimitLength",d?1/3:1/2);if(g<=1){var m=this.view.getCanvas().get("width"),w=this.view.getCanvas().get("height");c.verticalLimitLength=g*(d?m:w)}return c},i.prototype.getLineGridCfg=function(t,e,a,n){if(!!ya(qe(this.view.getTheme(),a),e)){var o=ga(this.view.getTheme(),a),s=I({container:T(e,["top"])?this.gridForeContainer:this.gridContainer},o,T(e,"grid"),this.getAnimateCfg(e));return s.items=tr(this.view.getCoordinate(),t,n,T(s,"alignTick",!0)),s}},i.prototype.getCircleAxisCfg=function(t,e,a){var n=T(e,["top"])?this.axisForeContainer:this.axisContainer,o=this.view.getCoordinate(),s=t.getTicks().map(function(d){return{id:"".concat(d.tickValue),name:d.text,value:d.value}});!t.isCategory&&Math.abs(o.endAngle-o.startAngle)===Math.PI*2&&s.pop();var l=Gi(t,e),h=qe(this.view.getTheme(),E.CIRCLE),u=T(e,["title"])?I({title:{style:{text:l}}},{title:Ri(this.view.getTheme(),a,e.title)},e):e,c=I(y(y({container:n},Tr(this.view.getCoordinate())),{ticks:s,verticalFactor:1,theme:h}),h,u),v=this.getAnimateCfg(c),f=v.animate,p=v.animateOption;return c.animate=f,c.animateOption=p,c},i.prototype.getCircleGridCfg=function(t,e,a,n){if(!!ya(qe(this.view.getTheme(),a),e)){var o=ga(this.view.getTheme(),E.RADIUS),s=I({container:T(e,["top"])?this.gridForeContainer:this.gridContainer,center:this.view.getCoordinate().getCenter()},o,T(e,"grid"),this.getAnimateCfg(e)),l=T(s,"alignTick",!0),h=n==="x"?this.view.getYScales()[0]:this.view.getXScale();return s.items=Pr(this.view.getCoordinate(),h,t,l,n),s}},i.prototype.getId=function(t,e){var a=this.view.getCoordinate();return"".concat(t,"-").concat(e,"-").concat(a.type)},i.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&T(t,"animate"),animateOption:t&&t.animateOption?I({},ma,t.animateOption):ma}},i}(Te);function Ht(r,i,t){return t===E.TOP?[r.minX+r.width/2-i.width/2,r.minY]:t===E.BOTTOM?[r.minX+r.width/2-i.width/2,r.maxY-i.height]:t===E.LEFT?[r.minX,r.minY+r.height/2-i.height/2]:t===E.RIGHT?[r.maxX-i.width,r.minY+r.height/2-i.height/2]:t===E.TOP_LEFT||t===E.LEFT_TOP?[r.tl.x,r.tl.y]:t===E.TOP_RIGHT||t===E.RIGHT_TOP?[r.tr.x-i.width,r.tr.y]:t===E.BOTTOM_LEFT||t===E.LEFT_BOTTOM?[r.bl.x,r.bl.y-i.height]:t===E.BOTTOM_RIGHT||t===E.RIGHT_BOTTOM?[r.br.x-i.width,r.br.y-i.height]:[0,0]}function xa(r,i){return Ie(r)?r===!1?!1:{}:T(r,[i],r)}function er(r){return T(r,"position",E.BOTTOM)}var hc=function(r){k(i,r);function i(t){var e=r.call(this,t)||this;return e.container=e.view.getLayer(Q.FORE).addGroup(),e}return Object.defineProperty(i.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),i.prototype.init=function(){},i.prototype.render=function(){this.update()},i.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,b(this.components,function(e){var a=e.component,n=e.direction,o=Mr(n),s=a.get("maxWidthRatio"),l=a.get("maxHeightRatio"),h=t.getCategoryLegendSizeCfg(o,s,l),u=a.get("maxWidth"),c=a.get("maxHeight");a.update({maxWidth:Math.min(h.maxWidth,u||0),maxHeight:Math.min(h.maxHeight,c||0)});var v=a.get("padding"),f=a.getLayoutBBox(),p=new ut(f.x,f.y,f.width,f.height).expand(v),d=P(Ht(t.view.viewBBox,p,n),2),g=d[0],m=d[1],w=P(Ht(t.layoutBBox,p,n),2),x=w[0],C=w[1],S=0,L=0;n.startsWith("top")||n.startsWith("bottom")?(S=g,L=C):(S=x,L=m),a.setLocation({x:S+v[3],y:L+v[0]}),t.layoutBBox=t.layoutBBox.cut(p,n)})},i.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var e={},a=function(v,f,p){var d=t.getId(p.field),g=t.getComponentById(d);if(g){var m=void 0,w=xa(t.option,p.field);w!==!1&&(T(w,"custom")?m=t.getCategoryCfg(v,f,p,w,!0):p.isLinear?m=t.getContinuousCfg(v,f,p,w):p.isCategory&&(m=t.getCategoryCfg(v,f,p,w))),m&&(pt(m,["container"]),g.direction=er(w),g.component.update(m),e[d]=!0)}else{var x=t.createFieldLegend(v,f,p);x&&(x.component.init(),t.components.push(x),e[d]=!0)}};if(T(this.option,"custom")){var n="global-custom",o=this.getComponentById(n);if(o){var s=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);pt(s,["container"]),o.component.update(s),e[n]=!0}else{var l=this.createCustomLegend(void 0,void 0,void 0,this.option);if(l){l.init();var h=Q.FORE,u=er(this.option);this.components.push({id:n,component:l,layer:h,direction:u,type:it.LEGEND,extra:void 0}),e[n]=!0}}}else this.loopLegends(a);var c=[];b(this.getComponents(),function(v){e[v.id]?c.push(v):v.component.destroy()}),this.components=c},i.prototype.clear=function(){r.prototype.clear.call(this),this.container.clear()},i.prototype.destroy=function(){r.prototype.destroy.call(this),this.container.remove(!0)},i.prototype.getGeometries=function(t){var e=this,a=t.geometries;return b(t.views,function(n){a=a.concat(e.getGeometries(n))}),a},i.prototype.loopLegends=function(t){var e=this.view.getRootView()===this.view;if(!!e){var a=this.getGeometries(this.view),n={};b(a,function(o){var s=o.getGroupAttributes();b(s,function(l){var h=l.getScale(l.type);!h||h.type==="identity"||n[h.field]||(t(o,l,h),n[h.field]=!0)})})}},i.prototype.createFieldLegend=function(t,e,a){var n,o=xa(this.option,a.field),s=Q.FORE,l=er(o);if(o!==!1&&(T(o,"custom")?n=this.createCustomLegend(t,e,a,o):a.isLinear?n=this.createContinuousLegend(t,e,a,o):a.isCategory&&(n=this.createCategoryLegend(t,e,a,o))),n)return n.set("field",a.field),{id:this.getId(a.field),component:n,layer:s,direction:l,type:it.LEGEND,extra:{scale:a}}},i.prototype.createCustomLegend=function(t,e,a,n){var o=this.getCategoryCfg(t,e,a,n,!0);return new ki(o)},i.prototype.createContinuousLegend=function(t,e,a,n){var o=this.getContinuousCfg(t,e,a,pt(n,["value"]));return new Yo(o)},i.prototype.createCategoryLegend=function(t,e,a,n){var o=this.getCategoryCfg(t,e,a,n);return new ki(o)},i.prototype.getContinuousCfg=function(t,e,a,n){var o=a.getTicks(),s=kt(o,function(d){return d.value===0}),l=kt(o,function(d){return d.value===1}),h=o.map(function(d){var g=d.value,m=d.tickValue,w=e.mapping(a.invert(g)).join("");return{value:m,attrValue:w,color:w,scaleValue:g}});s||h.push({value:a.min,attrValue:e.mapping(a.invert(0)).join(""),color:e.mapping(a.invert(0)).join(""),scaleValue:0}),l||h.push({value:a.max,attrValue:e.mapping(a.invert(1)).join(""),color:e.mapping(a.invert(1)).join(""),scaleValue:1}),h.sort(function(d,g){return d.value-g.value});var u={min:vr(h).value,max:ie(h).value,colors:[],rail:{type:e.type},track:{}};e.type==="size"&&(u.track={style:{fill:e.type==="size"?this.view.getTheme().defaultColor:void 0}}),e.type==="color"&&(u.colors=h.map(function(d){return d.attrValue}));var c=this.container,v=er(n),f=Mr(v),p=T(n,"title");return p&&(p=I({text:Ve(a)},p)),u.container=c,u.layout=f,u.title=p,u.animateOption=me,this.mergeLegendCfg(u,n,"continuous")},i.prototype.getCategoryCfg=function(t,e,a,n,o){var s=this.container,l=T(n,"position",E.BOTTOM),h=Ki(this.view.getTheme(),l),u=T(h,["marker"]),c=T(n,"marker"),v=Mr(l),f=T(h,["pageNavigator"]),p=T(n,"pageNavigator"),d=o?cl(u,c,n.items):hl(this.view,t,e,u,c),g=T(n,"title");g&&(g=I({text:a?Ve(a):""},g));var m=T(n,"maxWidthRatio"),w=T(n,"maxHeightRatio"),x=this.getCategoryLegendSizeCfg(v,m,w);x.container=s,x.layout=v,x.items=d,x.title=g,x.animateOption=me,x.pageNavigator=I({},f,p);var C=this.mergeLegendCfg(x,n,l);C.reversed&&C.items.reverse();var S=T(C,"maxItemWidth");return S&&S<=1&&(C.maxItemWidth=this.view.viewBBox.width*S),C},i.prototype.mergeLegendCfg=function(t,e,a){var n=a.split("-")[0],o=Ki(this.view.getTheme(),n);return I({},o,t,e)},i.prototype.getId=function(t){return"".concat(this.name,"-").concat(t)},i.prototype.getComponentById=function(t){return kt(this.components,function(e){return e.id===t})},i.prototype.getCategoryLegendSizeCfg=function(t,e,a){e===void 0&&(e=Fi),a===void 0&&(a=Fi);var n=this.view.viewBBox,o=n.width,s=n.height;return t==="vertical"?{maxWidth:o*e,maxHeight:s}:{maxWidth:o,maxHeight:s*a}},i}(Te),cc=function(r){k(i,r);function i(t){var e=r.call(this,t)||this;return e.onChangeFn=Da,e.resetMeasure=function(){e.clear()},e.onValueChange=function(a){var n=P(a,2),o=n[0],s=n[1];e.start=o,e.end=s,e.changeViewData(o,s)},e.container=e.view.getLayer(Q.FORE).addGroup(),e.onChangeFn=Nr(e.onValueChange,20,{leading:!0}),e.width=0,e.view.on(q.BEFORE_CHANGE_DATA,e.resetMeasure),e.view.on(q.BEFORE_CHANGE_SIZE,e.resetMeasure),e}return Object.defineProperty(i.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),i.prototype.destroy=function(){r.prototype.destroy.call(this),this.view.off(q.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(q.BEFORE_CHANGE_SIZE,this.resetMeasure)},i.prototype.init=function(){},i.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),e=t.start,a=t.end;V(this.start)&&(this.start=e,this.end=a);var n=this.view.getOptions().data;this.option&&!It(n)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},i.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.start,t.end)},0)),this.slider){var e=this.view.coordinateBBox.width,a=this.slider.component.get("padding"),n=P(a,4),o=n[0];n[1],n[2];var s=n[3],l=this.slider.component.getLayoutBBox(),h=new ut(l.x,l.y,Math.min(l.width,e),l.height).expand(a),u=this.getMinMaxText(this.start,this.end),c=u.minText,v=u.maxText,f=P(Ht(this.view.viewBBox,h,E.BOTTOM),2);f[0];var p=f[1],d=P(Ht(this.view.coordinateBBox,h,E.BOTTOM),2),g=d[0];d[1],this.slider.component.update(y(y({},this.getSliderCfg()),{x:g+s,y:p+o,width:this.width,start:this.start,end:this.end,minText:c,maxText:v})),this.view.viewBBox=this.view.viewBBox.cut(h,E.BOTTOM)}},i.prototype.update=function(){this.render()},i.prototype.createSlider=function(){var t=this.getSliderCfg(),e=new Eo(y({container:this.container},t));return e.init(),{component:e,layer:Q.FORE,direction:E.BOTTOM,type:it.SLIDER}},i.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var e=this.getMinMaxText(this.start,this.end),a=e.minText,n=e.maxText;t=y(y({},t),{width:this.width,start:this.start,end:this.end,minText:a,maxText:n})}return this.slider.component.update(t),this.slider},i.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},i.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(yt(this.option)){var e=y({data:this.getData()},T(this.option,"trendCfg",{}));t=I({},t,this.getThemeOptions(),this.option),t=y(y({},t),{trendCfg:e})}return t.start=Pt(Math.min(V(t.start)?0:t.start,V(t.end)?1:t.end),0,1),t.end=Pt(Math.max(V(t.start)?0:t.start,V(t.end)?1:t.end),0,1),t},i.prototype.getData=function(){var t=this.view.getOptions().data,e=P(this.view.getYScales(),1),a=e[0],n=this.view.getGroupScales();if(n.length){var o=n[0],s=o.field,l=o.ticks;return t.reduce(function(h,u){return u[s]===l[0]&&h.push(u[a.field]),h},[])}return t.map(function(h){return h[a.field]||0})},i.prototype.getThemeOptions=function(){var t=this.view.getTheme();return T(t,["components","slider","common"],{})},i.prototype.getMinMaxText=function(t,e){var a=this.view.getOptions().data,n=this.view.getXScale(),o=te(a,n.field);n.isLinear&&(o=o.sort());var s=o,l=Lt(a);if(!n||!l)return{};var h=Lt(s),u=Math.round(t*(h-1)),c=Math.round(e*(h-1)),v=T(s,[u]),f=T(s,[c]),p=this.getSliderCfg().formatter;return p&&(v=p(v,a[u],u),f=p(f,a[c],c)),{minText:v,maxText:f}},i.prototype.changeViewData=function(t,e){var a=this.view.getOptions().data,n=this.view.getXScale(),o=Lt(a);if(!(!n||!o)){var s=te(a,n.field),l=this.view.getXScale().isLinear?s.sort(function(f,p){return Number(f)-Number(p)}):s,h=l,u=Lt(h),c=Math.round(t*(u-1)),v=Math.round(e*(u-1));this.view.filter(n.field,function(f,p){var d=h.indexOf(f);return d>-1?ve(d,c,v):!0}),this.view.render(!0)}},i.prototype.getComponents=function(){return this.slider?[this.slider]:[]},i.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},i}(Te),rr=0,wa=8,uc=32,vc=20,fc=function(r){k(i,r);function i(t){var e=r.call(this,t)||this;return e.onChangeFn=Da,e.resetMeasure=function(){e.clear()},e.onValueChange=function(a){var n=a.ratio,o=e.getValidScrollbarCfg().animate;e.ratio=Pt(n,0,1);var s=e.view.getOptions().animate;o||e.view.animate(!1),e.changeViewData(e.getScrollRange(),!0),e.view.animate(s)},e.container=e.view.getLayer(Q.FORE).addGroup(),e.onChangeFn=Nr(e.onValueChange,20,{leading:!0}),e.trackLen=0,e.thumbLen=0,e.ratio=0,e.view.on(q.BEFORE_CHANGE_DATA,e.resetMeasure),e.view.on(q.BEFORE_CHANGE_SIZE,e.resetMeasure),e}return Object.defineProperty(i.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),i.prototype.destroy=function(){r.prototype.destroy.call(this),this.view.off(q.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(q.BEFORE_CHANGE_SIZE,this.resetMeasure)},i.prototype.init=function(){},i.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},i.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)})),this.scrollbar){var e=this.view.coordinateBBox.width,a=this.scrollbar.component.get("padding"),n=this.scrollbar.component.getLayoutBBox(),o=new ut(n.x,n.y,Math.min(n.width,e),n.height).expand(a),s=this.getScrollbarComponentCfg(),l=void 0,h=void 0;if(s.isHorizontal){var u=P(Ht(this.view.viewBBox,o,E.BOTTOM),2);u[0];var c=u[1],v=P(Ht(this.view.coordinateBBox,o,E.BOTTOM),2),f=v[0];v[1],l=f,h=c}else{var p=P(Ht(this.view.viewBBox,o,E.RIGHT),2);p[0];var c=p[1],d=P(Ht(this.view.viewBBox,o,E.RIGHT),2),f=d[0];d[1],l=f,h=c}l+=a[3],h+=a[0],this.trackLen?this.scrollbar.component.update(y(y({},s),{x:l,y:h,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(y(y({},s),{x:l,y:h})),this.view.viewBBox=this.view.viewBBox.cut(o,s.isHorizontal?E.BOTTOM:E.RIGHT)}},i.prototype.update=function(){this.render()},i.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},i.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},i.prototype.setValue=function(t){this.onValueChange({ratio:t})},i.prototype.getValue=function(){return this.ratio},i.prototype.getThemeOptions=function(){var t=this.view.getTheme();return T(t,["components","scrollbar","common"],{})},i.prototype.getScrollbarTheme=function(t){var e=T(this.view.getTheme(),["components","scrollbar"]),a=t||{},n=a.thumbHighlightColor,o=ft(a,["thumbHighlightColor"]);return{default:I({},T(e,["default","style"],{}),o),hover:I({},T(e,["hover","style"],{}),{thumbColor:n})}},i.prototype.measureScrollbar=function(){var t=this.view.getXScale(),e=this.view.getYScales().slice();this.data=this.getScrollbarData(),this.step=this.getStep(),this.cnt=this.getCnt();var a=this.getScrollbarComponentCfg(),n=a.trackLen,o=a.thumbLen;this.trackLen=n,this.thumbLen=o,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=e},i.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*Pt(this.ratio,0,1)),e=Math.min(t+this.step-1,this.cnt-1);return[t,e]},i.prototype.changeViewData=function(t,e){var a=this,n=P(t,2),o=n[0],s=n[1],l=this.getValidScrollbarCfg().type,h=l!=="vertical",u=te(this.data,this.xScaleCfg.field),c=this.view.getXScale().isLinear?u.sort(function(f,p){return Number(f)-Number(p)}):u,v=h?c:c.reverse();this.yScalesCfg.forEach(function(f){a.view.scale(f.field,{formatter:f.formatter,type:f.type,min:f.min,max:f.max,tickMethod:f.tickMethod})}),this.view.filter(this.xScaleCfg.field,function(f){var p=v.indexOf(f);return p>-1?ve(p,o,s):!0}),this.view.render(!0)},i.prototype.createScrollbar=function(){var t=this.getValidScrollbarCfg().type,e=t!=="vertical",a=new ko(y(y({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return a.init(),{component:a,layer:Q.FORE,direction:e?E.BOTTOM:E.RIGHT,type:it.SCROLLBAR}},i.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),e=this.trackLen?y(y({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):y({},t);return this.scrollbar.component.update(e),this.scrollbar},i.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,e=this.getValidScrollbarCfg(),a=e.type,n=e.categorySize,o=a!=="vertical";return Math.floor((o?t.width:t.height)/n)},i.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),e=this.getScrollbarData(),a=te(e,t.field);return Lt(a)},i.prototype.getScrollbarComponentCfg=function(){var t=this.view,e=t.coordinateBBox,a=t.viewBBox,n=this.getValidScrollbarCfg(),o=n.type,s=n.padding,l=n.width,h=n.height,u=n.style,c=o!=="vertical",v=P(s,4),f=v[0],p=v[1],d=v[2],g=v[3],m=c?{x:e.minX+g,y:a.maxY-h-d}:{x:a.maxX-l-p,y:e.minY+f},w=this.getStep(),x=this.getCnt(),C=c?e.width-g-p:e.height-f-d,S=Math.max(C*Pt(w/x,0,1),vc);return y(y({},this.getThemeOptions()),{x:m.x,y:m.y,size:c?h:l,isHorizontal:c,trackLen:C,thumbLen:S,thumbOffset:0,theme:this.getScrollbarTheme(u)})},i.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:uc,width:wa,height:wa,padding:[0,0,0,0],animate:!0,style:{}};return yt(this.option)&&(t=y(y({},t),this.option)),(!yt(this.option)||!this.option.padding)&&(t.padding=t.type==="horizontal"?[rr,0,rr,0]:[0,rr,0,rr]),t},i.prototype.getScrollbarData=function(){var t=this.view.getCoordinate(),e=this.getValidScrollbarCfg(),a=this.view.getOptions().data||[];return t.isReflect("y")&&e.type==="vertical"&&(a=$([],P(a),!1).reverse()),a},i}(Te),pc={fill:"#CCD6EC",opacity:.3};function dc(r,i,t){var e,a,n,o,s,l,h=Ds(r,i,t);if(h.length){h=Ot(h);try{for(var u=H(h),c=u.next();!c.done;c=u.next()){var v=c.value;try{for(var f=(n=void 0,H(v)),p=f.next();!p.done;p=f.next()){var d=p.value,g=d.mappingData,m=g.x,w=g.y;d.x=O(m)?m[m.length-1]:m,d.y=O(w)?w[w.length-1]:w}}catch(F){n={error:F}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}}catch(F){e={error:F}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(e)throw e.error}}var x=t.shared;if(x===!1&&h.length>1){var C=h[0],S=Math.abs(i.y-C[0].y);try{for(var L=H(h),M=L.next();!M.done;M=L.next()){var A=M.value,B=Math.abs(i.y-A[0].y);B<=S&&(C=A,S=B)}}catch(F){s={error:F}}finally{try{M&&!M.done&&(l=L.return)&&l.call(L)}finally{if(s)throw s.error}}h=[C]}return Ra(Ot(h))}return[]}var gc=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.show=function(t){var e=this.context.view,a=this.context.event,n=e.getController("tooltip").getTooltipCfg(),o=dc(e,{x:a.x,y:a.y},n);if(!ct(o,this.items)&&(this.items=o,o.length)){var s=e.getXScale().field,l=o[0].data[s],h=[],u=e.geometries;if(b(u,function(Ft){if(Ft.type==="interval"||Ft.type==="schema"){var rt=Ft.getElementsBy(function(ne){var qt=ne.getData();return qt[s]===l});h=h.concat(rt)}}),h.length){var c=e.getCoordinate(),v=h[0].shape.getCanvasBBox(),f=h[0].shape.getCanvasBBox(),p=v;b(h,function(Ft){var rt=Ft.shape.getCanvasBBox();c.isTransposed?(rt.minY<v.minY&&(v=rt),rt.maxY>f.maxY&&(f=rt)):(rt.minX<v.minX&&(v=rt),rt.maxX>f.maxX&&(f=rt)),p.x=Math.min(rt.minX,p.minX),p.y=Math.min(rt.minY,p.minY),p.width=Math.max(rt.maxX,p.maxX)-p.x,p.height=Math.max(rt.maxY,p.maxY)-p.y});var d=e.backgroundGroup,g=e.coordinateBBox,m=void 0;if(c.isRect){var w=e.getXScale(),x=t||{},C=x.appendRatio,S=x.appendWidth;V(S)&&(C=V(C)?w.isLinear?0:.25:C,S=c.isTransposed?C*f.height:C*v.width);var L=void 0,M=void 0,A=void 0,B=void 0;c.isTransposed?(L=g.minX,M=Math.min(f.minY,v.minY)-S,A=g.width,B=p.height+S*2):(L=Math.min(v.minX,f.minX)-S,M=g.minY,A=p.width+S*2,B=g.height),m=[["M",L,M],["L",L+A,M],["L",L+A,M+B],["L",L,M+B],["Z"]]}else{var F=vr(h),R=ie(h),D=or(F.getModel(),c).startAngle,z=or(R.getModel(),c).endAngle,X=c.getCenter(),K=c.getRadius(),ot=c.innerRadius*K;m=_t(X.x,X.y,K,D,z,ot)}if(this.regionPath)this.regionPath.attr("path",m),this.regionPath.show();else{var xt=T(t,"style",pc);this.regionPath=d.addShape({type:"path",name:"active-region",capture:!1,attrs:y(y({},xt),{path:m})})}}}},i.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},i.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),r.prototype.destroy.call(this)},i}(at),Dn=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.timeStamp=0,t}return i.prototype.show=function(){var t=this.context,e=t.event,a=t.view,n=a.isTooltipLocked();if(!n){var o=this.timeStamp,s=+new Date,l=T(t.view.getOptions(),"tooltip.showDelay",16);if(s-o>l){var h=this.location,u={x:e.x,y:e.y};(!h||!ct(h,u))&&this.showTooltip(a,u),this.timeStamp=s,this.location=u}}},i.prototype.hide=function(){var t=this.context.view,e=t.getController("tooltip"),a=this.context.event,n=a.clientX,o=a.clientY;e.isCursorEntered({x:n,y:o})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},i.prototype.showTooltip=function(t,e){t.showTooltip(e)},i.prototype.hideTooltip=function(t){t.hideTooltip()},i}(at),yc=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.showTooltip=function(t,e){var a=Mt(t);b(a,function(n){var o=Dr(t,n,e);n.showTooltip(o)})},i.prototype.hideTooltip=function(t){var e=Mt(t);b(e,function(a){a.hideTooltip()})},i}(Dn),mc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.timeStamp=0,t}return i.prototype.destroy=function(){r.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},i.prototype.show=function(){var t=this.context,e=t.event,a=this.timeStamp,n=+new Date;if(n-a>16){var o=this.location,s={x:e.x,y:e.y};(!o||!ct(o,s))&&this.showTooltip(s),this.timeStamp=n,this.location=s}},i.prototype.hide=function(){this.hideTooltip(),this.location=null},i.prototype.showTooltip=function(t){var e=this.context,a=e.event,n=a.target;if(n&&n.get("tip")){this.tooltip||this.renderTooltip();var o=n.get("tip");this.tooltip.update(y({title:o},t)),this.tooltip.show()}},i.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},i.prototype.renderTooltip=function(){var t,e=this.context.view,a=e.canvas,n={start:{x:0,y:0},end:{x:a.get("width"),y:a.get("height")}},o=e.getTheme(),s=T(o,["components","tooltip","domStyles"],{}),l=new fr({parent:a.get("el").parentNode,region:n,visible:!1,crosshairs:null,domStyles:y({},I({},s,(t={},t[Oe]={"max-width":"50%"},t[Re]={"word-break":"break-all"},t)))});l.init(),l.setCapture(!1),this.tooltip=l},i}(at),ci=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="",t}return i.prototype.hasState=function(t){return t.hasState(this.stateName)},i.prototype.setElementState=function(t,e){t.setState(this.stateName,e)},i.prototype.setState=function(){this.setStateEnable(!0)},i.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},i.prototype.clearViewState=function(t){var e=this,a=Ja(t,this.stateName);b(a,function(n){e.setElementState(n,!1)})},i}(at);function Ca(r){return T(r.get("delegateObject"),"item")}var ui=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return i.prototype.isItemIgnore=function(t,e){var a=this.ignoreListItemStates,n=a.filter(function(o){return e.hasState(t,o)});return!!n.length},i.prototype.setStateByComponent=function(t,e,a){var n=this.context.view,o=t.get("field"),s=nt(n);this.setElementsStateByItem(s,o,e,a)},i.prototype.setStateByElement=function(t,e){this.setElementState(t,e)},i.prototype.isMathItem=function(t,e,a){var n=this.context.view,o=ye(n,e),s=St(t,e);return!V(s)&&a.name===o.getText(s)},i.prototype.setElementsStateByItem=function(t,e,a,n){var o=this;b(t,function(s){o.isMathItem(s,e,a)&&s.setState(o.stateName,n)})},i.prototype.setStateEnable=function(t){var e=Nt(this.context);if(e)$a(this.context)&&this.setStateByElement(e,t);else{var a=ge(this.context);if(ze(a)){var n=a.item,o=a.component;if(n&&o&&!this.isItemIgnore(n,o)){var s=this.context.event.gEvent;if(s&&s.fromShape&&s.toShape&&Ca(s.fromShape)===Ca(s.toShape))return;this.setStateByComponent(o,n,t)}}}},i.prototype.toggle=function(){var t=Nt(this.context);if(t){var e=t.hasState(this.stateName);this.setElementState(t,!e)}},i.prototype.reset=function(){this.setStateEnable(!1)},i}(ci),xc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return i.prototype.active=function(){this.setState()},i}(ui),wc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.cache={},t}return i.prototype.getColorScale=function(t,e){var a=e.geometry.getAttribute("color");if(!a)return null;var n=t.getScaleByField(a.getFields()[0]);return n},i.prototype.getLinkPath=function(t,e){var a=this.context.view,n=a.getCoordinate().isTransposed,o=t.shape.getCanvasBBox(),s=e.shape.getCanvasBBox(),l=n?[["M",o.minX,o.minY],["L",s.minX,s.maxY],["L",s.maxX,s.maxY],["L",o.maxX,o.minY],["Z"]]:[["M",o.maxX,o.minY],["L",s.minX,s.minY],["L",s.minX,s.maxY],["L",o.maxX,o.maxY],["Z"]];return l},i.prototype.addLinkShape=function(t,e,a,n){var o={opacity:.4,fill:e.shape.attr("fill")};t.addShape({type:"path",attrs:y(y({},I({},o,j(n)?n(o,e):n)),{path:this.getLinkPath(e,a)})})},i.prototype.linkByElement=function(t,e){var a=this,n=this.context.view,o=this.getColorScale(n,t);if(!!o){var s=St(t,o.field);if(!this.cache[s]){var l=fs(n,o.field,s),h=this.linkGroup,u=h.addGroup();this.cache[s]=u;var c=l.length;b(l,function(v,f){if(f<c-1){var p=l[f+1];a.addLinkShape(u,v,p,e)}})}}},i.prototype.removeLink=function(t){var e=this.getColorScale(this.context.view,t);if(!!e){var a=St(t,e.field);this.cache[a]&&(this.cache[a].remove(),this.cache[a]=null)}},i.prototype.link=function(t){var e=this.context;this.linkGroup||(this.linkGroup=e.view.foregroundGroup.addGroup({id:"link-by-color-group",capture:!1}));var a=Nt(e);a&&this.linkByElement(a,t==null?void 0:t.style)},i.prototype.unlink=function(){var t=Nt(this.context);t&&this.removeLink(t)},i.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},i.prototype.destroy=function(){r.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},i}(at),vi=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return i.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},i.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},i.prototype.getIntersectElements=function(){var t=null;if(He(this.context))t=qr(this.context,10);else{var e=this.startPoint,a=this.isStarted?this.getCurrentPoint():this.endPoint;if(!e||!a)return;var n={minX:Math.min(e.x,a.x),minY:Math.min(e.y,a.y),maxX:Math.max(e.x,a.x),maxY:Math.max(e.y,a.y)},o=this.context.view;t=Zr(o,n)}return t},i.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var e=nt(this.context.view),a=this.getIntersectElements();a&&a.length?this.effectByRecord?this.setSiblingsStateByRecord(a,t):this.setElementsState(a,t,e):this.clear()}},i.prototype.setSiblingsStateByRecord=function(t,e){var a=this,n=this.context.view,o=Mt(n),s=t.map(function(u){return u.getModel().data}),l=n.getXScale().field,h=n.getYScales()[0].field;b(o,function(u){var c=nt(u),v=c.filter(function(f){var p=f.getModel().data;return tn(s,p,l,h)});a.setElementsState(v,e,c)})},i.prototype.setSiblingsState=function(t){var e=this,a=this.context.view,n=Mt(a);He(this.context)&&b(n,function(o){var s=nt(o),l=Qa(e.context,o,10);l&&l.length?e.setElementsState(l,t,s):e.clearViewState(o)})},i.prototype.setElementsState=function(t,e,a){var n=this;b(a,function(o){t.includes(o)?n.setElementState(o,e):n.setElementState(o,!1)})},i.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},i.prototype.clear=function(){var t=this,e=this.context.view;if(this.effectSiblings){var a=Mt(e);b(a,function(n){t.clearViewState(n)})}else this.clearViewState(e)},i}(ci),Cc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return i.prototype.active=function(){this.setState()},i}(vi),fi=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.setStateEnable=function(t){var e=Nt(this.context);if(e){if(!$a(this.context))return;t?(this.clear(),this.setElementState(e,!0)):this.hasState(e)&&this.setElementState(e,!1)}},i.prototype.toggle=function(){var t=Nt(this.context);if(t){var e=this.hasState(t);e||this.clear(),this.setElementState(t,!e)}},i.prototype.reset=function(){this.setStateEnable(!1)},i}(ci),Sc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return i.prototype.active=function(){this.setState()},i}(fi),ke="inactive",Pe="active";function pi(r){var i=nt(r);b(i,function(t){t.hasState(Pe)&&t.setState(Pe,!1),t.hasState(ke)&&t.setState(ke,!1)})}function Gn(r,i,t){b(r,function(e){i(e)?(e.hasState(ke)&&e.setState(ke,!1),e.setState(Pe,t)):(e.hasState(Pe)&&e.setState(Pe,!1),e.setState(ke,t))})}var Jt=nr.INACTIVE,Bt=nr.ACTIVE,di=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName=Bt,t}return i.prototype.setElementsStateByItem=function(t,e,a,n){var o=this,s=function(l){return o.isMathItem(l,e,a)};this.setHighlightBy(t,s,n)},i.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(Jt)&&t.setState(Jt,!1),t.setState(Bt,!0)):t.hasState(Bt)||t.setState(Jt,!0)},i.prototype.setHighlightBy=function(t,e,a){var n=this;if(a)b(t,function(l){n.setElementHighlight(l,e)});else{var o=Ja(this.context.view,Bt),s=!0;b(o,function(l){if(!e(l))return s=!1,!1}),s?this.clear():b(t,function(l){e(l)&&(l.hasState(Bt)&&l.setState(Bt,!1),l.setState(Jt,!0))})}},i.prototype.setElementState=function(t,e){var a=this.context.view,n=nt(a);this.setHighlightBy(n,function(o){return t===o},e)},i.prototype.highlight=function(){this.setState()},i.prototype.clear=function(){var t=this.context.view;pi(t)},i}(ui),bc=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.setStateByElement=function(t,e){var a=this.context.view,n=t.geometry.getAttribute("color");if(!!n){var o=a.getScaleByField(n.getFields()[0]),s=St(t,o.field),l=nt(a),h=l.filter(function(u){return St(u,o.field)===s});this.setHighlightBy(l,function(u){return h.includes(u)},e)}},i}(di),Tc=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(Jt)&&t.setState(Jt,!1),t.setState(Bt,!0)):(t.setState(Jt,!0),t.hasState(Bt)&&t.setState(Bt,!1))},i.prototype.setStateByElement=function(t,e){var a=this.context.view,n=a.getXScale(),o=St(t,n.field),s=nt(a),l=s.filter(function(h){return St(h,n.field)===o});this.setHighlightBy(s,function(h){return l.includes(h)},e)},i.prototype.toggle=function(){var t=Nt(this.context);if(t){var e=t.hasState(this.stateName);this.setStateByElement(t,!e)}},i}(di),Tt;(function(r){r.BEFORE_HIGHLIGHT="element-range-highlight:beforehighlight",r.AFTER_HIGHLIGHT="element-range-highlight:afterhighlight",r.BEFORE_CLEAR="element-range-highlight:beforeclear",r.AFTER_CLEAR="element-range-highlight:afterclear"})(Tt||(Tt={}));var Vn=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return i.prototype.clearViewState=function(t){pi(t)},i.prototype.highlight=function(){var t=this.context,e=t.view,a=t.event,n=this.getIntersectElements(),o={view:e,event:a,highlightElements:n};e.emit(Tt.BEFORE_HIGHLIGHT,lt.fromData(e,Tt.BEFORE_HIGHLIGHT,o)),this.setState(),e.emit(Tt.AFTER_HIGHLIGHT,lt.fromData(e,Tt.AFTER_HIGHLIGHT,o))},i.prototype.clear=function(){var t=this.context.view;t.emit(Tt.BEFORE_CLEAR,lt.fromData(t,Tt.BEFORE_CLEAR,{})),r.prototype.clear.call(this),t.emit(Tt.AFTER_CLEAR,lt.fromData(t,Tt.AFTER_CLEAR,{}))},i.prototype.setElementsState=function(t,e,a){Gn(a,function(n){return t.indexOf(n)>=0},e)},i}(vi),Lc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return i.prototype.highlight=function(){this.setState()},i.prototype.setElementState=function(t,e){var a=this.context.view,n=nt(a);Gn(n,function(o){return t===o},e)},i.prototype.clear=function(){var t=this.context.view;pi(t)},i}(fi),Mc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="selected",t}return i.prototype.selected=function(){this.setState()},i}(vi),Ac=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="selected",t}return i.prototype.selected=function(){this.setState()},i}(ui),Fc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="selected",t}return i.prototype.selected=function(){this.setState()},i}(fi),ae=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return i.prototype.getTriggerListInfo=function(){var t=ge(this.context),e=null;return ze(t)&&(e={item:t.item,list:t.component}),e},i.prototype.getAllowComponents=function(){var t=this,e=this.context.view,a=_a(e),n=[];return b(a,function(o){o.isList()&&t.allowSetStateByElement(o)&&n.push(o)}),n},i.prototype.hasState=function(t,e){return t.hasState(e,this.stateName)},i.prototype.clearAllComponentsState=function(){var t=this,e=this.getAllowComponents();b(e,function(a){a.clearItemsState(t.stateName)})},i.prototype.allowSetStateByElement=function(t){var e=t.get("field");if(!e)return!1;if(this.cfg&&this.cfg.componentNames){var a=t.get("name");if(this.cfg.componentNames.indexOf(a)===-1)return!1}var n=this.context.view,o=ye(n,e);return o&&o.isCategory},i.prototype.allowSetStateByItem=function(t,e){var a=this.ignoreItemStates;if(a.length){var n=a.filter(function(o){return e.hasState(t,o)});return n.length===0}return!0},i.prototype.setStateByElement=function(t,e,a){var n=t.get("field"),o=this.context.view,s=ye(o,n),l=St(e,n),h=s.getText(l);this.setItemsState(t,h,a)},i.prototype.setStateEnable=function(t){var e=this,a=Nt(this.context);if(a){var n=this.getAllowComponents();b(n,function(h){e.setStateByElement(h,a,t)})}else{var o=ge(this.context);if(ze(o)){var s=o.item,l=o.component;this.allowSetStateByElement(l)&&this.allowSetStateByItem(s,l)&&this.setItemState(l,s,t)}}},i.prototype.setItemsState=function(t,e,a){var n=this,o=t.getItems();b(o,function(s){s.name===e&&n.setItemState(t,s,a)})},i.prototype.setItemState=function(t,e,a){t.setItemState(e,this.stateName,a)},i.prototype.setState=function(){this.setStateEnable(!0)},i.prototype.reset=function(){this.setStateEnable(!1)},i.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var e=t.list,a=t.item,n=this.hasState(e,a);this.setItemState(e,a,!n)}},i.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},i}(at),Bc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="active",t}return i.prototype.active=function(){this.setState()},i}(ae),Sa="inactive",ba="active";function Ec(r){var i=r.getItems();b(i,function(t){r.hasState(t,ba)&&r.setItemState(t,ba,!1),r.hasState(t,Sa)&&r.setItemState(t,Sa,!1)})}var Be="inactive",Kt="active",gi=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName=Kt,t.ignoreItemStates=["unchecked"],t}return i.prototype.setItemsState=function(t,e,a){this.setHighlightBy(t,function(n){return n.name===e},a)},i.prototype.setItemState=function(t,e,a){t.getItems(),this.setHighlightBy(t,function(n){return n===e},a)},i.prototype.setHighlightBy=function(t,e,a){var n=t.getItems();if(a)b(n,function(l){e(l)?(t.hasState(l,Be)&&t.setItemState(l,Be,!1),t.setItemState(l,Kt,!0)):t.hasState(l,Kt)||t.setItemState(l,Be,!0)});else{var o=t.getItemsByState(Kt),s=!0;b(o,function(l){if(!e(l))return s=!1,!1}),s?this.clear():b(n,function(l){e(l)&&(t.hasState(l,Kt)&&t.setItemState(l,Kt,!1),t.setItemState(l,Be,!0))})}},i.prototype.highlight=function(){this.setState()},i.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)Ec(t.list);else{var e=this.getAllowComponents();b(e,function(a){a.clearItemsState(Kt),a.clearItemsState(Be)})}},i}(ae),kc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="selected",t}return i.prototype.selected=function(){this.setState()},i}(ae),Pc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName="unchecked",t}return i.prototype.unchecked=function(){this.setState()},i}(ae),se="unchecked",ir="checked",Ic=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.stateName=ir,t}return i.prototype.setItemState=function(t,e,a){this.setCheckedBy(t,function(n){return n===e},a)},i.prototype.setCheckedBy=function(t,e,a){var n=t.getItems();a&&b(n,function(o){e(o)?(t.hasState(o,se)&&t.setItemState(o,se,!1),t.setItemState(o,ir,!0)):t.hasState(o,ir)||t.setItemState(o,se,!0)})},i.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var e=t.list,a=t.item,n=!cr(e.getItems(),function(o){return e.hasState(o,se)});n||e.hasState(a,se)?this.setItemState(e,a,!0):this.reset()}},i.prototype.checked=function(){this.setState()},i.prototype.reset=function(){var t=this.getAllowComponents();b(t,function(e){e.clearItemsState(ir),e.clearItemsState(se)})},i}(ae),le="unchecked",Oc=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.toggle=function(){var t,e,a,n,o,s,l,h,u=this.getTriggerListInfo();if(u!=null&&u.item){var c=u.list,v=u.item,f=c.getItems(),p=f.filter(function(F){return!c.hasState(F,le)}),d=f.filter(function(F){return c.hasState(F,le)}),g=p[0];if(f.length===p.length)try{for(var m=H(f),w=m.next();!w.done;w=m.next()){var x=w.value;c.setItemState(x,le,x.id!==v.id)}}catch(F){t={error:F}}finally{try{w&&!w.done&&(e=m.return)&&e.call(m)}finally{if(t)throw t.error}}else if(f.length-d.length===1)if(g.id===v.id)try{for(var C=H(f),S=C.next();!S.done;S=C.next()){var x=S.value;c.setItemState(x,le,!1)}}catch(F){a={error:F}}finally{try{S&&!S.done&&(n=C.return)&&n.call(C)}finally{if(a)throw a.error}}else try{for(var L=H(f),M=L.next();!M.done;M=L.next()){var x=M.value;c.setItemState(x,le,x.id!==v.id)}}catch(F){o={error:F}}finally{try{M&&!M.done&&(s=L.return)&&s.call(L)}finally{if(o)throw o.error}}else try{for(var A=H(f),B=A.next();!B.done;B=A.next()){var x=B.value;c.setItemState(x,le,x.id!==v.id)}}catch(F){l={error:F}}finally{try{B&&!B.done&&(h=A.return)&&h.call(A)}finally{if(l)throw l.error}}}},i}(ae),Ta="showRadio",Ir="legend-radio-tip",Rc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.timeStamp=0,t}return i.prototype.show=function(){var t=this.getTriggerListInfo();if(t!=null&&t.item){var e=t.list,a=t.item;e.setItemState(a,Ta,!0)}},i.prototype.hide=function(){var t=this.getTriggerListInfo();if(t!=null&&t.item){var e=t.list,a=t.item;e.setItemState(a,Ta,!1)}},i.prototype.destroy=function(){r.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},i.prototype.showTip=function(){var t=this.context,e=t.event,a=this.timeStamp,n=+new Date,o=this.context.event.target;if(n-a>16&&o.get("name")==="legend-item-radio"){var s=this.location,l={x:e.x,y:e.y};this.timeStamp=n,this.location=l,(!s||!ct(s,l))&&this.showTooltip(l)}},i.prototype.hideTip=function(){this.hideTooltip(),this.location=null},i.prototype.showTooltip=function(t){var e=this.context,a=e.event,n=a.target;if(n&&n.get("tip")){this.tooltip||this.renderTooltip();var o=e.view.getCanvas().get("el").getBoundingClientRect(),s=o.x,l=o.y;this.tooltip.update(y(y({title:n.get("tip")},t),{x:t.x+s,y:t.y+l})),this.tooltip.show()}},i.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},i.prototype.renderTooltip=function(){var t,e=(t={},t[Oe]={padding:"6px 8px",transform:"translate(-50%, -80%)",background:"rgba(0,0,0,0.75)",color:"#fff","border-radius":"2px","z-index":100},t[Re]={"font-size":"12px","line-height":"14px","margin-bottom":0,"word-break":"break-all"},t);document.getElementById(Ir)&&document.body.removeChild(document.getElementById(Ir));var a=new fr({parent:document.body,region:null,visible:!1,crosshairs:null,domStyles:e,containerId:Ir});a.init(),a.setCapture(!1),this.tooltip=a},i}(ae),yi=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return i.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},i.prototype.emitEvent=function(t){var e="mask:".concat(t),a=this.context.view,n=this.context.event;a.emit(e,{target:this.maskShape,shape:this.maskShape,points:this.points,x:n.x,y:n.y})},i.prototype.createMask=function(){var t=this.context.view,e=this.getMaskAttrs(),a=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:y({fill:"#C5D4EB",opacity:.3},e)});return a},i.prototype.getMaskPath=function(){return[]},i.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},i.prototype.start=function(t){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(t==null?void 0:t.maskStyle),this.emitEvent("start")},i.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},i.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),e=this.preMovePoint,a=t.x-e.x,n=t.y-e.y,o=this.points;b(o,function(s){s.x+=a,s.y+=n}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},i.prototype.updateMask=function(t){var e=I({},this.getMaskAttrs(),t);this.maskShape.attr(e)},i.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},i.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},i.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},i.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},i.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,r.prototype.destroy.call(this)},i}(at),Dc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.shapeType="circle",t}return i.prototype.getMaskAttrs=function(){var t=this.points,e=ie(this.points),a=0,n=0,o=0;if(t.length){var s=t[0];a=$r(s,e)/2,n=(e.x+s.x)/2,o=(e.y+s.y)/2}return{x:n,y:o,r:a}},i}(yi),zn=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.shapeType="rect",t}return i.prototype.getRegion=function(){var t=this.points;return{start:vr(t),end:ie(t)}},i.prototype.getMaskAttrs=function(){var t=this.getRegion(),e=t.start,a=t.end,n=Math.min(e.x,a.x),o=Math.min(e.y,a.y),s=Math.abs(a.x-e.x),l=Math.abs(a.y-e.y);return{x:n,y:o,width:s,height:l}},i}(yi);function La(r){r.x=Pt(r.x,0,1),r.y=Pt(r.y,0,1)}var Hn=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return i.prototype.getRegion=function(){var t=null,e=null,a=this.points,n=this.dim,o=this.context.view.getCoordinate(),s=o.invert(vr(a)),l=o.invert(ie(a));return this.inPlot&&(La(s),La(l)),n==="x"?(t=o.convert({x:s.x,y:0}),e=o.convert({x:l.x,y:1})):(t=o.convert({x:0,y:s.y}),e=o.convert({x:1,y:l.y})),{start:t,end:e}},i}(zn),Yn=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.getMaskPath=function(){var t=this.points,e=[];return t.length&&(b(t,function(a,n){n===0?e.push(["M",a.x,a.y]):e.push(["L",a.x,a.y])}),e.push(["L",t[0].x,t[0].y])),e},i.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},i.prototype.addPoint=function(){this.resize()},i}(yi),Gc=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.getMaskPath=function(){var t=this.points;return gs(t,!0)},i}(Yn),Vc=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.setCursor=function(t){var e=this.context.view;e.getCanvas().setCursor(t)},i.prototype.default=function(){this.setCursor("default")},i.prototype.pointer=function(){this.setCursor("pointer")},i.prototype.move=function(){this.setCursor("move")},i.prototype.crosshair=function(){this.setCursor("crosshair")},i.prototype.wait=function(){this.setCursor("wait")},i.prototype.help=function(){this.setCursor("help")},i.prototype.text=function(){this.setCursor("text")},i.prototype.eResize=function(){this.setCursor("e-resize")},i.prototype.wResize=function(){this.setCursor("w-resize")},i.prototype.nResize=function(){this.setCursor("n-resize")},i.prototype.sResize=function(){this.setCursor("s-resize")},i.prototype.neResize=function(){this.setCursor("ne-resize")},i.prototype.nwResize=function(){this.setCursor("nw-resize")},i.prototype.seResize=function(){this.setCursor("se-resize")},i.prototype.swResize=function(){this.setCursor("sw-resize")},i.prototype.nsResize=function(){this.setCursor("ns-resize")},i.prototype.ewResize=function(){this.setCursor("ew-resize")},i.prototype.zoomIn=function(){this.setCursor("zoom-in")},i.prototype.zoomOut=function(){this.setCursor("zoom-out")},i}(at),zc=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.filterView=function(t,e,a){var n=this;t.getScaleByField(e)&&t.filter(e,a),t.views&&t.views.length&&b(t.views,function(o){n.filterView(o,e,a)})},i.prototype.filter=function(){var t=ge(this.context);if(t){var e=this.context.view,a=t.component,n=a.get("field");if(ze(t)){if(n){var o=a.getItemsByState("unchecked"),s=ye(e,n),l=o.map(function(f){return f.name});l.length?this.filterView(e,n,function(f){var p=s.getText(f);return!l.includes(p)}):this.filterView(e,n,null),e.render(!0)}}else if(Ka(t)){var h=a.getValue(),u=P(h,2),c=u[0],v=u[1];this.filterView(e,n,function(f){return f>=c&&f<=v}),e.render(!0)}}},i}(at);function Ma(r,i,t,e){var a=Math.min(t[i],e[i]),n=Math.max(t[i],e[i]),o=P(r.range,2),s=o[0],l=o[1];if(a<s&&(a=s),n>l&&(n=l),a===l&&n===l)return null;var h=r.invert(a),u=r.invert(n);if(r.isCategory){var c=r.values.indexOf(h),v=r.values.indexOf(u),f=r.values.slice(c,v+1);return function(p){return f.includes(p)}}else return function(p){return p>=h&&p<=u}}var wt;(function(r){r.FILTER="brush-filter-processing",r.RESET="brush-filter-reset",r.BEFORE_FILTER="brush-filter:beforefilter",r.AFTER_FILTER="brush-filter:afterfilter",r.BEFORE_RESET="brush-filter:beforereset",r.AFTER_RESET="brush-filter:afterreset"})(wt||(wt={}));var mr=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return i.prototype.hasDim=function(t){return this.dims.includes(t)},i.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},i.prototype.filter=function(){var t,e;if(He(this.context)){var a=this.context.event.target,n=a.getCanvasBBox();t={x:n.x,y:n.y},e={x:n.maxX,y:n.maxY}}else{if(!this.isStarted)return;t=this.startPoint,e=this.context.getCurrentPoint()}if(!(Math.abs(t.x-e.x)<5||Math.abs(t.x-e.y)<5)){var o=this.context,s=o.view,l=o.event,h={view:s,event:l,dims:this.dims};s.emit(wt.BEFORE_FILTER,lt.fromData(s,wt.BEFORE_FILTER,h));var u=s.getCoordinate(),c=u.invert(e),v=u.invert(t);if(this.hasDim("x")){var f=s.getXScale(),p=Ma(f,"x",c,v);this.filterView(s,f.field,p)}if(this.hasDim("y")){var d=s.getYScales()[0],p=Ma(d,"y",c,v);this.filterView(s,d.field,p)}this.reRender(s,{source:wt.FILTER}),s.emit(wt.AFTER_FILTER,lt.fromData(s,wt.AFTER_FILTER,h))}},i.prototype.end=function(){this.isStarted=!1},i.prototype.reset=function(){var t=this.context.view;if(t.emit(wt.BEFORE_RESET,lt.fromData(t,wt.BEFORE_RESET,{})),this.isStarted=!1,this.hasDim("x")){var e=t.getXScale();this.filterView(t,e.field,null)}if(this.hasDim("y")){var a=t.getYScales()[0];this.filterView(t,a.field,null)}this.reRender(t,{source:wt.RESET}),t.emit(wt.AFTER_RESET,lt.fromData(t,wt.AFTER_RESET,{}))},i.prototype.filterView=function(t,e,a){t.filter(e,a)},i.prototype.reRender=function(t,e){t.render(!0,e)},i}(at),mi=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.filterView=function(t,e,a){var n=Mt(t);b(n,function(o){o.filter(e,a)})},i.prototype.reRender=function(t){var e=Mt(t);b(e,function(a){a.render(!0)})},i}(mr),Hc=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.filter=function(){var t=ge(this.context),e=this.context.view,a=nt(e);if(He(this.context)){var n=qr(this.context,10);n&&b(a,function(d){n.includes(d)?d.show():d.hide()})}else if(t){var o=t.component,s=o.get("field");if(ze(t)){if(s){var l=o.getItemsByState("unchecked"),h=ye(e,s),u=l.map(function(d){return d.name});b(a,function(d){var g=St(d,s),m=h.getText(g);u.indexOf(m)>=0?d.hide():d.show()})}}else if(Ka(t)){var c=o.getValue(),v=P(c,2),f=v[0],p=v[1];b(a,function(d){var g=St(d,s);g>=f&&g<=p?d.show():d.hide()})}}},i.prototype.clear=function(){var t=nt(this.context.view);b(t,function(e){e.show()})},i.prototype.reset=function(){this.clear()},i}(at),Xn=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.byRecord=!1,t}return i.prototype.filter=function(){He(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},i.prototype.filterByRecord=function(){var t=this.context.view,e=qr(this.context,10);if(!!e){var a=t.getXScale().field,n=t.getYScales()[0].field,o=e.map(function(l){return l.getModel().data}),s=Mt(t);b(s,function(l){var h=nt(l);b(h,function(u){var c=u.getModel().data;tn(o,c,a,n)?u.show():u.hide()})})}},i.prototype.filterByBBox=function(){var t=this,e=this.context.view,a=Mt(e);b(a,function(n){var o=Qa(t.context,n,10),s=nt(n);o&&b(s,function(l){o.includes(l)?l.show():l.hide()})})},i.prototype.reset=function(){var t=Mt(this.context.view);b(t,function(e){var a=nt(e);b(a,function(n){n.show()})})},i}(at),Yc=10,Xc=5,Nc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return i.prototype.getButtonCfg=function(){return I(this.buttonCfg,this.cfg)},i.prototype.drawButton=function(){var t=this.getButtonCfg(),e=this.context.view.foregroundGroup.addGroup({name:t.name}),a=e.addShape({type:"text",name:"button-text",attrs:y({text:t.text},t.textStyle)}),n=a.getBBox(),o=Kr(t.padding),s=e.addShape({type:"rect",name:"button-rect",attrs:y({x:n.x-o[3],y:n.y-o[0],width:n.width+o[1]+o[3],height:n.height+o[0]+o[2]},t.style)});s.toBack(),e.on("mouseenter",function(){s.attr(t.activeStyle)}),e.on("mouseleave",function(){s.attr(t.style)}),this.buttonGroup=e},i.prototype.resetPosition=function(){var t=this.context.view,e=t.getCoordinate(),a=e.convert({x:1,y:1}),n=this.buttonGroup,o=n.getBBox(),s=st(null,[["t",a.x-o.width-Yc,a.y+o.height+Xc]]);n.setMatrix(s)},i.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},i.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},i.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),r.prototype.destroy.call(this)},i}(at),Wc=4,jc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return i.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},i.prototype.drag=function(){if(!!this.startPoint){var t=this.context.getCurrentPoint(),e=this.context.view,a=this.context.event;this.dragStart?e.emit("drag",{target:a.target,x:a.x,y:a.y}):$r(t,this.startPoint)>Wc&&(e.emit("dragstart",{target:a.target,x:a.x,y:a.y}),this.dragStart=!0)}},i.prototype.end=function(){if(this.dragStart){var t=this.context.view,e=this.context.event;t.emit("dragend",{target:e.target,x:e.x,y:e.y})}this.starting=!1,this.dragStart=!1},i}(at),Uc=5,qc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return i.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},i.prototype.move=function(){if(!!this.starting){var t=this.startPoint,e=this.context.getCurrentPoint(),a=$r(t,e);if(a>Uc&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var n=this.context.view,o=st(this.startMatrix,[["t",e.x-t.x,e.y-t.y]]);n.backgroundGroup.setMatrix(o),n.foregroundGroup.setMatrix(o),n.middleGroup.setMatrix(o)}}},i.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},i.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},i}(at),Aa="x",Fa="y",Nn=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.dims=[Aa,Fa],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return i.prototype.hasDim=function(t){return this.dims.includes(t)},i.prototype.getScale=function(t){var e=this.context.view;return t==="x"?e.getXScale():e.getYScales()[0]},i.prototype.resetDim=function(t){var e=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var a=this.getScale(t);e.scale(a.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},i.prototype.reset=function(){this.resetDim(Aa),this.resetDim(Fa);var t=this.context.view;t.render(!0)},i}(at),Zc=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return i.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var e=this.dims;b(e,function(a){var n=t.getScale(a),o=n.min,s=n.max,l=n.values;t.startCache[a]={min:o,max:s,values:l}})},i.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},i.prototype.translate=function(){var t=this;if(!!this.starting){var e=this.startPoint,a=this.context.view.getCoordinate(),n=this.context.getCurrentPoint(),o=a.invert(e),s=a.invert(n),l=s.x-o.x,h=s.y-o.y,u=this.context.view,c=this.dims;b(c,function(v){t.translateDim(v,{x:l*-1,y:h*-1})}),u.render(!0)}},i.prototype.translateDim=function(t,e){if(this.hasDim(t)){var a=this.getScale(t);a.isLinear&&this.translateLinear(t,a,e)}},i.prototype.translateLinear=function(t,e,a){var n=this.context.view,o=this.startCache[t],s=o.min,l=o.max,h=l-s,u=a[t]*h;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:s,max:l}),n.scale(e.field,{nice:!1,min:s+u,max:l+u})},i.prototype.reset=function(){r.prototype.reset.call(this),this.startPoint=null,this.starting=!1},i}(Nn),$c=function(r){k(i,r);function i(){var t=r!==null&&r.apply(this,arguments)||this;return t.zoomRatio=.05,t}return i.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},i.prototype.zoom=function(t){var e=this,a=this.dims;b(a,function(n){e.zoomDim(n,t)}),this.context.view.render(!0)},i.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},i.prototype.zoomDim=function(t,e){if(this.hasDim(t)){var a=this.getScale(t);a.isLinear&&this.zoomLinear(t,a,e)}},i.prototype.zoomLinear=function(t,e,a){var n=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:e.min,max:e.max});var o=this.cacheScaleDefs[t],s=o.max-o.min,l=e.min,h=e.max,u=a*s,c=l-u,v=h+u,f=v-c,p=f/s;v>c&&p<100&&p>.01&&n.scale(e.field,{nice:!1,min:l-u,max:h+u})},i}(Nn);function Kc(r){var i=r.gEvent.originalEvent;return i.deltaY>0}var Qc=1,Jc=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.scroll=function(t){var e=this.context,a=e.view,n=e.event;if(!!a.getOptions().scrollbar){var o=(t==null?void 0:t.wheelDelta)||Qc,s=a.getController("scrollbar"),l=a.getXScale(),h=a.getOptions().data,u=Lt(te(h,l.field)),c=Lt(l.values),v=s.getValue(),f=Math.floor((u-c)*v),p=f+(Kc(n)?o:-o),d=o/(u-c)/1e4,g=Pt(p/(u-c)+d,0,1);s.setValue(g)}},i}(at),_c="aixs-description-tooltip",tu=function(r){k(i,r);function i(){return r!==null&&r.apply(this,arguments)||this}return i.prototype.show=function(){var t=this.context,e=ge(t).axis,a=e.cfg.title,n=a.description,o=a.text,s=a.descriptionTooltipStyle,l=t.event,h=l.x,u=l.y;this.tooltip||this.renderTooltip(),this.tooltip.update({title:o||"",customContent:function(){return`
          <div class="`.concat(Oe,'" style={').concat(s,`}>
            <div class="`).concat(Re,`">
              \u5B57\u6BB5\u8BF4\u660E\uFF1A`).concat(n,`
            </div>
          </div>
        `)},x:h,y:u}),this.tooltip.show()},i.prototype.destroy=function(){r.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},i.prototype.hide=function(){this.tooltip&&this.tooltip.hide()},i.prototype.renderTooltip=function(){var t,e=this.context.view,a=e.canvas,n={start:{x:0,y:0},end:{x:a.get("width"),y:a.get("height")}},o=new fr({parent:a.get("el").parentNode,region:n,visible:!1,containerId:_c,domStyles:y({},I({},(t={},t[Oe]={"max-width":"50%",padding:"10px","line-height":"15px","font-size":"12px",color:"rgba(0, 0, 0, .65)"},t[Re]={"word-break":"break-all","margin-bottom":"3px"},t)))});o.init(),o.setCapture(!1),this.tooltip=o},i}(at);Bs("dark",rn(ml));Va("canvas",Po);Va("svg",Io);At("Polygon",Pl);At("Interval",Al);At("Schema",Il);At("Path",ii);At("Point",El);At("Line",Fl);At("Area",wl);At("Edge",Cl);At("Heatmap",Sl);At("Violin",Rl);dr("base",ti);dr("interval",Ql);dr("pie",Jl);dr("polar",kn);dt("overlap",vh);dt("distribute",th);dt("fixed-overlap",uh);dt("hide-overlap",Sh);dt("limit-in-shape",sh);dt("limit-in-canvas",oh);dt("limit-in-plot",zh);dt("pie-outer",rh);dt("adjust-color",Th);dt("interval-adjust-position",Fh);dt("interval-hide-overlap",Eh);dt("point-adjust-position",Ih);dt("pie-spider",nh);dt("path-adjust-position",Dh);mt("fade-in",Hh);mt("fade-out",Yh);mt("grow-in-x",Nh);mt("grow-in-xy",jh);mt("grow-in-y",Wh);mt("scale-in-x",Zh);mt("scale-in-y",$h);mt("wave-in",Qh);mt("zoom-in",Jh);mt("zoom-out",_h);mt("position-update",qh);mt("sector-path-update",Kh);mt("path-in",Uh);Se("rect",ac);Se("mirror",ic);Se("list",ec);Se("matrix",rc);Se("circle",tc);Se("tree",nc);be("axis",lc);be("legend",hc);be("tooltip",qs);be("annotation",sc);be("slider",cc);be("scrollbar",fc);G("tooltip",Dn);G("sibling-tooltip",yc);G("ellipsis-text",mc);G("element-active",xc);G("element-single-active",Sc);G("element-range-active",Cc);G("element-highlight",di);G("element-highlight-by-x",Tc);G("element-highlight-by-color",bc);G("element-single-highlight",Lc);G("element-range-highlight",Vn);G("element-sibling-highlight",Vn,{effectSiblings:!0,effectByRecord:!0});G("element-selected",Ac);G("element-single-selected",Fc);G("element-range-selected",Mc);G("element-link-by-color",wc);G("active-region",gc);G("list-active",Bc);G("list-selected",kc);G("list-highlight",gi);G("list-unchecked",Pc);G("list-checked",Ic);G("list-focus",Oc);G("list-radio",Rc);G("legend-item-highlight",gi,{componentNames:["legend"]});G("axis-label-highlight",gi,{componentNames:["axis"]});G("axis-description",tu);G("rect-mask",zn);G("x-rect-mask",Hn,{dim:"x"});G("y-rect-mask",Hn,{dim:"y"});G("circle-mask",Dc);G("path-mask",Yn);G("smooth-path-mask",Gc);G("cursor",Vc);G("data-filter",zc);G("brush",mr);G("brush-x",mr,{dims:["x"]});G("brush-y",mr,{dims:["y"]});G("sibling-filter",mi);G("sibling-x-filter",mi);G("sibling-y-filter",mi);G("element-filter",Hc);G("element-sibling-filter",Xn);G("element-sibling-filter-record",Xn,{byRecord:!0});G("view-drag",jc);G("view-move",qc);G("scale-translate",Zc);G("scale-zoom",$c);G("reset-button",Nc,{name:"reset-button",text:"reset"});G("mousewheel-scroll",Jc);function Xt(r){return r.isInPlot()}Z("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]});Z("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseout",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]});Z("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]});Z("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]});Z("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]});Z("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]});Z("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]});Z("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]});Z("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]});Z("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]});Z("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]});Z("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(r){return!r.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(r){return!r.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]});Z("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Xt,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Xt,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Xt,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]});Z("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]});Z("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Xt,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Xt,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Xt,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]});Z("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Xt,action:"path-mask:start"},{trigger:"mousedown",isEnable:Xt,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]});Z("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]});Z("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:["cursor:pointer","list-radio:show"]},{trigger:"legend-item:mouseleave",action:["cursor:default","list-radio:hide"]}],start:[{trigger:"legend-item:click",isEnable:function(r){return!r.isInShape("legend-item-radio")},action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","data-filter:filter","list-radio:show"]},{trigger:"legend-item-radio:mouseenter",action:["list-radio:showTip"]},{trigger:"legend-item-radio:mouseleave",action:["list-radio:hideTip"]},{trigger:"legend-item-radio:click",action:["list-focus:toggle","data-filter:filter","list-radio:show"]}]});Z("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]});Z("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]});Z("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["legend-item-highlight:reset","element-highlight:reset","list-unchecked:toggle","element-filter:filter"]}]});Z("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});Z("axis-description",{start:[{trigger:"axis-description:mousemove",action:"axis-description:show"}],end:[{trigger:"axis-description:mouseleave",action:"axis-description:hide"}]});function Ba(r){return r.gEvent.preventDefault(),r.gEvent.originalEvent.deltaY>0}Z("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(r){return Ba(r.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(r){return!Ba(r.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]});Z("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]});Z("plot-mousewheel-scroll",{start:[{trigger:"plot:mousewheel",action:"mousewheel-scroll:scroll"}]});export{ru as C};
